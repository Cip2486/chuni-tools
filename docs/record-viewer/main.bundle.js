(()=>{var e={692:(e,t,n)=>{var r={"./en_US.json":903,"./zh_TW.json":141};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=692},903:e=>{"use strict";e.exports=JSON.parse('{"locale.name":"English (US)","main.title":"Chunithm Tools","loading.constData":"Used song constant data: {{name}}","loading.error":"Oops! We got some errors when fetching song record.<br/>It might be caused by an outdated token.<br/><em>Reload the page</em> or <em>re-login CHUNITHM-NET</em> might help...","settings.main.title":"Settings","settings.main.reset":"Reset Settings","settings.filter.title":"Filter","settings.filter.const":"By Chart Constant","settings.filter.diff":"By Difficulty","settings.filter.diff.warn":"*should select at least one!","settings.filter.diff.notify":"*Filtering difficulties might cause the \\"Best 30\\" data to be inaccurate.","settings.filter.genre":"By Genre","settings.filter.genre.all":"Toggle ALL","settings.data.title":"Game Data","settings.data.constData":"Chart Constant Data to Use","settings.data.constData.intl":"International Ver. (NEW+)","settings.data.constData.jp":"Japanese Ver. (SUN)","settings.data.overpower":"Show Over Power","settings.data.playcount":"Show Play Count","settings.ui.title":"User Interface","settings.ui.locale":"Language","settings.ui.theme":"Theme","player.generic.generatedAt":"Generated At","player.best.playCount":"Play Count","player.best.best30":"Best 30","player.best.maxPossible":"Max Possible","player.recent.best10":"Recent 10","player.recent.history10":"History 10","player.recent.history30":"History 30","record.head.title":"Title","record.head.const":"Const","record.head.overpower":"OP","record.head.overpowerPercent":"OP%","record.head.rank":"Rank","record.head.score":"Score","record.head.rating":"Rating","record.head.ajfc":"AJ","record.head.playcount":"Play","record.fetch.fetching":"Fetching record for <span style=\\"color:var(--theme-song-{{diff}});\\">{{diffStr}}</span> difficulty...","record.fetch.diff.ult":"ULTIMA","record.fetch.diff.mas":"MASTER","record.fetch.diff.exp":"EXPERT","record.fetch.diff.adv":"ADVANCED","record.fetch.diff.bas":"BASIC","record.fetch.unknown":"Found unknown song(s):\\n\\n{{songs}}\\n\\nPlease contact the author at Twitter or Discord.","record.fetch.error":"<span style=\\"color:red;\\">Some error occured when fetching best record!<br/>You probably need to reload the page now.</span>","playcount.fetch.progress":"Fetching play count... ({{progress}}/{{all}})","playcount.fetch.error":"<span style=\\"color:red;\\">Some error occured when fetching play count!<br/>You probably need to reload the page now.</span>"}')},141:e=>{"use strict";e.exports=JSON.parse('{"locale.name":"繁體中文","main.title":"CHUNITHM 查分器","loading.constData":"使用來自 {{name}} 的定數資料","loading.error":"哇，看來我們這裡出了一點小意外，<br/>這可能是因為過期的憑證所導致的。<br/>可以考慮 <em>重新整理</em> 或 <em>重新登入 CHUNITHM-NET</em> 再試試。","settings.main.title":"設定","settings.main.reset":"重置設定","settings.filter.title":"歌曲篩選","settings.filter.const":"依 譜面定數","settings.filter.diff":"依 譜面難度","settings.filter.diff.warn":"*至少選一個吧割","settings.filter.diff.notify":"*依照難度篩選，可能會使得B30的記錄變得不準確","settings.filter.genre":"依 歌曲類別","settings.filter.genre.all":"全部開啟/關閉","settings.data.title":"遊戲數據","settings.data.constData":"使用的定數資料","settings.data.constData.intl":"國際版 (NEW+)","settings.data.constData.jp":"日版 (SUN)","settings.data.overpower":"顯示OVER POWER","settings.data.playcount":"顯示個別歌曲遊玩次數","settings.ui.title":"使用者介面","settings.ui.locale":"語言","settings.ui.theme":"佈景主題","player.generic.generatedAt":"生成日期","player.best.playCount":"遊玩道數","player.best.best30":"BEST 30","player.best.maxPossible":"不推分可達到","player.recent.best10":"RECENT 10","player.recent.history10":"遊玩記錄前10","player.recent.history30":"遊玩記錄前30","record.head.title":"曲名","record.head.const":"定數","record.head.overpower":"OP","record.head.overpowerPercent":"OP%","record.head.rank":"等級","record.head.score":"成績","record.head.rating":"評分","record.head.ajfc":"AJ","record.head.playcount":"次數","record.fetch.fetching":"正在載入 <span style=\\"color:var(--theme-song-{{diff}});\\">{{diffStr}}</span> 資料……","record.fetch.diff.ult":"黑譜 (ULTIMA)","record.fetch.diff.mas":"紫譜 (MASTER)","record.fetch.diff.exp":"紅譜 (EXPERT)","record.fetch.diff.adv":"黃譜 (ADVANCED)","record.fetch.diff.bas":"綠譜 (BASIC)","record.fetch.unknown":"以下是我們沒辦法找到定數資料的歌曲：\\n{{songs}}\\n請投過推特或Discord等方式聯繫本查分器的製作者。","record.fetch.error":"<span style=\\"color:red;\\">在載入歌曲遊玩記錄時出現問題，<br/>您可能需要重新整理頁面後再試一次。</span>","playcount.fetch.progress":"正在載入歌曲遊玩次數…… ({{progress}}/{{all}})","playcount.fetch.error":"<span style=\\"color:red;\\">在載入歌曲遊玩次數時出現問題，<br/>您可能需要重新整理頁面後再試一次。</span>"}')}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(){}const t=e=>e;function r(e){return e()}function o(){return Object.create(null)}function s(e){e.forEach(r)}function l(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e){return 0===Object.keys(e).length}function c(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function d(e){let t;return c(e,(e=>t=e))(),t}function u(e,t,n){e.$$.on_destroy.push(c(t,n))}function f(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function h(e,t,n){return e.set(n),t}const p="undefined"!=typeof window;let g=p?()=>window.performance.now():()=>Date.now(),m=p?e=>requestAnimationFrame(e):e;const v=new Set;function b(e){v.forEach((t=>{t.c(e)||(v.delete(t),t.f())})),0!==v.size&&m(b)}let y=!1;function w(e,t){e.appendChild(t)}function x(e,t,n){const r=$(e);if(!r.getElementById(t)){const e=T("style");e.id=t,e.textContent=n,j(r,e)}}function $(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function k(e){const t=T("style");return j($(e),t),t.sheet}function j(e,t){return w(e.head||e,t),t.sheet}function S(e,t,n){e.insertBefore(t,n||null)}function z(e){e.parentNode&&e.parentNode.removeChild(e)}function C(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function T(e){return document.createElement(e)}function M(e){return document.createTextNode(e)}function E(){return M(" ")}function A(){return M("")}function L(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function H(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _(e){return""===e?null:+e}function P(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function N(e,t){e.value=null==t?"":t}function R(e,t,n,r){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function D(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}e.selectedIndex=-1}function O(e,t,n){e.classList[n?"add":"remove"](t)}class F{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){var r;this.e||(this.is_svg?this.e=(r=t.nodeName,document.createElementNS("http://www.w3.org/2000/svg",r)):this.e=T(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)S(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(z)}}const U=new Map;let B,I=0;function V(e,t,n,r,o,s,l,a=0){const i=16.666/r;let c="{\n";for(let e=0;e<=1;e+=i){const r=t+(n-t)*s(e);c+=100*e+`%{${l(r,1-r)}}\n`}const d=c+`100% {${l(n,1-n)}}\n}`,u=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(d)}_${a}`,f=$(e),{stylesheet:h,rules:p}=U.get(f)||function(e,t){const n={stylesheet:k(t),rules:{}};return U.set(e,n),n}(f,e);p[u]||(p[u]=!0,h.insertRule(`@keyframes ${u} ${d}`,h.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${u} ${r}ms linear ${o}ms 1 both`,I+=1,u}function q(e){B=e}function J(){if(!B)throw new Error("Function called outside component initialization");return B}const W=[],X=[],G=[],Z=[],Y=Promise.resolve();let Q=!1;function K(e){G.push(e)}function ee(e){Z.push(e)}const te=new Set;let ne,re=0;function oe(){if(0!==re)return;const e=B;do{try{for(;re<W.length;){const e=W[re];re++,q(e),se(e.$$)}}catch(e){throw W.length=0,re=0,e}for(q(null),W.length=0,re=0;X.length;)X.pop()();for(let e=0;e<G.length;e+=1){const t=G[e];te.has(t)||(te.add(t),t())}G.length=0}while(W.length);for(;Z.length;)Z.pop()();Q=!1,te.clear(),q(e)}function se(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(K)}}function le(e,t,n){e.dispatchEvent(function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,r,t),o}(`${t?"intro":"outro"}${n}`))}const ae=new Set;let ie;function ce(){ie={r:0,c:[],p:ie}}function de(){ie.r||s(ie.c),ie=ie.p}function ue(e,t){e&&e.i&&(ae.delete(e),e.i(t))}function fe(e,t,n,r){if(e&&e.o){if(ae.has(e))return;ae.add(e),ie.c.push((()=>{ae.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}const he={duration:0};function pe(n,r,o,a){const i={direction:"both"};let c=r(n,o,i),d=a?0:1,u=null,f=null,h=null;function p(){h&&function(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=n.length-r.length;o&&(e.style.animation=r.join(", "),I-=o,I||m((()=>{I||(U.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&z(t)})),U.clear())})))}(n,h)}function y(e,t){const n=e.b-d;return t*=Math.abs(n),{a:d,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function w(r){const{delay:o=0,duration:l=300,easing:a=t,tick:i=e,css:w}=c||he,x={start:g()+o,b:r};r||(x.group=ie,ie.r+=1),u||f?f=x:(w&&(p(),h=V(n,d,r,l,o,a,w)),r&&i(0,1),u=y(x,l),K((()=>le(n,r,"start"))),function(e){let t;0===v.size&&m(b),new Promise((n=>{v.add(t={c:e,f:n})}))}((e=>{if(f&&e>f.start&&(u=y(f,l),f=null,le(n,u.b,"start"),w&&(p(),h=V(n,d,u.b,u.duration,0,a,c.css))),u)if(e>=u.end)i(d=u.b,1-d),le(n,u.b,"end"),f||(u.b?p():--u.group.r||s(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;d=u.a+u.d*a(t/u.duration),i(d,1-d)}return!(!u&&!f)})))}return{run(e){l(c)?(ne||(ne=Promise.resolve(),ne.then((()=>{ne=null}))),ne).then((()=>{c=c(i),w(e)})):w(e)},end(){p(),u=f=null}}}const ge="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;let me;function ve(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function be(e){e&&e.c()}function ye(e,t,n,o){const{fragment:a,after_update:i}=e.$$;a&&a.m(t,n),o||K((()=>{const t=e.$$.on_mount.map(r).filter(l);e.$$.on_destroy?e.$$.on_destroy.push(...t):s(t),e.$$.on_mount=[]})),i.forEach(K)}function we(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function xe(t,n,r,l,a,i,c,d=[-1]){const u=B;q(t);const f=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:o(),dirty:d,skip_bound:!1,root:n.target||u.$$.root};c&&c(f.root);let h=!1;if(f.ctx=r?r(t,n.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=o)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](o),h&&function(e,t){-1===e.$$.dirty[0]&&(W.push(e),Q||(Q=!0,Y.then(oe)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],f.update(),h=!0,s(f.before_update),f.fragment=!!l&&l(f.ctx),n.target){if(n.hydrate){y=!0;const e=(p=n.target,Array.from(p.childNodes));f.fragment&&f.fragment.l(e),e.forEach(z)}else f.fragment&&f.fragment.c();n.intro&&ue(t.$$.fragment),ye(t,n.target,n.anchor,n.customElement),y=!1,oe()}var p;q(u)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(me=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(r).filter(l);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){we(this,1),this.$destroy=e}$on(t,n){if(!l(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){this.$$set&&!i(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class $e{$destroy(){we(this,1),this.$destroy=e}$on(t,n){if(!l(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){this.$$set&&!i(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ke=[];function je(t,n=e){let r;const o=new Set;function s(e){if(a(t,e)&&(t=e,r)){const e=!ke.length;for(const e of o)e[1](),ke.push(e,t);if(e){for(let e=0;e<ke.length;e+=2)ke[e][0](ke[e+1]);ke.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(l,a=e){const i=[l,a];return o.add(i),1===o.size&&(r=n(s)||e),l(t),()=>{o.delete(i),0===o.size&&(r(),r=null)}}}}function Se(t,n,r){const o=!Array.isArray(t),a=o?[t]:t,i=n.length<2;return{subscribe:je(r,(t=>{let r=!1;const d=[];let u=0,f=e;const h=()=>{if(u)return;f();const r=n(o?d[0]:d,t);i?t(r):f=l(r)?r:e},p=a.map(((e,t)=>c(e,(e=>{d[t]=e,u&=~(1<<t),r&&h()}),(()=>{u|=1<<t}))));return r=!0,h(),function(){s(p),f()}})).subscribe}}function ze(e,t){return e.slice(0,t).reduce(((e,t)=>e+t),0)/t}function Ce(e){return(e.slice(0,30).reduce(((e,t)=>e+t),0)+10*e[0])/40}var Te;!function(e){e.basic="BAS",e.advanced="ADV",e.expert="EXP",e.master="MAS",e.ultima="ULT"}(Te||(Te={}));const Me=Object.values(Te);var Ee;!function(e){e["P & A"]="0",e.niconico="2",e["東方Project"]="3",e.ORIGINAL="5",e.VARIETY="6",e["イロドリ"]="7",e["ゲキマイ"]="9"}(Ee||(Ee={}));const Ae=Object.keys(Ee);var Le;function He(e,t){return(n,r)=>{const o={action:n,payload:r};e.postMessage(o,t)}}!function(e){e.en_US="en_US",e.zh_TW="zh_TW"}(Le||(Le={}));const _e="https://chunithm-net-eng.com";function Pe(e,t,n,r=(()=>{})){let o=localStorage[e];void 0!==o&&n.includes(o)||(localStorage[e]=t,o=localStorage[e]);const{subscribe:s,set:l,update:a}=je(o);return{subscribe:s,set(t){l(t),localStorage[e]=t,r(t)},update:a,reset(){this.set(t)},accepts:n}}function Ne(e,t,n,r,o=(()=>{})){let s=localStorage[e],l=parseFloat(s);(void 0===s||l>r||l<n)&&(localStorage[e]=t,s=localStorage[e],l=parseFloat(s));const{subscribe:a,set:i,update:c}=je(l);return{subscribe:a,set(t){i(t),localStorage[e]=t,o(t)},update:c,reset(){this.set(t)}}}function Re(e,t,n=(()=>{})){let r=localStorage[e];(void 0===r||"true"!==r&&"false"!==r)&&(localStorage[e]=t,r=localStorage[e]);let o=JSON.parse(r);const{subscribe:s,set:l,update:a}=je(o);return{subscribe:s,set(t){l(t),localStorage[e]=t,n(t)},update:a,reset(){this.set(t)},toggle(){this.update((e=>!e))}}}function De(e,t,n=(()=>{})){let r=localStorage[e];null==r&&(localStorage[e]=JSON.stringify(t),r=localStorage[e]);let o=JSON.parse(r),s=Object.keys(t);Object.keys(o).every((e=>s.includes(e)&&"boolean"==typeof o[e]))||(localStorage[e]=JSON.stringify(t),r=localStorage[e]),o=JSON.parse(r);const{subscribe:l,set:a,update:i}=je(o);return{subscribe:l,set(t){a(t),localStorage[e]=JSON.stringify(t),n(t)},update:i,reset(){this.set(t)}}}const Oe=Pe("language",function(){switch(localStorage.chuniToolsLang){case Le.en_US:return Le.en_US;case Le.zh_TW:return Le.zh_TW}return null}()||(navigator.language.startsWith("zh")?Le.zh_TW:Le.en_US),Object.values(Le),(()=>{He(window.opener,_e)("saveConfig",{lang:d(Oe)})})),Fe=Pe("theme","dark",["dark","purple","bright"]),Ue=Ne("filterConstMin",1,1,15.4),Be=Ne("filterConstMax",15.4,1,15.4),Ie=De("filterDiff",{BAS:!1,ADV:!1,EXP:!0,MAS:!0,ULT:!0},(()=>{vt.updateDiffFilter()}));let Ve={};for(let e of Ae)Ve[e]=!0;const qe=De("filterGenre",Ve),Je=Pe("usedConstData","intl",["intl","jp"],(()=>{pt.updateConstData(),gt.updateConstData(),vt.updateConstData()})),We=Re("showOverPower",!1),Xe=Re("showPlaycount",!1),Ge=[Oe,Fe,Be,Ue,Ie,qe,Je,We,Xe],Ze=new Map,Ye=new Map;for(let e of Oe.accepts)Ze.set(e,new Map(Object.entries(n(692)(`./${e}.json`)))),Ye.set(e,Ze.get(e)?.get("locale.name")||"Undefined locale name");const Qe=Ze,Ke=Se(Oe,(e=>(t,n={})=>function(e,t,n){if(!t)throw new Error("No key specified");let r=Qe.get(e)?.get(t);return void 0===r?(console.error(`No translation found for ${e}.${t}`),t):(Object.keys(n).map((e=>{const t=new RegExp(`{{${e}}}`,"g");r=r?.replace(t,n[e])})),r)}(e,t,n))),et={default:(e,t)=>t.rating-e.rating||t.const-e.const||e.score-t.score,title:(e,t)=>e.title<t.title?-1:e.title>t.title?1:Me.indexOf(t.difficulty)-Me.indexOf(e.difficulty),const:(e,t)=>t.const-e.const,op:(e,t)=>t.op-e.op,opp:(e,t)=>t.op/t.opmax-e.op/e.opmax,score:(e,t)=>t.score-e.score,rating:(e,t)=>e.order-t.order,aj:(e,t)=>{if(e.clear==t.clear)return e.order-t.order;const n=["","FC","AJ"];return n.indexOf(t.clear)-n.indexOf(e.clear)},playcount:(e,t)=>null==e.playCount?100:null==t.playCount?-100:e.playCount==t.playCount?e.order-t.order:t.playCount-e.playCount};async function tt(e,t=!1){const n=e,r=await d(ft),o=[];return n.map((e=>{if("WE"===e.difficulty)return e.const=-1,void(e.rating=0);let t=r[e.title];if(void 0===t&&(e.title=e.title.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'"),t=r[e.title]),void 0===t)return o.push(e),e.const=0,void(e.rating=0);e.const=t[e.difficulty],e.rating=function(e){let t=100*e.const;const n=[[101e4,t+215],[1009e3,t+215],[1007500,t+200],[1005e3,t+150],[1e6,t+100],[975e3,t],[925e3,t-300],[9e5,t-500],[8e5,(t-500)/2],[5e5,0],[0,0]];let r=1;n.some(((t,n)=>(r=n,e.score>t[0])));const o=n[r-1],s=n[r],l=s[1]+(o[1]-s[1])/(o[0]-s[0])*(e.score-s[0]);return Math.floor(Math.max(0,l))/100}(e),e.op=function(e){let t={AJ:1,FC:.5,"":0}[e.clear];return 101e4==e.score?5*(e.const+3):e.score>1007500?5*(e.const+2)+t+.0015*(e.score-1007500):5*e.rating+t}(e),e.opmax=5*(e.const+3),e.rank=function(e){const t=[[101e4,"MAX"],[1009e3,"SSS+"],[1007500,"SSS"],[1005e3,"SS+"],[1e6,"SS"],[99e4,"S+"],[975e3,"S"],[95e4,"AAA"],[925e3,"AA"],[9e5,"A"],[8e5,"BBB"],[7e5,"BB"],[6e5,"B"],[5e5,"C"],[0,"D"]];let n=0;return t.some(((t,r)=>(n=r,e>=t[0]))),t[n][1]}(e.score),e.genre=t.genre})),t&&o.length&&alert(d(Ke)("record.fetch.unknown",{songs:o.map((e=>`    ${e.title} ${e.difficulty}`)).join("\n")})),n.sort(et.default),n.map(((e,t)=>{e.order=t+1})),n}class nt{constructor(e,t,n){this.resolve=()=>{},this.reject=()=>{},this.handled=!1,this.retryTime=0;let r=this;this.uuid=e,this.payload=t,this.promise=new Promise(((e,t)=>{r.resolve=e,r.reject=t}));const o=()=>{this.handled||(this.retryTime<5?(this.retryTime+=1,n("request",t),this.timeout=setTimeout(o,2e3)):this.reject("Request timed out: 2000 ms"))};this.timeout=setTimeout(o,2e3),n("request",t)}}const rt=new Map;async function ot(e,t,n){const r=He(window.opener,_e),o=crypto.randomUUID(),s={target:e,uuid:o};t&&(s.difficulty=t),n&&(s.idx=n);const l=new nt(o,s,r);return rt.set(o,l),l.promise}function st(e=!1){const{subscribe:t,set:n,update:r}=je(e);return{subscribe:t,set:n,update:r,toggle(){r((e=>!e))}}}window.addEventListener("message",(function(e){"preflight"===e.data.action&&(rt.has(e.data.payload.uuid)||console.error("Unexpected response: "+e.data.payload.uuid),rt.get(e.data.payload.uuid).handled=!0,clearTimeout(rt.get(e.data.payload.uuid)?.timeout)),"respond"===e.data.action&&(rt.has(e.data.payload.uuid)||console.error("Unexpected response: "+e.data.payload.uuid),e.data.payload.error?(console.error("Error on handling request: "+e.data.payload.target+"\n",e.data.payload.error),rt.get(e.data.payload.uuid)?.reject(e.data.payload.error)):rt.get(e.data.payload.uuid)?.resolve(e.data.payload.data),rt.delete(e.data.payload.uuid))}),!1);const lt=je("best"),at=st(!1),it=je(""),ct=st(!1),dt=st(!1),ut={};for(let e of Je.accepts)ut[e]=void 0;const ft=Se(Je,(async e=>(ut[e]||(ut[e]=await fetch(`https://raw.githubusercontent.com/Dogeon188/chuni_new_intl_viewer/data/data/${e}.json`).then((async e=>await e.json()))),ut[e])));function ht(e){const{subscribe:t,set:n}=je([]);let r=!1,o=[];return{set:n,subscribe:t,async init(){o=await ot(e),n(await tt(o)),r=!0},async updateConstData(){r&&n(await tt(o))}}}const pt=ht("recentRecord"),gt=ht("playHistory"),mt=(()=>{const{subscribe:e,set:t}=je({});return{set:t,subscribe:e,async init(){t(await ot("playerStats"))}}})(),vt=(()=>{const{subscribe:e,set:t}=je([]);let n,r=!1,o=[];return{set:t,subscribe:e,async init(){n=JSON.parse(JSON.stringify(d(Ie)));for(let e of Me)n[e]&&(it.set(d(Ke)("record.fetch.fetching",{diff:e.toLowerCase(),diffStr:d(Ke)("record.fetch.diff."+e.toLowerCase())})),Array.prototype.push.apply(o,await ot("bestRecord",e)));t(await tt(o,!0)),r=!0},async updateConstData(){r&&t(await tt(o,!0))},async updateDiffFilter(){if(!r)return;dt.set(!0),ct.set(!0);let e=!1;try{for(let t of Me)!n[t]&&d(Ie)[t]&&(n[t]=!0,it.set(d(Ke)("record.fetch.fetching",{diff:t.toLowerCase(),diffStr:d(Ke)("record.fetch.diff."+t.toLowerCase())})),Array.prototype.push.apply(o,await ot("bestRecord",t)),e=!0);e&&t(await tt(o,!0)),ct.set(!1),dt.set(!1)}catch{dt.set(!1),it.set(d(Ke)("record.fetch.error")),setTimeout((()=>{ct.set(!1)}),6e3)}}}})();function bt(e){x(e,"svelte-ufw7k","header.svelte-ufw7k.svelte-ufw7k{display:flex;gap:0.5rem;padding:0 1rem}a.svelte-ufw7k.svelte-ufw7k{padding:1rem 3%;cursor:pointer}a.svelte-ufw7k.svelte-ufw7k:hover{text-decoration-color:var(--theme-text-dim)}a.svelte-ufw7k h3.svelte-ufw7k{margin:0;color:var(--theme-text-dim)}a.svelte-ufw7k h3.selected.svelte-ufw7k{color:var(--theme-text)}")}function yt(t){let n,r,o,s,l,a,i,c,d;return{c(){n=T("header"),r=T("a"),o=T("h3"),o.textContent="BEST",s=E(),l=T("a"),a=T("h3"),a.textContent="RECENT",i=E(),c=T("a"),d=T("h3"),d.textContent="HISTORY",H(o,"class","svelte-ufw7k"),O(o,"selected","best"==t[0]),H(r,"href","#best"),H(r,"class","svelte-ufw7k"),H(a,"class","svelte-ufw7k"),O(a,"selected","recent"==t[0]),H(l,"href","#recent"),H(l,"class","svelte-ufw7k"),H(d,"class","svelte-ufw7k"),O(d,"selected","history"==t[0]),H(c,"href","#history"),H(c,"class","svelte-ufw7k"),H(n,"class","svelte-ufw7k")},m(e,t){S(e,n,t),w(n,r),w(r,o),w(n,s),w(n,l),w(l,a),w(n,i),w(n,c),w(c,d)},p(e,[t]){1&t&&O(o,"selected","best"==e[0]),1&t&&O(a,"selected","recent"==e[0]),1&t&&O(d,"selected","history"==e[0])},i:e,o:e,d(e){e&&z(n)}}}function wt(e,t,n){let r;return u(e,lt,(e=>n(0,r=e))),[r]}const xt=class extends $e{constructor(e){super(),xe(this,e,wt,yt,a,{},bt)}},$t=(()=>{let e=0;return()=>(e+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${e}`)})();function kt(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}function jt(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function St(e,t={}){return{width:t.width||function(e){const t=jt(e,"border-left-width"),n=jt(e,"border-right-width");return e.clientWidth+t+n}(e),height:t.height||function(e){const t=jt(e,"border-top-width"),n=jt(e,"border-bottom-width");return e.clientHeight+t+n}(e)}}const zt=16384;function Ct(e){return new Promise(((t,n)=>{const r=new Image;r.decode=()=>t(r),r.onload=()=>t(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e}))}function Tt(e,t,n){const r=window.getComputedStyle(e,n),o=r.getPropertyValue("content");if(""===o||"none"===o)return;const s=$t();try{t.className=`${t.className} ${s}`}catch(e){return}const l=document.createElement("style");l.appendChild(function(e,t,n){const r=`.${e}:${t}`,o=n.cssText?function(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}(n):function(e){return kt(e).map((t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?" !important":""};`)).join(" ")}(n);return document.createTextNode(`${r}{${o}}`)}(s,n,r)),t.appendChild(l)}const Mt="application/font-woff",Et="image/jpeg",At={woff:Mt,woff2:Mt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Et,jpeg:Et,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Lt(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return At[t]||""}function Ht(e){return-1!==e.search(/^(data:)/)}function _t(e,t){return`data:${t};base64,${e}`}async function Pt(e,t,n){const r=await fetch(e,t);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const o=await r.blob();return new Promise(((e,t)=>{const s=new FileReader;s.onerror=t,s.onloadend=()=>{try{e(n({res:r,result:s.result}))}catch(e){t(e)}},s.readAsDataURL(o)}))}const Nt={};async function Rt(e,t,n){const r=function(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}(e,t,n.includeQueryParams);if(null!=Nt[r])return Nt[r];let o;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const r=await Pt(e,n.fetchRequestInit,(({res:e,result:n})=>(t||(t=e.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(n))));o=_t(r,t)}catch(t){o=n.imagePlaceholder||"";let r=`Failed to fetch resource: ${e}`;t&&(r="string"==typeof t?t:t.message),r&&console.warn(r)}return Nt[r]=o,o}async function Dt(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then((e=>async function(e,t){return e instanceof HTMLCanvasElement?async function(e){const t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):Ct(t)}(e):e instanceof HTMLVideoElement?async function(e,t){if(e.currentSrc){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==n||n.drawImage(e,0,0,t.width,t.height),Ct(t.toDataURL())}const n=e.poster,r=Lt(n);return Ct(await Rt(n,r,t))}(e,t):e instanceof HTMLIFrameElement?async function(e){var t;try{if(null===(t=null==e?void 0:e.contentDocument)||void 0===t?void 0:t.body)return await Dt(e.contentDocument.body,{},!0)}catch(e){}return e.cloneNode(!1)}(e):e.cloneNode(!1)}(e,t))).then((n=>async function(e,t,n){var r;const o=null!=(s=e).tagName&&"SLOT"===s.tagName.toUpperCase()&&e.assignedNodes?kt(e.assignedNodes()):kt((null!==(r=e.shadowRoot)&&void 0!==r?r:e).childNodes);var s;return 0===o.length||e instanceof HTMLVideoElement||await o.reduce(((e,r)=>e.then((()=>Dt(r,n))).then((e=>{e&&t.appendChild(e)}))),Promise.resolve()),t}(e,n,t))).then((t=>function(e,t){return t instanceof Element&&(function(e,t){const n=t.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):kt(r).forEach((e=>{let t=r.getPropertyValue(e);if("font-size"===e&&t.endsWith("px")){const e=Math.floor(parseFloat(t.substring(0,t.length-2)))-.1;t=`${e}px`}n.setProperty(e,t,r.getPropertyPriority(e))}))}(e,t),function(e,t){Tt(e,t,":before"),Tt(e,t,":after")}(e,t),function(e,t){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(e instanceof HTMLSelectElement){const n=t,r=Array.from(n.children).find((t=>e.value===t.getAttribute("value")));r&&r.setAttribute("selected","")}}(e,t)),t}(e,t))).then((e=>async function(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const r={};for(let o=0;o<n.length;o++){const s=n[o].getAttribute("xlink:href");if(s){const n=e.querySelector(s),o=document.querySelector(s);n||!o||r[s]||(r[s]=await Dt(o,t,!0))}}const o=Object.values(r);if(o.length){const t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const r=document.createElementNS(t,"defs");n.appendChild(r);for(let e=0;e<o.length;e++)r.appendChild(o[e]);e.appendChild(n)}return e}(e,t))):null}const Ot=/url\((['"]?)([^'"]+?)\1\)/g,Ft=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ut=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Bt(e){return-1!==e.search(Ot)}async function It(e,t,n){if(!Bt(e))return e;const r=function(e,{preferredFontFormat:t}){return t?e.replace(Ut,(e=>{for(;;){const[n,,r]=Ft.exec(e)||[];if(!r)return"";if(r===t)return`src: ${n};`}})):e}(e,n),o=function(e){const t=[];return e.replace(Ot,((e,n,r)=>(t.push(r),e))),t.filter((e=>!Ht(e)))}(r);return o.reduce(((e,r)=>e.then((e=>async function(e,t,n,r,o){try{const s=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),t&&(r.href=t),o.href=e,o.href}(t,n):t,l=Lt(t);let a;return a=o?_t(await o(s),l):await Rt(s,l,r),e.replace(function(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}(t),`$1${a}$3`)}catch(e){}return e}(e,r,t,n)))),Promise.resolve(r))}async function Vt(e,t){e instanceof Element&&(await async function(e,t){var n;const r=null===(n=e.style)||void 0===n?void 0:n.getPropertyValue("background");if(r){const n=await It(r,null,t);e.style.setProperty("background",n,e.style.getPropertyPriority("background"))}}(e,t),await async function(e,t){if((!(e instanceof HTMLImageElement)||Ht(e.src))&&(!(e instanceof SVGImageElement)||Ht(e.href.baseVal)))return;const n=e instanceof HTMLImageElement?e.src:e.href.baseVal,r=await Rt(n,Lt(n),t);await new Promise(((t,n)=>{e.onload=t,e.onerror=n;const o=e;o.decode&&(o.decode=t),e instanceof HTMLImageElement?(e.srcset="",e.src=r):e.href.baseVal=r}))}(e,t),await async function(e,t){const n=kt(e.childNodes).map((e=>Vt(e,t)));await Promise.all(n).then((()=>e))}(e,t))}const qt={};async function Jt(e){let t=qt[e];if(null!=t)return t;const n=await fetch(e);return t={url:e,cssText:await n.text()},qt[e]=t,t}async function Wt(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,o=(n.match(/url\([^)]+\)/g)||[]).map((async o=>{let s=o.replace(r,"$1");return s.startsWith("https://")||(s=new URL(s,e.url).href),Pt(s,t.fetchRequestInit,(({result:e})=>(n=n.replace(o,`url(${e})`),[o,e])))}));return Promise.all(o).then((()=>n))}function Xt(e){if(null==e)return[];const t=[];let n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=r.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(r,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=o.exec(n);if(null===e){if(e=s.exec(n),null===e)break;o.lastIndex=s.lastIndex}else s.lastIndex=o.lastIndex;t.push(e[0])}return t}async function Gt(e,t){const n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await async function(e,t){const n=await async function(e,t){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=kt(e.ownerDocument.styleSheets),r=await async function(e,t){const n=[],r=[];return e.forEach((n=>{if("cssRules"in n)try{kt(n.cssRules||[]).forEach(((e,o)=>{if(e.type===CSSRule.IMPORT_RULE){let s=o+1;const l=Jt(e.href).then((e=>Wt(e,t))).then((e=>Xt(e).forEach((e=>{try{n.insertRule(e,e.startsWith("@import")?s+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})))).catch((e=>{console.error("Error loading remote css",e.toString())}));r.push(l)}}))}catch(o){const s=e.find((e=>null==e.href))||document.styleSheets[0];null!=n.href&&r.push(Jt(n.href).then((e=>Wt(e,t))).then((e=>Xt(e).forEach((e=>{s.insertRule(e,n.cssRules.length)})))).catch((e=>{console.error("Error loading remote stylesheet",e.toString())}))),console.error("Error inlining remote css file",o.toString())}})),Promise.all(r).then((()=>(e.forEach((e=>{if("cssRules"in e)try{kt(e.cssRules||[]).forEach((e=>{n.push(e)}))}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t.toString())}})),n)))}(n,t);return function(e){return e.filter((e=>e.type===CSSRule.FONT_FACE_RULE)).filter((e=>Bt(e.style.getPropertyValue("src"))))}(r)}(e,t);return(await Promise.all(n.map((e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return It(e.cssText,n,t)})))).join("\n")}(e,t);if(n){const t=document.createElement("style"),r=document.createTextNode(n);t.appendChild(r),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function Zt(e,t={}){const{width:n,height:r}=St(e,t),o=await Dt(e,t,!0);return await Gt(o,t),await Vt(o,t),function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;null!=r&&Object.keys(r).forEach((e=>{n[e]=r[e]}))}(o,t),await async function(e,t,n){const r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return o.setAttribute("width",`${t}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),o.appendChild(s),s.appendChild(e),async function(e){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(e))).then(encodeURIComponent).then((e=>`data:image/svg+xml;charset=utf-8,${e}`))}(o)}(o,n,r)}async function Yt(e,t={}){const n=await async function(e,t={}){const{width:n,height:r}=St(e,t),o=await Zt(e,t),s=await Ct(o),l=document.createElement("canvas"),a=l.getContext("2d"),i=t.pixelRatio||function(){let e,t;try{t=process}catch(e){}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),c=t.canvasWidth||n,d=t.canvasHeight||r;return l.width=c*i,l.height=d*i,t.skipAutoScale||function(e){(e.width>zt||e.height>zt)&&(e.width>zt&&e.height>zt?e.width>e.height?(e.height*=zt/e.width,e.width=zt):(e.width*=zt/e.height,e.height=zt):e.width>zt?(e.height*=zt/e.width,e.width=zt):(e.width*=zt/e.height,e.height=zt))}(l),l.style.width=`${c}`,l.style.height=`${d}`,t.backgroundColor&&(a.fillStyle=t.backgroundColor,a.fillRect(0,0,l.width,l.height)),a.drawImage(s,0,0,l.width,l.height),l}(e,t),r=await function(e,t={}){return e.toBlob?new Promise((n=>{e.toBlob(n,t.type?t.type:"image/png",t.quality?t.quality:1)})):new Promise((n=>{const r=window.atob(e.toDataURL(t.type?t.type:void 0,t.quality?t.quality:void 0).split(",")[1]),o=r.length,s=new Uint8Array(o);for(let e=0;e<o;e+=1)s[e]=r.charCodeAt(e);n(new Blob([s],{type:t.type?t.type:"image/png"}))}))}(n);return r}const Qt="chunithm_b40.png";async function Kt(){const e=document.querySelector("main");let t=e?.cloneNode(!0);e?.parentElement?.appendChild(t),t.style.margin="initial",t.querySelectorAll("tr:nth-child(n+41)").forEach((e=>e.remove())),Yt(t,{backgroundColor:window.getComputedStyle(document.body).backgroundColor}).then((async e=>{if(t.remove(),null==e)return alert("[chuni-intl-viewer] Something went wrong when converting your scores to PNG. Please ask the author to fix it.");if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const t=new File([e],Qt,{type:e.type});navigator?.canShare({files:[t]})&&navigator.share({files:[t]}).catch(console.log)}else{const t=document.createElement("a");t.href=window.URL.createObjectURL(e),t.download=Qt,t.click()}}))}function en(e){x(e,"svelte-15uv7xu",".wrapper.svelte-15uv7xu{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:1rem;position:fixed;right:1rem;top:0.6rem}button.svelte-15uv7xu{width:2.5rem;height:2.5rem;background:var(--theme-border);border-radius:40%;color:white}")}function tn(t){let n,r,o,l,a,i,c,d=Je.accepts.indexOf("jp")>-1,u=d&&function(e){let t,n,r,o,s="jp"==e[0]?"JP":"IN";return{c(){t=T("button"),n=M(s),H(t,"class","btn svelte-15uv7xu"),R(t,"font-weight","bold")},m(s,l){S(s,t,l),w(t,n),r||(o=L(t,"click",e[1]),r=!0)},p(e,t){1&t&&s!==(s="jp"==e[0]?"JP":"IN")&&P(n,s)},d(e){e&&z(t),r=!1,o()}}}(t);return{c(){n=T("div"),r=T("button"),r.innerHTML='<svg width="18" height="18"><path d="M7 2H11V8H15L9 14 3 8H7V2ZM3 14H15V16H3V14Z" fill="white"></path></svg>',o=E(),u&&u.c(),l=E(),a=T("button"),a.innerHTML='<svg width="18" height="18"><path d="M2 4H16V6H2V4ZM2 8H16V10H2V8ZM2 12H16V14H2V12Z" fill="white"></path></svg>',H(r,"class","svelte-15uv7xu"),H(a,"class","svelte-15uv7xu"),H(n,"class","wrapper svelte-15uv7xu")},m(e,t){S(e,n,t),w(n,r),w(n,o),u&&u.m(n,null),w(n,l),w(n,a),i||(c=[L(r,"click",Kt),L(a,"click",at.toggle)],i=!0)},p(e,[t]){d&&u.p(e,t)},i:e,o:e,d(e){e&&z(n),u&&u.d(),i=!1,s(c)}}}function nn(e,t,n){let r;return u(e,Je,(e=>n(0,r=e))),[r,()=>{h(Je,r="jp"==r?"intl":"jp",r)}]}const rn=class extends $e{constructor(e){super(),xe(this,e,nn,tn,a,{},en)}};function on(e){const t=e-1;return t*t*t+1}function sn(e,{delay:n=0,duration:r=400,easing:o=t}={}){const s=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:o,css:e=>"opacity: "+e*s}}function ln(e,{delay:t=0,duration:n=400,easing:r=on,x:o=0,y:s=0,opacity:l=0}={}){const a=getComputedStyle(e),i=+a.opacity,c="none"===a.transform?"":a.transform,d=i*(1-l);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*o}px, ${(1-e)*s}px);\n\t\t\topacity: ${i-d*t}`}}function an(e){x(e,"svelte-1djkxdr","label.svelte-1djkxdr{display:flex;flex-direction:column;padding:0.5rem;gap:0.5rem}select.svelte-1djkxdr{width:100%;height:3rem;padding-left:1rem;padding-right:2.5rem;font-size:1rem;font-weight:bold;background:var(--theme-bg-main);border:var(--theme-border) 2px solid;border-radius:1rem;color:inherit;cursor:pointer;appearance:none;background-image:linear-gradient(45deg, transparent 50%, currentColor 0), linear-gradient(135deg, currentColor 50%, transparent 0);background-position:calc(100% - 20px) calc(1px + 50%), calc(100% - 16.02px) calc(1px + 50%);background-size:4px 4px, 4px 4px;background-repeat:no-repeat}")}function cn(e){let t,n,r,o,s,l,a;const i=e[3].default,c=function(e,t,n,r){if(e){const r=f(e,t,n,null);return e[0](r)}}(i,e,e[2]);return{c(){t=T("label"),n=T("span"),r=E(),o=T("select"),c&&c.c(),H(o,"class","svelte-1djkxdr"),void 0===e[0]&&K((()=>e[4].call(o))),H(t,"class","svelte-1djkxdr")},m(i,d){S(i,t,d),w(t,n),n.innerHTML=e[1],w(t,r),w(t,o),c&&c.m(o,null),D(o,e[0]),s=!0,l||(a=L(o,"change",e[4]),l=!0)},p(e,[t]){(!s||2&t)&&(n.innerHTML=e[1]),c&&c.p&&(!s||4&t)&&function(e,t,n,r,o,s){if(o){const l=f(t,n,r,s);e.p(l,o)}}(c,i,e,e[2],s?function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(i,e[2],t,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[2]),null),1&t&&D(o,e[0])},i(e){s||(ue(c,e),s=!0)},o(e){fe(c,e),s=!1},d(e){e&&z(t),c&&c.d(e),l=!1,a()}}}function dn(e,t,n){let{$$slots:r={},$$scope:o}=t,{value:s}=t,{label:l}=t;return e.$$set=e=>{"value"in e&&n(0,s=e.value),"label"in e&&n(1,l=e.label),"$$scope"in e&&n(2,o=e.$$scope)},[s,l,o,r,function(){s=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(0,s)}]}const un=class extends $e{constructor(e){super(),xe(this,e,dn,cn,a,{value:0,label:1},an)}};function fn(e){x(e,"svelte-1of5s55",'label.svelte-1of5s55.svelte-1of5s55{display:flex;flex-direction:column;padding:0.5rem;gap:0.2rem}.wrapper.svelte-1of5s55.svelte-1of5s55{position:relative;width:4.5rem;height:2rem;display:inline-block}input.svelte-1of5s55.svelte-1of5s55{width:0;height:0;opacity:0}input:checked+.wrapper.svelte-1of5s55 .slider.svelte-1of5s55{background-color:var(--theme-bg-control)}input:checked+.wrapper.svelte-1of5s55 .slider.svelte-1of5s55:before{transform:translateX(2.5rem)}input:checked+.wrapper.svelte-1of5s55 .slider.svelte-1of5s55:after{content:"ON";left:0.6rem;right:initial}.slider.svelte-1of5s55.svelte-1of5s55{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--theme-bg-sub);transition:0.2s;border-radius:0.8rem}.slider.svelte-1of5s55.svelte-1of5s55:after{color:var(--theme-text-control);position:absolute;content:"OFF";display:flex;align-items:center;height:100%;right:0.6rem;font-weight:bold}.slider.svelte-1of5s55.svelte-1of5s55:before{position:absolute;content:"";height:1.6rem;width:1.6rem;left:0.2rem;bottom:0.2rem;background-color:var(--theme-text-control);transition:0.2s;border-radius:40%}')}function hn(t){let n,r,o,s,l,a,i,c;return{c(){n=T("label"),r=T("span"),o=E(),s=T("input"),l=E(),a=T("div"),a.innerHTML='<span class="slider svelte-1of5s55"></span>',H(s,"type","checkbox"),H(s,"class","svelte-1of5s55"),H(a,"class","wrapper svelte-1of5s55"),H(n,"class","svelte-1of5s55")},m(e,d){S(e,n,d),w(n,r),r.innerHTML=t[1],w(n,o),w(n,s),s.checked=t[0],w(n,l),w(n,a),i||(c=L(s,"change",t[2]),i=!0)},p(e,[t]){2&t&&(r.innerHTML=e[1]),1&t&&(s.checked=e[0])},i:e,o:e,d(e){e&&z(n),i=!1,c()}}}function pn(e,t,n){let{checked:r=!1}=t,{label:o}=t;return e.$$set=e=>{"checked"in e&&n(0,r=e.checked),"label"in e&&n(1,o=e.label)},[r,o,function(){r=this.checked,n(0,r)}]}const gn=class extends $e{constructor(e){super(),xe(this,e,pn,hn,a,{checked:0,label:1},fn)}};function mn(e){x(e,"svelte-gdgxns",".wrapper.svelte-gdgxns.svelte-gdgxns{display:flex;flex-direction:column;padding:0.5rem;gap:0.5rem}.indicators.svelte-gdgxns.svelte-gdgxns{height:0.8rem;position:relative}.indicators.svelte-gdgxns div.svelte-gdgxns{background-color:var(--theme-bg-sub);height:1.6rem;width:1.6rem;border-radius:40%;display:flex;justify-content:center;align-items:center;position:absolute;border:var(--theme-border) 0.2rem solid}.indicators.svelte-gdgxns div.low.svelte-gdgxns{border-bottom-right-radius:0;transform:translateX(-0.4rem)}.indicators.svelte-gdgxns div.high.svelte-gdgxns{border-bottom-left-radius:0;transform:translateX(1.6rem)}.slider.svelte-gdgxns.svelte-gdgxns{display:flex;flex-direction:column;justify-content:center;width:100%;height:3.5rem;position:relative}.slider-bg.svelte-gdgxns.svelte-gdgxns{height:0.4rem;width:calc(100% - 2.6rem);margin-left:1.4rem;background-color:var(--theme-border);position:absolute;border-radius:0.2rem}input[type=number].svelte-gdgxns.svelte-gdgxns{background-color:transparent;border:none;color:inherit;font-family:inherit;max-width:150%;text-align:center;-moz-appearance:textfield}input.svelte-gdgxns.svelte-gdgxns::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=range].svelte-gdgxns.svelte-gdgxns{-webkit-appearance:none;appearance:none;height:0;width:calc(100% - 1.5rem);position:absolute;border-radius:0.2rem;pointer-events:none}input[type=range].low.svelte-gdgxns.svelte-gdgxns::-webkit-slider-thumb{border-radius:50% 0 0 50%}input[type=range].low.svelte-gdgxns.svelte-gdgxns::-moz-range-thumb{border-radius:50% 0 0 50%}input[type=range].high.svelte-gdgxns.svelte-gdgxns{margin-left:1.6rem}input[type=range].svelte-gdgxns.svelte-gdgxns::-webkit-slider-thumb{z-index:1;-webkit-appearance:none;pointer-events:all;width:1.5rem;height:2rem;background-color:var(--theme-text-dim);border-radius:0 50% 50% 0;cursor:pointer;transition:0.2s}input[type=range].svelte-gdgxns.svelte-gdgxns::-moz-range-thumb{z-index:1;-webkit-appearance:none;pointer-events:all;width:1.5rem;height:2rem;background-color:var(--theme-text-dim);border-radius:0 50% 50% 0;cursor:pointer;transition:0.2s}input[type=range].svelte-gdgxns.svelte-gdgxns::-webkit-slider-thumb:hover{background-color:var(--theme-text)}input[type=range].svelte-gdgxns.svelte-gdgxns::-webkit-slider-thumb:active{box-shadow:0 0 0.5rem var(--theme-text-dim);-webkit-box-shadow:0 0 0.5rem var(--theme-text-dim)}")}function vn(t){let n,r,o,l,a,i,c,d,u,f,h,p,g,m,v,b,y,x;return{c(){n=T("div"),r=T("span"),o=E(),l=T("div"),a=T("div"),i=T("input"),c=E(),d=T("div"),u=T("input"),f=E(),h=T("div"),p=T("div"),g=E(),m=T("input"),v=E(),b=T("input"),i.value=t[6],H(i,"type","number"),H(i,"min",t[3]),H(i,"max",t[4]),H(i,"step",t[5]),H(i,"inputmode","decimal"),H(i,"class","svelte-gdgxns"),H(a,"class","low svelte-gdgxns"),R(a,"left","calc((100% - 3rem) * "+t[9]+" / 100)"),u.value=t[7],H(u,"type","number"),H(u,"min",t[3]),H(u,"max",t[4]),H(u,"step",t[5]),H(u,"inputmode","decimal"),H(u,"class","svelte-gdgxns"),H(d,"class","high svelte-gdgxns"),R(d,"left","calc((100% - 3rem) * "+t[8]+" / 100)"),H(l,"class","indicators svelte-gdgxns"),H(p,"class","slider-bg svelte-gdgxns"),R(p,"background","linear-gradient( to right, var(--theme-border) 0%, var(--theme-border) "+(t[9]-1)+"%, var(--theme-bg-control) "+(t[9]-1)+"%, var(--theme-bg-control) "+(t[8]+1)+"%, var(--theme-border) "+(t[8]+1)+"%, var(--theme-border) 100% )"),H(m,"class","low svelte-gdgxns"),H(m,"type","range"),H(m,"min",t[3]),H(m,"max",t[4]),H(m,"step",t[5]),H(b,"class","high svelte-gdgxns"),H(b,"type","range"),H(b,"min",t[3]),H(b,"max",t[4]),H(b,"step",t[5]),H(h,"class","slider svelte-gdgxns"),H(n,"class","wrapper svelte-gdgxns")},m(e,s){S(e,n,s),w(n,r),r.innerHTML=t[2],w(n,o),w(n,l),w(l,a),w(a,i),w(l,c),w(l,d),w(d,u),w(n,f),w(n,h),w(h,p),w(h,g),w(h,m),N(m,t[6]),w(h,v),w(h,b),N(b,t[7]),y||(x=[L(i,"change",t[10]),L(u,"change",t[11]),L(m,"change",t[12]),L(m,"input",t[12]),L(m,"change",t[13]),L(m,"input",t[14]),L(b,"change",t[15]),L(b,"input",t[15]),L(b,"change",t[16]),L(b,"input",t[17])],y=!0)},p(e,[t]){4&t&&(r.innerHTML=e[2]),64&t&&i.value!==e[6]&&(i.value=e[6]),8&t&&H(i,"min",e[3]),16&t&&H(i,"max",e[4]),32&t&&H(i,"step",e[5]),512&t&&R(a,"left","calc((100% - 3rem) * "+e[9]+" / 100)"),128&t&&u.value!==e[7]&&(u.value=e[7]),8&t&&H(u,"min",e[3]),16&t&&H(u,"max",e[4]),32&t&&H(u,"step",e[5]),256&t&&R(d,"left","calc((100% - 3rem) * "+e[8]+" / 100)"),768&t&&R(p,"background","linear-gradient( to right, var(--theme-border) 0%, var(--theme-border) "+(e[9]-1)+"%, var(--theme-bg-control) "+(e[9]-1)+"%, var(--theme-bg-control) "+(e[8]+1)+"%, var(--theme-border) "+(e[8]+1)+"%, var(--theme-border) 100% )"),8&t&&H(m,"min",e[3]),16&t&&H(m,"max",e[4]),32&t&&H(m,"step",e[5]),64&t&&N(m,e[6]),8&t&&H(b,"min",e[3]),16&t&&H(b,"max",e[4]),32&t&&H(b,"step",e[5]),128&t&&N(b,e[7])},i:e,o:e,d(e){e&&z(n),y=!1,s(x)}}}function bn(e,t,n){let r,o,{label:s}=t,{min:l}=t,{max:a}=t,{step:i}=t,{low:c}=t,{high:d}=t,u=a-l,f=c,h=d;return e.$$set=e=>{"label"in e&&n(2,s=e.label),"min"in e&&n(3,l=e.min),"max"in e&&n(4,a=e.max),"step"in e&&n(5,i=e.step),"low"in e&&n(0,c=e.low),"high"in e&&n(1,d=e.high)},e.$$.update=()=>{72&e.$$.dirty&&n(9,r=(f-l)/u*100),136&e.$$.dirty&&n(8,o=(h-l)/u*100)},[c,d,s,l,a,i,f,h,o,r,e=>{n(6,f=parseFloat(e.currentTarget.value)||f),n(6,f=Math.min(a,Math.max(l,f))),f>h&&n(7,h=f),e.currentTarget.value=f.toString(),n(0,c=f),n(1,d=h)},e=>{n(7,h=parseFloat(e.currentTarget.value)||h),n(7,h=Math.min(a,Math.max(l,h))),h<f&&n(6,f=h),e.currentTarget.value=h.toString(),n(0,c=f),n(1,d=h)},function(){f=_(this.value),n(6,f)},()=>{n(0,c=f),n(1,d=h)},()=>{f>h&&n(7,h=f)},function(){h=_(this.value),n(7,h)},()=>{n(0,c=f),n(1,d=h)},()=>{h<f&&n(6,f=h)}]}const yn=class extends $e{constructor(e){super(),xe(this,e,bn,vn,a,{label:2,min:3,max:4,step:5,low:0,high:1},mn)}};function wn(e){x(e,"svelte-1ez9dj",".wrapper.svelte-1ez9dj.svelte-1ez9dj{display:flex;flex-direction:column;padding:0.5rem;gap:1rem}.btns.svelte-1ez9dj.svelte-1ez9dj{display:flex;flex-direction:row;gap:0.5rem;user-select:none}label.svelte-1ez9dj.svelte-1ez9dj{flex-grow:1;display:flex}input.svelte-1ez9dj.svelte-1ez9dj{width:0;height:0;opacity:0}input.svelte-1ez9dj:not(:checked)+.btn.svelte-1ez9dj{filter:brightness(0.5)}input.svelte-1ez9dj:not(:checked)+.btn.svelte-1ez9dj:hover{filter:brightness(0.8)}.btn.svelte-1ez9dj.svelte-1ez9dj{width:100%;padding:0.5rem;border-radius:0.5rem;background-color:var(--theme-bg-sub);text-align:center;font-weight:bold;cursor:pointer;transition:0.2s;color:var(--theme-text-control);border:4px solid var(--theme-bg-control)}.btn[data-diff=ULT].svelte-1ez9dj.svelte-1ez9dj{color:var(--theme-song-ult)}.btn[data-diff=MAS].svelte-1ez9dj.svelte-1ez9dj{color:var(--theme-song-mas)}.btn[data-diff=EXP].svelte-1ez9dj.svelte-1ez9dj{color:var(--theme-song-exp)}.btn[data-diff=ADV].svelte-1ez9dj.svelte-1ez9dj{color:var(--theme-song-adv)}.btn[data-diff=BAS].svelte-1ez9dj.svelte-1ez9dj{color:var(--theme-song-bas)}")}function xn(e,t,n){const r=e.slice();return r[3]=t[n],r[4]=t,r[5]=n,r}function $n(e){let t,n=e[0]("settings.filter.diff.warn")+"";return{c(){t=T("span"),R(t,"color","var(--theme-text-dim)")},m(e,r){S(e,t,r),t.innerHTML=n},p(e,r){1&r&&n!==(n=e[0]("settings.filter.diff.warn")+"")&&(t.innerHTML=n)},d(e){e&&z(t)}}}function kn(e){let t,n,r,o,s,l,a,i,c,d,u=e[3]+"";function f(){e[2].call(n,e[3])}return{c(){t=T("label"),n=T("input"),o=E(),s=T("div"),l=M(u),i=E(),H(n,"type","checkbox"),n.__value=r=e[3].toLowerCase(),n.value=n.__value,H(n,"class","svelte-1ez9dj"),H(s,"class","btn svelte-1ez9dj"),H(s,"data-diff",a=e[3]),H(t,"class","svelte-1ez9dj")},m(r,a){S(r,t,a),w(t,n),n.checked=e[1][e[3]],w(t,o),w(t,s),w(s,l),w(t,i),c||(d=L(n,"change",f),c=!0)},p(t,r){e=t,2&r&&(n.checked=e[1][e[3]])},d(e){e&&z(t),c=!1,d()}}}function jn(t){let n,r,o,s,l,a,i,c,d=t[0]("settings.filter.diff")+"",u=Object.values(t[1]).every(Sn),f=t[0]("settings.filter.diff.notify")+"",h=u&&$n(t),p=Me,g=[];for(let e=0;e<p.length;e+=1)g[e]=kn(xn(t,p,e));return{c(){n=T("div"),r=T("span"),o=new F(!1),s=E(),h&&h.c(),l=E(),a=T("div");for(let e=0;e<g.length;e+=1)g[e].c();i=E(),c=T("span"),o.a=s,H(a,"class","btns svelte-1ez9dj"),R(c,"color","var(--theme-text-dim)"),H(n,"class","wrapper svelte-1ez9dj")},m(e,t){S(e,n,t),w(n,r),o.m(d,r),w(r,s),h&&h.m(r,null),w(n,l),w(n,a);for(let e=0;e<g.length;e+=1)g[e].m(a,null);w(n,i),w(n,c),c.innerHTML=f},p(e,[t]){if(1&t&&d!==(d=e[0]("settings.filter.diff")+"")&&o.p(d),2&t&&(u=Object.values(e[1]).every(Sn)),u?h?h.p(e,t):(h=$n(e),h.c(),h.m(r,null)):h&&(h.d(1),h=null),2&t){let n;for(p=Me,n=0;n<p.length;n+=1){const r=xn(e,p,n);g[n]?g[n].p(r,t):(g[n]=kn(r),g[n].c(),g[n].m(a,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=p.length}1&t&&f!==(f=e[0]("settings.filter.diff.notify")+"")&&(c.innerHTML=f)},i:e,o:e,d(e){e&&z(n),h&&h.d(),C(g,e)}}}const Sn=e=>0==e;function zn(e,t,n){let r,o;return u(e,Ke,(e=>n(0,r=e))),u(e,Ie,(e=>n(1,o=e))),[r,o,function(e){o[e]=this.checked,Ie.set(o)}]}const Cn=class extends $e{constructor(e){super(),xe(this,e,zn,jn,a,{},wn)}};function Tn(e){x(e,"svelte-1dm6fln",'.wrapper.svelte-1dm6fln.svelte-1dm6fln{display:flex;flex-direction:column;padding:0.5rem;gap:1rem}.btns.svelte-1dm6fln.svelte-1dm6fln{display:grid;grid-template-areas:"... ... ...";gap:0.5rem;flex-wrap:wrap}label.svelte-1dm6fln.svelte-1dm6fln{display:flex}input.svelte-1dm6fln.svelte-1dm6fln{width:0;height:0;opacity:0}input.svelte-1dm6fln:not(:checked)+.btn.svelte-1dm6fln{filter:brightness(0.5)}input.svelte-1dm6fln:not(:checked)+.btn.svelte-1dm6fln:hover{filter:brightness(0.8)}.btn.svelte-1dm6fln.svelte-1dm6fln{width:100%;padding:0.5rem;border-radius:0.5rem;background-color:var(--theme-bg-sub);text-align:center;font-weight:bold;cursor:pointer;user-select:none;transition:0.2s;color:var(--theme-text-control);border:4px solid var(--theme-bg-control)}.btn-all.svelte-1dm6fln.svelte-1dm6fln{grid-column:2/4}.btn-all.svelte-1dm6fln .btn.svelte-1dm6fln{border-color:var(--theme-bg-altr)}')}function Mn(e,t,n){const r=e.slice();return r[7]=t[n],r[8]=t,r[9]=n,r}function En(e){let t,n,r,o,l,a,i,c,d=e[7]+"";function u(){e[3].call(n,e[7])}return{c(){t=T("label"),n=T("input"),o=E(),l=T("div"),a=M(d),H(n,"type","checkbox"),n.__value=r=e[7],n.value=n.__value,H(n,"class","svelte-1dm6fln"),H(l,"class","btn svelte-1dm6fln"),H(t,"class","svelte-1dm6fln")},m(r,s){S(r,t,s),w(t,n),n.checked=e[1][e[7]],w(t,o),w(t,l),w(l,a),i||(c=[L(n,"change",u),L(n,"change",e[4])],i=!0)},p(t,r){e=t,2&r&&(n.checked=e[1][e[7]])},d(e){e&&z(t),i=!1,s(c)}}}function An(t){let n,r,o,l,a,i,c,d,u,f,h,p,g=t[2]("settings.filter.genre")+"",m=t[2]("settings.filter.genre.all")+"",v=Ae,b=[];for(let e=0;e<v.length;e+=1)b[e]=En(Mn(t,v,e));return{c(){n=T("div"),r=T("span"),o=E(),l=T("div");for(let e=0;e<b.length;e+=1)b[e].c();a=E(),i=T("label"),c=T("input"),d=E(),u=T("div"),f=M(m),H(c,"type","checkbox"),c.__value="ALL",c.value=c.__value,H(c,"class","svelte-1dm6fln"),H(u,"class","btn svelte-1dm6fln"),H(i,"class","btn-all svelte-1dm6fln"),H(l,"class","btns svelte-1dm6fln"),H(n,"class","wrapper svelte-1dm6fln")},m(e,s){S(e,n,s),w(n,r),r.innerHTML=g,w(n,o),w(n,l);for(let e=0;e<b.length;e+=1)b[e].m(l,null);w(l,a),w(l,i),w(i,c),c.checked=t[0],w(i,d),w(i,u),w(u,f),h||(p=[L(c,"change",t[5]),L(c,"change",t[6])],h=!0)},p(e,[t]){if(4&t&&g!==(g=e[2]("settings.filter.genre")+"")&&(r.innerHTML=g),3&t){let n;for(v=Ae,n=0;n<v.length;n+=1){const r=Mn(e,v,n);b[n]?b[n].p(r,t):(b[n]=En(r),b[n].c(),b[n].m(l,a))}for(;n<b.length;n+=1)b[n].d(1);b.length=v.length}1&t&&(c.checked=e[0]),4&t&&m!==(m=e[2]("settings.filter.genre.all")+"")&&P(f,m)},i:e,o:e,d(e){e&&z(n),C(b,e),h=!1,s(p)}}}function Ln(e,t,n){let r,o;u(e,qe,(e=>n(1,r=e))),u(e,Ke,(e=>n(2,o=e)));let s=Ae.every((e=>r[e]));return[s,r,o,function(e){r[e]=this.checked,qe.set(r)},()=>{n(0,s=Ae.every((e=>r[e])))},function(){s=this.checked,n(0,s)},e=>{for(let t of Ae)h(qe,r[t]=e.currentTarget.checked,r)}]}const Hn=class extends $e{constructor(e){super(),xe(this,e,Ln,An,a,{},Tn)}};function _n(e){x(e,"svelte-8bg6j",".wrapper.svelte-8bg6j{padding:0.5rem;display:flex;gap:0.5rem;align-items:center}input[type=number].svelte-8bg6j{background-color:var(--theme-bg-sub);color:var(--theme-text);border:none;border-radius:0.2rem;width:4rem;padding:0.5rem;-moz-appearance:textfield;flex-grow:1}input[type=number].svelte-8bg6j::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.btn.svelte-8bg6j{width:fit-content;padding:0.5rem 1.5rem;border-radius:0.8rem;font-weight:bold;cursor:pointer;user-select:none;opacity:0.9;transition:0.2s;background-color:var(--theme-bg-control)}.btn.svelte-8bg6j:hover{opacity:1}.btn.disabled.svelte-8bg6j{background-color:var(--theme-border);cursor:no-drop}")}function Pn(t){let n,r,o,l,a,i,c,d;return{c(){n=T("div"),r=T("button"),r.textContent="Fetch",o=E(),l=T("input"),a=M("\r\n    ～\r\n    "),i=T("input"),H(r,"class","btn svelte-8bg6j"),O(r,"disabled",t[2]||Nn(t[0],t[1])),H(l,"type","number"),H(l,"min","1"),H(l,"placeholder","from"),H(l,"inputmode","numeric"),H(l,"class","svelte-8bg6j"),H(i,"type","number"),H(i,"min","1"),H(i,"placeholder","to"),H(i,"inputmode","numeric"),H(i,"class","svelte-8bg6j"),H(n,"class","wrapper svelte-8bg6j")},m(e,s){S(e,n,s),w(n,r),w(n,o),w(n,l),N(l,t[0]),w(n,a),w(n,i),N(i,t[1]),c||(d=[L(r,"click",t[4]),L(l,"input",t[5]),L(i,"input",t[6])],c=!0)},p(e,[t]){7&t&&O(r,"disabled",e[2]||Nn(e[0],e[1])),1&t&&_(l.value)!==e[0]&&N(l,e[0]),2&t&&_(i.value)!==e[1]&&N(i,e[1])},i:e,o:e,d(e){e&&z(n),c=!1,s(d)}}}function Nn(e,t){return isNaN(e)||isNaN(t)||null==e||null==t||t<e}function Rn(e,t,n){let r,o,s,l,a,i;u(e,ct,(e=>n(2,r=e))),u(e,Ke,(e=>n(7,o=e))),u(e,it,(e=>n(8,s=e))),u(e,dt,(e=>n(9,l=e))),u(e,vt,(e=>n(10,a=e))),u(e,at,(e=>n(11,i=e)));let c=1,d=40;async function f(e,t){if(!r&&!Nn(e,t)){h(dt,l=!0,l),h(ct,r=!0,r),h(at,i=!1,i);try{const n=a.slice(e-1,t).length;for(const[r,s]of a.slice(e-1,t).entries())it.set(o("playcount.fetch.progress",{progress:r,all:n})),null==s.playCount&&(s.playCount=await ot("songPlayCount",s.difficulty,s.idx),vt.set(a));h(ct,r=!1,r),h(dt,l=!1,l)}catch{h(dt,l=!1,l),h(it,s=o("playcount.fetch.error"),s),setTimeout((()=>{h(ct,r=!1,r)}),6e3)}}}return[c,d,r,f,()=>f(c,d),function(){c=_(this.value),n(0,c)},function(){d=_(this.value),n(1,d)}]}const Dn=class extends $e{constructor(e){super(),xe(this,e,Rn,Pn,a,{},_n)}};function On(e){x(e,"svelte-nunbcu",".wrapper.svelte-nunbcu{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;align-items:center}.modal-bg.svelte-nunbcu{position:fixed;background:rgba(0, 0, 0, 0.4);top:0;left:0;width:100%;height:100%}.modal.svelte-nunbcu{background:var(--theme-bg-main);width:70%;max-width:32rem;max-height:80%;overflow-y:auto;margin:auto;padding:2rem;position:relative;box-shadow:2rem 2rem 10px rgba(0, 0, 0, 0.5333333333);border-radius:1rem;text-align:left}.close-btn.svelte-nunbcu{position:absolute;top:0.5rem;right:0.5rem;width:2rem;height:2rem;background-color:var(--theme-border);color:var(--theme-text);border-radius:40%}.reset-btn.svelte-nunbcu{display:block;margin-left:auto;background-color:var(--theme-reset);width:fit-content;padding:0.5rem 1.5rem;border-radius:0.8rem;font-weight:bold;color:var(--theme-text)}h4.svelte-nunbcu{margin:0.5rem 0;color:var(--theme-text-dim)}hr.svelte-nunbcu{border:none;border-top:var(--theme-border) 0.1rem solid;margin:2rem auto}")}function Fn(e,t,n){const r=e.slice();return r[16]=t[n],r}function Un(e,t,n){const r=e.slice();return r[19]=t[n],r}function Bn(e,t,n){const r=e.slice();return r[22]=t[n],r}function In(e){let t,n,r,o=e[0]("settings.data.constData."+e[22])+"";return{c(){t=T("option"),n=M(o),t.__value=r=e[22],t.value=t.__value},m(e,r){S(e,t,r),w(t,n)},p(e,t){1&t&&o!==(o=e[0]("settings.data.constData."+e[22])+"")&&P(n,o)},d(e){e&&z(t)}}}function Vn(e){let t,n=Je.accepts,r=[];for(let t=0;t<n.length;t+=1)r[t]=In(Bn(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=A()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);S(e,t,n)},p(e,o){if(1&o){let s;for(n=Je.accepts,s=0;s<n.length;s+=1){const l=Bn(e,n,s);r[s]?r[s].p(l,o):(r[s]=In(l),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){C(r,e),e&&z(t)}}}function qn(e){let t,n;return t=new Dn({}),{c(){be(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){fe(t.$$.fragment,e),n=!1},d(e){we(t,e)}}}function Jn(t){let n,r,o,s=Ye.get(t[19])+"";return{c(){n=T("option"),r=M(s),n.__value=o=t[19],n.value=n.__value},m(e,t){S(e,n,t),w(n,r)},p:e,d(e){e&&z(n)}}}function Wn(e){let t,n=Oe.accepts,r=[];for(let t=0;t<n.length;t+=1)r[t]=Jn(Un(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=A()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);S(e,t,n)},p(e,o){if(0&o){let s;for(n=Oe.accepts,s=0;s<n.length;s+=1){const l=Un(e,n,s);r[s]?r[s].p(l,o):(r[s]=Jn(l),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){C(r,e),e&&z(t)}}}function Xn(t){let n,r,o,s=t[16].charAt(0).toUpperCase()+t[16].slice(1)+"";return{c(){n=T("option"),r=M(s),n.__value=o=t[16],n.value=n.__value},m(e,t){S(e,n,t),w(n,r)},p:e,d(e){e&&z(n)}}}function Gn(e){let t,n=Fe.accepts,r=[];for(let t=0;t<n.length;t+=1)r[t]=Xn(Fn(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=A()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);S(e,t,n)},p(e,o){if(0&o){let s;for(n=Fe.accepts,s=0;s<n.length;s+=1){const l=Fn(e,n,s);r[s]?r[s].p(l,o):(r[s]=Xn(l),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){C(r,e),e&&z(t)}}}function Zn(e){let t,n,r,o,l,a,i,c,d,u,f,h,p,g,m,v,b,y,x,$,k,j,C,M,A,_,P,N,D,O,F,U,B,I,V,q,J,W,G,Z,Y,Q,te,ne,re,oe,se,le,ae,ie=e[0]("settings.main.title")+"",he=e[0]("settings.filter.title")+"",ge=e[0]("settings.data.title")+"",me=e[0]("settings.ui.title")+"",xe=e[0]("settings.main.reset")+"";function $e(t){e[8](t)}function ke(t){e[9](t)}let je={label:e[0]("settings.filter.const"),max:15.4,min:1,step:.1};function Se(t){e[10](t)}void 0!==e[1]&&(je.high=e[1]),void 0!==e[2]&&(je.low=e[2]),f=new yn({props:je}),X.push((()=>ve(f,"high",$e))),X.push((()=>ve(f,"low",ke))),m=new Cn({}),b=new Hn({});let ze={label:e[0]("settings.data.constData"),$$slots:{default:[Vn]},$$scope:{ctx:e}};function Ce(t){e[11](t)}void 0!==e[3]&&(ze.value=e[3]),C=new un({props:ze}),X.push((()=>ve(C,"value",Se)));let Te={label:e[0]("settings.data.overpower")};function Me(t){e[12](t)}void 0!==e[4]&&(Te.checked=e[4]),_=new gn({props:Te}),X.push((()=>ve(_,"checked",Ce)));let Ee={label:e[0]("settings.data.playcount")};void 0!==e[5]&&(Ee.checked=e[5]),D=new gn({props:Ee}),X.push((()=>ve(D,"checked",Me)));let Ae=e[5]&&qn();function Le(t){e[13](t)}let He={label:e[0]("settings.ui.locale"),$$slots:{default:[Wn]},$$scope:{ctx:e}};function _e(t){e[14](t)}void 0!==e[6]&&(He.value=e[6]),J=new un({props:He}),X.push((()=>ve(J,"value",Le)));let Pe={label:e[0]("settings.ui.theme"),$$slots:{default:[Gn]},$$scope:{ctx:e}};return void 0!==e[7]&&(Pe.value=e[7]),Z=new un({props:Pe}),X.push((()=>ve(Z,"value",_e))),{c(){t=T("div"),n=T("div"),r=E(),o=T("div"),l=T("button"),l.textContent="✕",a=E(),i=T("h3"),c=E(),d=T("h4"),u=E(),be(f.$$.fragment),g=E(),be(m.$$.fragment),v=E(),be(b.$$.fragment),y=E(),x=T("hr"),$=E(),k=T("h4"),j=E(),be(C.$$.fragment),A=E(),be(_.$$.fragment),N=E(),be(D.$$.fragment),F=E(),Ae&&Ae.c(),U=E(),B=T("hr"),I=E(),V=T("h4"),q=E(),be(J.$$.fragment),G=E(),be(Z.$$.fragment),Q=E(),te=T("hr"),ne=E(),re=T("button"),H(n,"class","modal-bg svelte-nunbcu"),H(l,"class","close-btn svelte-nunbcu"),R(i,"margin","0"),H(d,"class","svelte-nunbcu"),H(x,"class","svelte-nunbcu"),H(k,"class","svelte-nunbcu"),H(B,"class","svelte-nunbcu"),H(V,"class","svelte-nunbcu"),H(te,"class","svelte-nunbcu"),H(re,"class","btn reset-btn svelte-nunbcu"),H(o,"class","modal svelte-nunbcu"),H(t,"class","wrapper svelte-nunbcu")},m(s,h){S(s,t,h),w(t,n),w(t,r),w(t,o),w(o,l),w(o,a),w(o,i),i.innerHTML=ie,w(o,c),w(o,d),d.innerHTML=he,w(o,u),ye(f,o,null),w(o,g),ye(m,o,null),w(o,v),ye(b,o,null),w(o,y),w(o,x),w(o,$),w(o,k),k.innerHTML=ge,w(o,j),ye(C,o,null),w(o,A),ye(_,o,null),w(o,N),ye(D,o,null),w(o,F),Ae&&Ae.m(o,null),w(o,U),w(o,B),w(o,I),w(o,V),V.innerHTML=me,w(o,q),ye(J,o,null),w(o,G),ye(Z,o,null),w(o,Q),w(o,te),w(o,ne),w(o,re),re.innerHTML=xe,se=!0,le||(ae=[L(n,"click",at.toggle),L(l,"click",at.toggle),L(re,"click",e[15])],le=!0)},p(e,[t]){(!se||1&t)&&ie!==(ie=e[0]("settings.main.title")+"")&&(i.innerHTML=ie),(!se||1&t)&&he!==(he=e[0]("settings.filter.title")+"")&&(d.innerHTML=he);const n={};1&t&&(n.label=e[0]("settings.filter.const")),!h&&2&t&&(h=!0,n.high=e[1],ee((()=>h=!1))),!p&&4&t&&(p=!0,n.low=e[2],ee((()=>p=!1))),f.$set(n),(!se||1&t)&&ge!==(ge=e[0]("settings.data.title")+"")&&(k.innerHTML=ge);const r={};1&t&&(r.label=e[0]("settings.data.constData")),33554433&t&&(r.$$scope={dirty:t,ctx:e}),!M&&8&t&&(M=!0,r.value=e[3],ee((()=>M=!1))),C.$set(r);const s={};1&t&&(s.label=e[0]("settings.data.overpower")),!P&&16&t&&(P=!0,s.checked=e[4],ee((()=>P=!1))),_.$set(s);const l={};1&t&&(l.label=e[0]("settings.data.playcount")),!O&&32&t&&(O=!0,l.checked=e[5],ee((()=>O=!1))),D.$set(l),e[5]?Ae?32&t&&ue(Ae,1):(Ae=qn(),Ae.c(),ue(Ae,1),Ae.m(o,U)):Ae&&(ce(),fe(Ae,1,1,(()=>{Ae=null})),de()),(!se||1&t)&&me!==(me=e[0]("settings.ui.title")+"")&&(V.innerHTML=me);const a={};1&t&&(a.label=e[0]("settings.ui.locale")),33554432&t&&(a.$$scope={dirty:t,ctx:e}),!W&&64&t&&(W=!0,a.value=e[6],ee((()=>W=!1))),J.$set(a);const c={};1&t&&(c.label=e[0]("settings.ui.theme")),33554432&t&&(c.$$scope={dirty:t,ctx:e}),!Y&&128&t&&(Y=!0,c.value=e[7],ee((()=>Y=!1))),Z.$set(c),(!se||1&t)&&xe!==(xe=e[0]("settings.main.reset")+"")&&(re.innerHTML=xe)},i(e){se||(ue(f.$$.fragment,e),ue(m.$$.fragment,e),ue(b.$$.fragment,e),ue(C.$$.fragment,e),ue(_.$$.fragment,e),ue(D.$$.fragment,e),ue(Ae),ue(J.$$.fragment,e),ue(Z.$$.fragment,e),K((()=>{oe||(oe=pe(t,sn,{duration:100},!0)),oe.run(1)})),se=!0)},o(e){fe(f.$$.fragment,e),fe(m.$$.fragment,e),fe(b.$$.fragment,e),fe(C.$$.fragment,e),fe(_.$$.fragment,e),fe(D.$$.fragment,e),fe(Ae),fe(J.$$.fragment,e),fe(Z.$$.fragment,e),oe||(oe=pe(t,sn,{duration:100},!1)),oe.run(0),se=!1},d(e){e&&z(t),we(f),we(m),we(b),we(C),we(_),we(D),Ae&&Ae.d(),we(J),we(Z),e&&oe&&oe.end(),le=!1,s(ae)}}}function Yn(e,t,n){let r,o,s,l,a,i,c,d;return u(e,Ke,(e=>n(0,r=e))),u(e,Be,(e=>n(1,o=e))),u(e,Ue,(e=>n(2,s=e))),u(e,Je,(e=>n(3,l=e))),u(e,We,(e=>n(4,a=e))),u(e,Xe,(e=>n(5,i=e))),u(e,Oe,(e=>n(6,c=e))),u(e,Fe,(e=>n(7,d=e))),[r,o,s,l,a,i,c,d,function(e){o=e,Be.set(o)},function(e){s=e,Ue.set(s)},function(e){l=e,Je.set(l)},function(e){a=e,We.set(a)},function(e){i=e,Xe.set(i)},function(e){c=e,Oe.set(c)},function(e){d=e,Fe.set(d)},()=>{localStorage.clear();for(const e of Ge)e.reset()}]}const Qn=class extends $e{constructor(e){super(),xe(this,e,Yn,Zn,a,{},On)}};function Kn(e){x(e,"svelte-edpgbm",".title.svelte-edpgbm{color:var(--theme-label);font-size:small;justify-self:end;white-space:nowrap}.content.svelte-edpgbm{justify-self:start}")}function er(t){let n,r,o,s,l;return{c(){n=T("span"),r=M(t[0]),o=E(),s=T("span"),l=M(t[1]),H(n,"class","title svelte-edpgbm"),H(s,"class","content svelte-edpgbm")},m(e,t){S(e,n,t),w(n,r),S(e,o,t),S(e,s,t),w(s,l)},p(e,[t]){1&t&&P(r,e[0]),2&t&&P(l,e[1])},i:e,o:e,d(e){e&&z(n),e&&z(o),e&&z(s)}}}function tr(e,t,n){let{title:r}=t,{content:o}=t;return e.$$set=e=>{"title"in e&&n(0,r=e.title),"content"in e&&n(1,o=e.content)},[r,o]}const nr=class extends $e{constructor(e){super(),xe(this,e,tr,er,a,{title:0,content:1},Kn)}};function rr(e){return(Math.floor(100*e)/100).toFixed(2)}function or(e){x(e,"svelte-xupwpe",'.wrapper.svelte-xupwpe.svelte-xupwpe{border:var(--theme-border) 3px solid;border-radius:0.5rem;background-color:var(--theme-bg-sub);width:fit-content;padding:0.5rem;margin:0.5rem;display:grid;align-items:center;width:calc(100% - 2rem - 6px)}.stats-name.svelte-xupwpe.svelte-xupwpe{grid-column:1;width:max-content;justify-self:center}.stats-rating.svelte-xupwpe.svelte-xupwpe{grid-column:2;justify-self:center;display:flex;flex-direction:column;gap:0.5rem}.stats-rating.svelte-xupwpe h2.svelte-xupwpe{margin:0;text-align:center}.stats-rating.svelte-xupwpe span.svelte-xupwpe{color:var(--theme-text-dim)}.stats-honor.svelte-xupwpe.svelte-xupwpe{grid-area:2/1/3/3;color:var(--theme-honor-normal);font-weight:bold;background:var(--theme-bg-main);border-radius:3px;padding:5px 2rem;margin:0 20px;text-align:center;white-space:nowrap}.stats-honor[data-honor=normal].svelte-xupwpe.svelte-xupwpe{color:var(--theme-honor-normal)}.stats-honor[data-honor=bronze].svelte-xupwpe.svelte-xupwpe{color:var(--theme-honor-bronze)}.stats-honor[data-honor=silver].svelte-xupwpe.svelte-xupwpe{color:var(--theme-honor-silver)}.stats-honor[data-honor=gold].svelte-xupwpe.svelte-xupwpe{color:var(--theme-honor-gold)}.stats-honor[data-honor=platina].svelte-xupwpe.svelte-xupwpe{color:var(--theme-honor-platina)}.stats-honor[data-honor=rainbow].svelte-xupwpe.svelte-xupwpe{color:var(--theme-honor-rainbow)}.overview-items.svelte-xupwpe.svelte-xupwpe{width:fit-content;display:grid;grid-template-areas:"... ...";grid-area:1/3/3/4;gap:5px;padding:5px}@media only screen and (max-width: 500px){.overview-items.svelte-xupwpe.svelte-xupwpe{grid-area:3/1/4/3;grid-template-areas:"... ... ... ...";justify-self:center;width:100%;justify-content:space-evenly}}')}function sr(e){let t,n,r,o,s,l;return t=new nr({props:{title:e[4]("player.recent.best10"),content:ze(e[1],10).toFixed(4)}}),r=new nr({props:{title:e[4]("player.recent.history10"),content:ze(e[0],10).toFixed(4)}}),s=new nr({props:{title:e[4]("player.recent.history30"),content:ze(e[0],30).toFixed(4)}}),{c(){be(t.$$.fragment),n=E(),be(r.$$.fragment),o=E(),be(s.$$.fragment)},m(e,a){ye(t,e,a),S(e,n,a),ye(r,e,a),S(e,o,a),ye(s,e,a),l=!0},p(e,n){const o={};16&n&&(o.title=e[4]("player.recent.best10")),2&n&&(o.content=ze(e[1],10).toFixed(4)),t.$set(o);const l={};16&n&&(l.title=e[4]("player.recent.history10")),1&n&&(l.content=ze(e[0],10).toFixed(4)),r.$set(l);const a={};16&n&&(a.title=e[4]("player.recent.history30")),1&n&&(a.content=ze(e[0],30).toFixed(4)),s.$set(a)},i(e){l||(ue(t.$$.fragment,e),ue(r.$$.fragment,e),ue(s.$$.fragment,e),l=!0)},o(e){fe(t.$$.fragment,e),fe(r.$$.fragment,e),fe(s.$$.fragment,e),l=!1},d(e){we(t,e),e&&z(n),we(r,e),e&&z(o),we(s,e)}}}function lr(e){let t,n,r,o,s,l;return t=new nr({props:{title:e[4]("player.best.best30"),content:ze(e[2],30).toFixed(4)}}),r=new nr({props:{title:e[4]("player.best.maxPossible"),content:rr(Ce(e[2]))}}),s=new nr({props:{title:e[4]("player.best.playCount"),content:e[3].playCount}}),{c(){be(t.$$.fragment),n=E(),be(r.$$.fragment),o=E(),be(s.$$.fragment)},m(e,a){ye(t,e,a),S(e,n,a),ye(r,e,a),S(e,o,a),ye(s,e,a),l=!0},p(e,n){const o={};16&n&&(o.title=e[4]("player.best.best30")),4&n&&(o.content=ze(e[2],30).toFixed(4)),t.$set(o);const l={};16&n&&(l.title=e[4]("player.best.maxPossible")),4&n&&(l.content=rr(Ce(e[2]))),r.$set(l);const a={};16&n&&(a.title=e[4]("player.best.playCount")),8&n&&(a.content=e[3].playCount),s.$set(a)},i(e){l||(ue(t.$$.fragment,e),ue(r.$$.fragment,e),ue(s.$$.fragment,e),l=!0)},o(e){fe(t.$$.fragment,e),fe(r.$$.fragment,e),fe(s.$$.fragment,e),l=!1},d(e){we(t,e),e&&z(n),we(r,e),e&&z(o),we(s,e)}}}function ar(e){let t,n,r,o,s,l,a,i,c,d,u,f,h,p,g,m,v,b,y,x,$,k,j=e[3].name+"",C=e[3].rating+"",A=e[3].ratingMax+"",L=e[3].honor.text+"";b=new nr({props:{title:e[4]("player.generic.generatedAt"),content:(new Date).toLocaleDateString()}});const _=[lr,sr],N=[];function R(e,t){return"best"===e[5]?0:"recent"===e[5]||"history"===e[5]?1:-1}return~(x=R(e))&&($=N[x]=_[x](e)),{c(){t=T("div"),n=T("h2"),r=M(j),o=E(),s=T("div"),l=T("h2"),a=M(C),i=E(),c=T("span"),d=M("MAX "),u=M(A),f=E(),h=T("div"),p=M(L),m=E(),v=T("div"),be(b.$$.fragment),y=E(),$&&$.c(),H(n,"class","stats-name svelte-xupwpe"),H(l,"class","svelte-xupwpe"),H(c,"class","svelte-xupwpe"),H(s,"class","stats-rating svelte-xupwpe"),H(h,"class","stats-honor svelte-xupwpe"),H(h,"data-honor",g=e[3].honor.color),H(v,"class","overview-items svelte-xupwpe"),H(t,"class","wrapper svelte-xupwpe")},m(e,g){S(e,t,g),w(t,n),w(n,r),w(t,o),w(t,s),w(s,l),w(l,a),w(s,i),w(s,c),w(c,d),w(c,u),w(t,f),w(t,h),w(h,p),w(t,m),w(t,v),ye(b,v,null),w(v,y),~x&&N[x].m(v,null),k=!0},p(e,[t]){(!k||8&t)&&j!==(j=e[3].name+"")&&P(r,j),(!k||8&t)&&C!==(C=e[3].rating+"")&&P(a,C),(!k||8&t)&&A!==(A=e[3].ratingMax+"")&&P(u,A),(!k||8&t)&&L!==(L=e[3].honor.text+"")&&P(p,L),(!k||8&t&&g!==(g=e[3].honor.color))&&H(h,"data-honor",g);const n={};16&t&&(n.title=e[4]("player.generic.generatedAt")),b.$set(n);let o=x;x=R(e),x===o?~x&&N[x].p(e,t):($&&(ce(),fe(N[o],1,1,(()=>{N[o]=null})),de()),~x?($=N[x],$?$.p(e,t):($=N[x]=_[x](e),$.c()),ue($,1),$.m(v,null)):$=null)},i(e){k||(ue(b.$$.fragment,e),ue($),k=!0)},o(e){fe(b.$$.fragment,e),fe($),k=!1},d(e){e&&z(t),we(b),~x&&N[x].d()}}}function ir(e,t,n){let r,o,s,l,a,i,c,d,f;return u(e,gt,(e=>n(6,l=e))),u(e,pt,(e=>n(7,a=e))),u(e,vt,(e=>n(8,i=e))),u(e,mt,(e=>n(3,c=e))),u(e,Ke,(e=>n(4,d=e))),u(e,lt,(e=>n(5,f=e))),e.$$.update=()=>{256&e.$$.dirty&&n(2,r=i.slice(0,30).map((e=>e.rating))),128&e.$$.dirty&&n(1,o=a.map((e=>e.rating))),64&e.$$.dirty&&n(0,s=l.map((e=>e.rating)))},[s,o,r,c,d,f,l,a,i]}const cr=class extends $e{constructor(e){super(),xe(this,e,ir,ar,a,{},or)}};function dr(e){x(e,"svelte-111fzjr",'td.svelte-111fzjr.svelte-111fzjr{padding:0.5rem;border-top:var(--theme-border) 1.5px solid;text-align:center}tbody tr.best30.svelte-111fzjr td.svelte-111fzjr:first-child{color:var(--theme-rank-b30)}tbody tr.best40.svelte-111fzjr td.svelte-111fzjr:first-child{font-weight:bold}tbody tr.svelte-111fzjr:not(.best40) td.svelte-111fzjr:first-child{color:var(--theme-text-dim)}tbody tr.svelte-111fzjr td.svelte-111fzjr:nth-child(2){font-weight:bold;text-align:left;max-width:300px}tbody tr.svelte-111fzjr td:nth-child(2)[data-diff=WE].svelte-111fzjr{color:var(--theme-song-we)}tbody tr.svelte-111fzjr td:nth-child(2)[data-diff=ULT].svelte-111fzjr{color:var(--theme-song-ult)}tbody tr.svelte-111fzjr td:nth-child(2)[data-diff=MAS].svelte-111fzjr{color:var(--theme-song-mas)}tbody tr.svelte-111fzjr td:nth-child(2)[data-diff=EXP].svelte-111fzjr{color:var(--theme-song-exp)}tbody tr.svelte-111fzjr td:nth-child(2)[data-diff=ADV].svelte-111fzjr{color:var(--theme-song-adv)}tbody tr.svelte-111fzjr td:nth-child(2)[data-diff=BAS].svelte-111fzjr{color:var(--theme-song-bas)}tbody tr.svelte-111fzjr td.svelte-111fzjr:nth-child(4){white-space:nowrap}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=MAX].svelte-111fzjr{color:var(--theme-clear_aj);text-shadow:0 0 10px var(--theme-clear_aj)}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank="SSS+"].svelte-111fzjr{color:#ffcc11}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=SSS].svelte-111fzjr{color:#ffd744}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank="SS+"].svelte-111fzjr{color:#ffe277}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=SS].svelte-111fzjr{color:#ffedaa}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank="S+"].svelte-111fzjr{color:#ffd744}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=S].svelte-111fzjr{color:#ffe277}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=AAA].svelte-111fzjr{color:#cceeff}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=AA].svelte-111fzjr{color:#a6e1ff}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=A].svelte-111fzjr{color:#80d5ff}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=BBB].svelte-111fzjr{color:#59c8ff}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=BB].svelte-111fzjr{color:#33bbff}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=B].svelte-111fzjr{color:#0daeff}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=MAX].svelte-111fzjr{font-weight:bold}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank="SSS+"].svelte-111fzjr{font-weight:bold}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=SSS].svelte-111fzjr{font-weight:bold}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank="SS+"].svelte-111fzjr{font-weight:bold}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=SS].svelte-111fzjr{font-weight:bold}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=C].svelte-111fzjr{color:#888}tbody tr.svelte-111fzjr td:nth-child(4)[data-rank=D].svelte-111fzjr{color:#666}tbody tr.svelte-111fzjr td[data-clear].svelte-111fzjr{font-weight:bold}tbody tr.svelte-111fzjr td[data-clear][data-clear=FC].svelte-111fzjr{color:var(--theme-clear-fc)}tbody tr.svelte-111fzjr td[data-clear][data-clear=AJ].svelte-111fzjr{color:var(--theme-clear-aj)}tbody tr.ajc.svelte-111fzjr td.svelte-111fzjr:nth-child(4),tbody tr.ajc.svelte-111fzjr td.svelte-111fzjr:nth-child(5),tbody tr.ajc.svelte-111fzjr td[data-clear].svelte-111fzjr{color:var(--theme-clear_aj);text-shadow:0 0 10px var(--theme-clear-aj)}.opmx.svelte-111fzjr.svelte-111fzjr{color:var(--theme-text-dim);font-size:0.8rem}.pc-hidden.svelte-111fzjr.svelte-111fzjr{cursor:pointer}.pc-hidden.svelte-111fzjr span.svelte-111fzjr{border-radius:0.2rem;background-color:var(--theme-bg-sub);color:var(--theme-bg-sub)}')}function ur(e){let t,n,r,o,s,l,a=e[0].rank+"",i=e[0].score+"";return{c(){t=T("td"),n=M(a),o=E(),s=T("td"),l=M(i),H(t,"data-rank",r=e[0].rank),H(t,"class","svelte-111fzjr"),H(s,"class","svelte-111fzjr")},m(e,r){S(e,t,r),w(t,n),S(e,o,r),S(e,s,r),w(s,l)},p(e,o){1&o&&a!==(a=e[0].rank+"")&&P(n,a),1&o&&r!==(r=e[0].rank)&&H(t,"data-rank",r),1&o&&i!==(i=e[0].score+"")&&P(l,i)},d(e){e&&z(t),e&&z(o),e&&z(s)}}}function fr(e){let t,n,r,o,s,l,a,i,c,d=e[0].op.toFixed(2)+"",u=e[0].opmax.toFixed(1)+"",f=(100*e[0].op/e[0].opmax).toPrecision(5)+"";return{c(){t=T("td"),n=M(d),r=T("span"),o=M("／"),s=M(u),l=E(),a=T("td"),i=M(f),c=T("span"),c.textContent="%",H(r,"class","opmx svelte-111fzjr"),H(t,"class","svelte-111fzjr"),H(c,"class","opmx svelte-111fzjr"),H(a,"class","svelte-111fzjr")},m(e,d){S(e,t,d),w(t,n),w(t,r),w(r,o),w(r,s),S(e,l,d),S(e,a,d),w(a,i),w(a,c)},p(e,t){1&t&&d!==(d=e[0].op.toFixed(2)+"")&&P(n,d),1&t&&u!==(u=e[0].opmax.toFixed(1)+"")&&P(s,u),1&t&&f!==(f=(100*e[0].op/e[0].opmax).toPrecision(5)+"")&&P(i,f)},d(e){e&&z(t),e&&z(l),e&&z(a)}}}function hr(e){let t,n,r,o=e[0].clear+"";return{c(){t=T("td"),n=M(o),H(t,"data-clear",r=e[0].clear),H(t,"class","svelte-111fzjr")},m(e,r){S(e,t,r),w(t,n)},p(e,s){1&s&&o!==(o=e[0].clear+"")&&P(n,o),1&s&&r!==(r=e[0].clear)&&H(t,"data-clear",r)},d(e){e&&z(t)}}}function pr(e){let t;function n(e,t){return null==e[0].playCount?mr:gr}let r=n(e),o=r(e);return{c(){o.c(),t=A()},m(e,n){o.m(e,n),S(e,t,n)},p(e,s){r===(r=n(e))&&o?o.p(e,s):(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&z(t)}}}function gr(e){let t,n,r=(e[0].playCount||"?")+"";return{c(){t=T("td"),n=M(r),H(t,"class","svelte-111fzjr")},m(e,r){S(e,t,r),w(t,n)},p(e,t){1&t&&r!==(r=(e[0].playCount||"?")+"")&&P(n,r)},d(e){e&&z(t)}}}function mr(t){let n,r,o;return{c(){n=T("td"),n.innerHTML='<span class="svelte-111fzjr">...</span>',H(n,"class","pc-hidden svelte-111fzjr")},m(e,s){S(e,n,s),r||(o=L(n,"click",t[5]),r=!0)},p:e,d(e){e&&z(n),r=!1,o()}}}function vr(t){let n,r,o,s,l,a,i,c,d,u,f,h,p,g,m,v,b=t[0].order+"",y=t[0].title+"",x=(-1==t[0].const?"-":t[0].const?.toFixed(1)??"??.?")+"",$=(-1==t[0].const?"-":null==t[0].rating?"??.??":t[0].rating.toFixed(2))+"";function k(e,t){return e[2]?fr:ur}let j=k(t),C=j(t),A=("history"===t[1]||"best"===t[1])&&hr(t),L=t[3]&&"best"===t[1]&&pr(t);return{c(){n=T("tr"),r=T("td"),o=M(b),s=E(),l=T("td"),a=M(y),c=E(),d=T("td"),u=M(x),f=E(),C.c(),h=E(),p=T("td"),g=M($),m=E(),A&&A.c(),v=E(),L&&L.c(),H(r,"class","svelte-111fzjr"),H(l,"data-diff",i=t[0].difficulty),H(l,"class","svelte-111fzjr"),H(d,"class","svelte-111fzjr"),H(p,"class","svelte-111fzjr"),H(n,"class","svelte-111fzjr"),O(n,"best30",t[0].order<=("recent"===t[1]||"history"===t[1]?10:30)),O(n,"best40",t[0].order<=("recent"===t[1]?10:"history"===t[1]?30:40)),O(n,"ajc",101e4==t[0].score)},m(e,t){S(e,n,t),w(n,r),w(r,o),w(n,s),w(n,l),w(l,a),w(n,c),w(n,d),w(d,u),w(n,f),C.m(n,null),w(n,h),w(n,p),w(p,g),w(n,m),A&&A.m(n,null),w(n,v),L&&L.m(n,null)},p(e,[t]){1&t&&b!==(b=e[0].order+"")&&P(o,b),1&t&&y!==(y=e[0].title+"")&&P(a,y),1&t&&i!==(i=e[0].difficulty)&&H(l,"data-diff",i),1&t&&x!==(x=(-1==e[0].const?"-":e[0].const?.toFixed(1)??"??.?")+"")&&P(u,x),j===(j=k(e))&&C?C.p(e,t):(C.d(1),C=j(e),C&&(C.c(),C.m(n,h))),1&t&&$!==($=(-1==e[0].const?"-":null==e[0].rating?"??.??":e[0].rating.toFixed(2))+"")&&P(g,$),"history"===e[1]||"best"===e[1]?A?A.p(e,t):(A=hr(e),A.c(),A.m(n,v)):A&&(A.d(1),A=null),e[3]&&"best"===e[1]?L?L.p(e,t):(L=pr(e),L.c(),L.m(n,null)):L&&(L.d(1),L=null),3&t&&O(n,"best30",e[0].order<=("recent"===e[1]||"history"===e[1]?10:30)),3&t&&O(n,"best40",e[0].order<=("recent"===e[1]?10:"history"===e[1]?30:40)),1&t&&O(n,"ajc",101e4==e[0].score)},i:e,o:e,d(e){e&&z(n),C.d(),A&&A.d(),L&&L.d()}}}function br(e,t,n){let r,o,s,l;u(e,lt,(e=>n(1,r=e))),u(e,We,(e=>n(2,o=e))),u(e,Xe,(e=>n(3,s=e))),u(e,ct,(e=>n(4,l=e)));let{song:a}=t;return e.$$set=e=>{"song"in e&&n(0,a=e.song)},[a,r,o,s,l,async()=>{l||n(0,a.playCount=await ot("songPlayCount",a.difficulty,a.idx),a)}]}const yr=class extends $e{constructor(e){super(),xe(this,e,br,vr,a,{song:0},dr)}};function wr(e){x(e,"svelte-1gma20a",".wrapper.svelte-1gma20a.svelte-1gma20a{border:var(--theme-border) 3px solid;border-radius:0.5rem;background-color:var(--theme-bg-sub);width:fit-content;padding:0.5rem;margin:0.5rem;display:flex;justify-content:space-evenly;text-align:center;width:calc(100% - 2rem - 6px)}.item.svelte-1gma20a.svelte-1gma20a{display:flex;flex-direction:column}.item.svelte-1gma20a div.svelte-1gma20a:nth-child(1){color:var(--theme-label)}.item.svelte-1gma20a div.svelte-1gma20a:nth-child(2){font-size:1.2rem;font-weight:bold}.item.fc.svelte-1gma20a div.svelte-1gma20a:nth-child(1){color:var(--theme-clear-fc)}.item.aj.svelte-1gma20a div.svelte-1gma20a:nth-child(1){color:var(--theme-clear-aj)}.item.mx.svelte-1gma20a:not(.zero) div.svelte-1gma20a:nth-child(2),.item.full.svelte-1gma20a div.svelte-1gma20a:nth-child(2){color:var(--theme-clear-aj);text-shadow:0 0 10px var(--theme-clear-aj)}.item.zero.svelte-1gma20a div.svelte-1gma20a:nth-child(2){color:var(--theme-text-dim)}.total.svelte-1gma20a.svelte-1gma20a{color:var(--theme-text-dim);font-size:0.8rem;display:flex;align-items:end}")}function xr(e,t,n){const r=e.slice();return r[4]=t[n],r}function $r(e){let t,n,r,o,s,l,a=(e[0][e[4]]??0)+"";return{c(){t=T("div"),n=T("div"),r=M(e[4]),o=E(),s=T("div"),l=M(a),H(n,"class","svelte-1gma20a"),H(s,"class","svelte-1gma20a"),H(t,"class","item svelte-1gma20a"),O(t,"zero",!(e[0][e[4]]>0)),O(t,"full",e[0][e[4]]==e[3])},m(e,a){S(e,t,a),w(t,n),w(n,r),w(t,o),w(t,s),w(s,l)},p(e,n){1&n&&a!==(a=(e[0][e[4]]??0)+"")&&P(l,a),1&n&&O(t,"zero",!(e[0][e[4]]>0)),9&n&&O(t,"full",e[0][e[4]]==e[3])},d(e){e&&z(t)}}}function kr(e){let t,n,r,o,s,l=(e[0].MAX??0)+"";return{c(){t=T("div"),n=T("div"),n.textContent="MAX",r=E(),o=T("div"),s=M(l),H(n,"class","svelte-1gma20a"),H(o,"class","svelte-1gma20a"),H(t,"class","item mx svelte-1gma20a")},m(e,l){S(e,t,l),w(t,n),w(t,r),w(t,o),w(o,s)},p(e,t){1&t&&l!==(l=(e[0].MAX??0)+"")&&P(s,l)},d(e){e&&z(t)}}}function jr(t){let n,r,o,s,l,a,i,c,d,u,f,h,p,g,m,v,b,y,x=["S","S+","SS","SS+","SSS","SSS+"],$=[];for(let e=0;e<6;e+=1)$[e]=$r(xr(t,x,e));let k=t[0].MAX>0&&kr(t);return{c(){n=T("div");for(let e=0;e<6;e+=1)$[e].c();r=E(),k&&k.c(),o=E(),s=T("div"),l=T("div"),l.textContent="FC",a=E(),i=T("div"),c=M(t[1]),d=E(),u=T("div"),f=T("div"),f.textContent="AJ",h=E(),p=T("div"),g=M(t[2]),m=E(),v=T("div"),b=M("/"),y=M(t[3]),H(l,"class","svelte-1gma20a"),H(i,"class","svelte-1gma20a"),H(s,"class","item fc svelte-1gma20a"),O(s,"zero",0==t[1]),H(f,"class","svelte-1gma20a"),H(p,"class","svelte-1gma20a"),H(u,"class","item aj svelte-1gma20a"),O(u,"zero",0==t[2]),H(v,"class","total svelte-1gma20a"),H(n,"class","wrapper svelte-1gma20a")},m(e,t){S(e,n,t);for(let e=0;e<6;e+=1)$[e].m(n,null);w(n,r),k&&k.m(n,null),w(n,o),w(n,s),w(s,l),w(s,a),w(s,i),w(i,c),w(n,d),w(n,u),w(u,f),w(u,h),w(u,p),w(p,g),w(n,m),w(n,v),w(v,b),w(v,y)},p(e,[t]){if(9&t){let o;for(x=["S","S+","SS","SS+","SSS","SSS+"],o=0;o<6;o+=1){const s=xr(e,x,o);$[o]?$[o].p(s,t):($[o]=$r(s),$[o].c(),$[o].m(n,r))}for(;o<6;o+=1)$[o].d(1)}e[0].MAX>0?k?k.p(e,t):(k=kr(e),k.c(),k.m(n,o)):k&&(k.d(1),k=null),2&t&&P(c,e[1]),2&t&&O(s,"zero",0==e[1]),4&t&&P(g,e[2]),4&t&&O(u,"zero",0==e[2]),8&t&&P(y,e[3])},i:e,o:e,d(e){e&&z(n),C($,e),k&&k.d()}}}function Sr(e,t,n){let{rankCounts:r}=t,{fcCount:o}=t,{ajCount:s}=t,{total:l}=t;return e.$$set=e=>{"rankCounts"in e&&n(0,r=e.rankCounts),"fcCount"in e&&n(1,o=e.fcCount),"ajCount"in e&&n(2,s=e.ajCount),"total"in e&&n(3,l=e.total)},[r,o,s,l]}const zr=class extends $e{constructor(e){super(),xe(this,e,Sr,jr,a,{rankCounts:0,fcCount:1,ajCount:2,total:3},wr)}};function Cr(e){x(e,"svelte-1s9boa8",'@charset "UTF-8";table.svelte-1s9boa8.svelte-1s9boa8{border-spacing:0;width:100%;padding-bottom:0.5rem;max-width:max-content;margin:auto}th.svelte-1s9boa8.svelte-1s9boa8{padding:0.5rem;color:var(--theme-text-dim);cursor:pointer;user-select:none}th.svelte-1s9boa8.svelte-1s9boa8:not(.cur-sort):hover{color:inherit;filter:brightness(0.9)}th.cur-sort.svelte-1s9boa8.svelte-1s9boa8{filter:brightness(1);color:inherit}th.cur-sort.svelte-1s9boa8.svelte-1s9boa8::before{content:"▼"}.reversed.svelte-1s9boa8 th.cur-sort.svelte-1s9boa8::before{content:"▲"}td.title.svelte-1s9boa8.svelte-1s9boa8{font-weight:bold;color:var(--theme-label);text-align:center}')}function Tr(e,t,n){const r=e.slice();return r[17]=t[n],r}function Mr(e){let t,n;return t=new zr({props:{ajCount:e[3],fcCount:e[6],rankCounts:e[7],total:e[2].length}}),{c(){be(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};8&n&&(r.ajCount=e[3]),64&n&&(r.fcCount=e[6]),128&n&&(r.rankCounts=e[7]),4&n&&(r.total=e[2].length),t.$set(r)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){fe(t.$$.fragment,e),n=!1},d(e){we(t,e)}}}function Er(t){let n,r="best"===t[4]&&Ar();return{c(){r&&r.c(),n=A()},m(e,t){r&&r.m(e,t),S(e,n,t)},p(e,t){"best"===e[4]?r||(r=Ar(),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:e,o:e,d(e){r&&r.d(e),e&&z(n)}}}function Ar(t){return{c:e,m:e,d:e}}function Lr(e){let t,n;return{c(){t=T("td"),n=M(e[0]),H(t,"colspan","7"),H(t,"class","title svelte-1s9boa8")},m(e,r){S(e,t,r),w(t,n)},p(e,t){1&t&&P(n,e[0])},d(e){e&&z(t)}}}function Hr(e){let t,n,r,o,l,a=e[9]("record.head.rank")+"",i=e[9]("record.head.score")+"";return{c(){t=T("th"),n=E(),r=T("th"),H(t,"class","svelte-1s9boa8"),H(r,"class","svelte-1s9boa8"),O(r,"cur-sort","score"==e[1])},m(s,c){S(s,t,c),t.innerHTML=a,S(s,n,c),S(s,r,c),r.innerHTML=i,o||(l=[L(t,"click",e[11]("score")),L(r,"click",e[11]("score"))],o=!0)},p(e,n){512&n&&a!==(a=e[9]("record.head.rank")+"")&&(t.innerHTML=a),512&n&&i!==(i=e[9]("record.head.score")+"")&&(r.innerHTML=i),2&n&&O(r,"cur-sort","score"==e[1])},d(e){e&&z(t),e&&z(n),e&&z(r),o=!1,s(l)}}}function _r(e){let t,n,r,o,l,a=e[9]("record.head.overpower")+"",i=e[9]("record.head.overpowerPercent")+"";return{c(){t=T("th"),n=E(),r=T("th"),H(t,"class","svelte-1s9boa8"),O(t,"cur-sort","op"==e[1]),H(r,"class","svelte-1s9boa8"),O(r,"cur-sort","opp"==e[1])},m(s,c){S(s,t,c),t.innerHTML=a,S(s,n,c),S(s,r,c),r.innerHTML=i,o||(l=[L(t,"click",e[11]("op")),L(r,"click",e[11]("opp"))],o=!0)},p(e,n){512&n&&a!==(a=e[9]("record.head.overpower")+"")&&(t.innerHTML=a),2&n&&O(t,"cur-sort","op"==e[1]),512&n&&i!==(i=e[9]("record.head.overpowerPercent")+"")&&(r.innerHTML=i),2&n&&O(r,"cur-sort","opp"==e[1])},d(e){e&&z(t),e&&z(n),e&&z(r),o=!1,s(l)}}}function Pr(e){let t,n,r,o=e[9]("record.head.ajfc")+"";return{c(){t=T("th"),H(t,"class","svelte-1s9boa8"),O(t,"cur-sort","aj"==e[1])},m(s,l){S(s,t,l),t.innerHTML=o,n||(r=L(t,"click",e[11]("aj")),n=!0)},p(e,n){512&n&&o!==(o=e[9]("record.head.ajfc")+"")&&(t.innerHTML=o),2&n&&O(t,"cur-sort","aj"==e[1])},d(e){e&&z(t),n=!1,r()}}}function Nr(e){let t,n,r,o=e[9]("record.head.playcount")+"";return{c(){t=T("th"),H(t,"class","svelte-1s9boa8"),O(t,"cur-sort","playcount"==e[1])},m(s,l){S(s,t,l),t.innerHTML=o,n||(r=L(t,"click",e[11]("playcount")),n=!0)},p(e,n){512&n&&o!==(o=e[9]("record.head.playcount")+"")&&(t.innerHTML=o),2&n&&O(t,"cur-sort","playcount"==e[1])},d(e){e&&z(t),n=!1,r()}}}function Rr(e){let t,n;return t=new yr({props:{song:e[17]}}),{c(){be(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.song=e[17]),t.$set(r)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){fe(t.$$.fragment,e),n=!1},d(e){we(t,e)}}}function Dr(e){let t,n,r,o,l,a,i,c,d,u,f,h,p,g,m,v,b,y,x,$,k,j,M=e[9]("record.head.title")+"",A=e[9]("record.head.const")+"",_=e[9]("record.head.rating")+"";const P=[Er,Mr],N=[];function R(e,t){return e[8]?0:1}t=R(e),n=N[t]=P[t](e);let D=e[0]&&Lr(e);function F(e,t){return e[8]?_r:Hr}let U=F(e),B=U(e),I=("history"===e[4]||"best"===e[4])&&Pr(e),V=e[10]&&"best"===e[4]&&Nr(e),q=e[2],J=[];for(let t=0;t<q.length;t+=1)J[t]=Rr(Tr(e,q,t));const W=e=>fe(J[e],1,1,(()=>{J[e]=null}));return{c(){n.c(),r=E(),o=T("table"),l=T("thead"),D&&D.c(),a=E(),i=T("tr"),c=T("th"),c.textContent="#",d=E(),u=T("th"),f=E(),h=T("th"),p=E(),B.c(),g=E(),m=T("th"),v=E(),I&&I.c(),b=E(),V&&V.c(),y=E(),x=T("tbody");for(let e=0;e<J.length;e+=1)J[e].c();H(c,"class","svelte-1s9boa8"),H(u,"class","svelte-1s9boa8"),O(u,"cur-sort","title"==e[1]),H(h,"class","svelte-1s9boa8"),O(h,"cur-sort","const"==e[1]),H(m,"class","svelte-1s9boa8"),O(m,"cur-sort","rating"==e[1]),H(i,"class","svelte-1s9boa8"),O(i,"reversed",e[5]),H(o,"class","svelte-1s9boa8")},m(n,s){N[t].m(n,s),S(n,r,s),S(n,o,s),w(o,l),D&&D.m(l,null),w(l,a),w(l,i),w(i,c),w(i,d),w(i,u),u.innerHTML=M,w(i,f),w(i,h),h.innerHTML=A,w(i,p),B.m(i,null),w(i,g),w(i,m),m.innerHTML=_,w(i,v),I&&I.m(i,null),w(i,b),V&&V.m(i,null),w(o,y),w(o,x);for(let e=0;e<J.length;e+=1)J[e].m(x,null);$=!0,k||(j=[L(c,"click",e[11]("rating")),L(u,"click",e[11]("title")),L(h,"click",e[11]("const")),L(m,"click",e[11]("rating"))],k=!0)},p(e,[o]){let s=t;if(t=R(e),t===s?N[t].p(e,o):(ce(),fe(N[s],1,1,(()=>{N[s]=null})),de(),n=N[t],n?n.p(e,o):(n=N[t]=P[t](e),n.c()),ue(n,1),n.m(r.parentNode,r)),e[0]?D?D.p(e,o):(D=Lr(e),D.c(),D.m(l,a)):D&&(D.d(1),D=null),(!$||512&o)&&M!==(M=e[9]("record.head.title")+"")&&(u.innerHTML=M),(!$||2&o)&&O(u,"cur-sort","title"==e[1]),(!$||512&o)&&A!==(A=e[9]("record.head.const")+"")&&(h.innerHTML=A),(!$||2&o)&&O(h,"cur-sort","const"==e[1]),U===(U=F(e))&&B?B.p(e,o):(B.d(1),B=U(e),B&&(B.c(),B.m(i,g))),(!$||512&o)&&_!==(_=e[9]("record.head.rating")+"")&&(m.innerHTML=_),(!$||2&o)&&O(m,"cur-sort","rating"==e[1]),"history"===e[4]||"best"===e[4]?I?I.p(e,o):(I=Pr(e),I.c(),I.m(i,b)):I&&(I.d(1),I=null),e[10]&&"best"===e[4]?V?V.p(e,o):(V=Nr(e),V.c(),V.m(i,null)):V&&(V.d(1),V=null),(!$||32&o)&&O(i,"reversed",e[5]),4&o){let t;for(q=e[2],t=0;t<q.length;t+=1){const n=Tr(e,q,t);J[t]?(J[t].p(n,o),ue(J[t],1)):(J[t]=Rr(n),J[t].c(),ue(J[t],1),J[t].m(x,null))}for(ce(),t=q.length;t<J.length;t+=1)W(t);de()}},i(e){if(!$){ue(n);for(let e=0;e<q.length;e+=1)ue(J[e]);$=!0}},o(e){fe(n),J=J.filter(Boolean);for(let e=0;e<J.length;e+=1)fe(J[e]);$=!1},d(e){N[t].d(e),e&&z(r),e&&z(o),D&&D.d(),B.d(),I&&I.d(),V&&V.d(),C(J,e),k=!1,s(j)}}}function Or(e,t,n){let r,o,s,l,a,i,c,d,f,h,p,g;u(e,Ue,(e=>n(13,a=e))),u(e,Be,(e=>n(14,i=e))),u(e,qe,(e=>n(15,c=e))),u(e,Ie,(e=>n(16,d=e))),u(e,lt,(e=>n(4,f=e))),u(e,We,(e=>n(8,h=e))),u(e,Ke,(e=>n(9,p=e))),u(e,Xe,(e=>n(10,g=e)));let{playRecord:m}=t,{title:v}=t,b="rating",y=!1;return e.$$set=e=>{"playRecord"in e&&n(12,m=e.playRecord),"title"in e&&n(0,v=e.title)},e.$$.update=()=>{126994&e.$$.dirty&&n(2,r=("best"===f?m.filter((e=>d[e.difficulty]&&c[Ae.find((t=>Ee[t]==e.genre))]&&i>=e.const&&e.const>=a)):m).sort(et[b])),4&e.$$.dirty&&n(7,o=(()=>{let e={};["MAX","SSS+","SSS","SS+","SS","S+","S"].forEach((t=>e[t]=0)),["AAA","AA","A","BBB","BB","B","C","D"].forEach((t=>e[t]=0));for(const t of r)e[t.rank]++;return Object.keys(e).reduce(((t,n)=>(e[n]+=e[t],n))),e})()),4&e.$$.dirty&&n(3,s=r.filter((e=>"AJ"==e.clear)).length),12&e.$$.dirty&&n(6,l=s+r.filter((e=>"FC"==e.clear)).length)},[v,b,r,s,f,y,l,o,h,p,g,function(e){return()=>{b===e?(n(2,r=r.reverse()),n(5,y=!y)):(n(1,b=e),n(5,y=!1))}},m,a,i,c,d]}const Fr=class extends $e{constructor(e){super(),xe(this,e,Or,Dr,a,{playRecord:12,title:0},Cr)}};function Ur(e){x(e,"svelte-1vp1r5p",".modal-wrapper.svelte-1vp1r5p{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center}.modal-bg.svelte-1vp1r5p{position:fixed;background:rgba(0, 0, 0, 0.4);top:0;left:0;width:100vw;height:100vh}.modal.svelte-1vp1r5p{background:var(--theme-bg-main);width:70%;max-width:32rem;margin:auto;padding:2rem;position:relative;box-shadow:2rem 2rem 10px rgba(0, 0, 0, 0.5333333333);border-radius:1rem;text-align:center}.app-version.svelte-1vp1r5p{color:var(--theme-text-dim);font-weight:normal;font-size:small}.spinner.svelte-1vp1r5p{margin:2rem auto;border:0.5rem solid transparent;border-top-color:var(--theme-label);border-radius:50%;width:4rem;height:4rem;animation:svelte-1vp1r5p-spin 1s cubic-bezier(0.5, 0.2, 0.5, 0.8) infinite}.error.svelte-1vp1r5p{margin:4rem auto;height:4rem;line-height:4rem;font-size:5rem;color:var(--theme-label)}@keyframes svelte-1vp1r5p-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}")}function Br(e){let t,n,r,o,s,l=Je.accepts.indexOf("jp")>-1,a=l&&function(e){let t,n=e[1]("loading.constData",{name:e[1]("settings.data.constData."+e[3])})+"";return{c(){t=T("p"),R(t,"color","var(--theme-text-dim)")},m(e,r){S(e,t,r),t.innerHTML=n},p(e,r){10&r&&n!==(n=e[1]("loading.constData",{name:e[1]("settings.data.constData."+e[3])})+"")&&(t.innerHTML=n)},d(e){e&&z(t)}}}(e);return{c(){t=T("div"),n=E(),r=T("p"),o=E(),a&&a.c(),s=A(),H(t,"class","spinner svelte-1vp1r5p")},m(l,i){S(l,t,i),S(l,n,i),S(l,r,i),r.innerHTML=e[2],S(l,o,i),a&&a.m(l,i),S(l,s,i)},p(e,t){4&t&&(r.innerHTML=e[2]),l&&a.p(e,t)},d(e){e&&z(t),e&&z(n),e&&z(r),e&&z(o),a&&a.d(e),e&&z(s)}}}function Ir(e){let t,n,r,o=e[1]("loading.error")+"";return{c(){t=T("div"),t.textContent=":(",n=E(),r=T("p"),H(t,"class","error svelte-1vp1r5p")},m(e,s){S(e,t,s),S(e,n,s),S(e,r,s),r.innerHTML=o},p(e,t){2&t&&o!==(o=e[1]("loading.error")+"")&&(r.innerHTML=o)},d(e){e&&z(t),e&&z(n),e&&z(r)}}}function Vr(t){let n,r,o,s,l,a,i,c,d,u=t[1]("main.title")+"";function f(e,t){return e[0]?Ir:Br}let h=f(t),p=h(t);return{c(){n=T("div"),r=T("div"),o=E(),s=T("div"),l=T("h3"),a=new F(!1),i=E(),c=T("span"),c.textContent="@1.0.0",d=E(),p.c(),H(r,"class","modal-bg svelte-1vp1r5p"),a.a=i,H(c,"class","app-version svelte-1vp1r5p"),H(s,"class","modal svelte-1vp1r5p"),H(n,"class","modal-wrapper svelte-1vp1r5p")},m(e,t){S(e,n,t),w(n,r),w(n,o),w(n,s),w(s,l),a.m(u,l),w(l,i),w(l,c),w(s,d),p.m(s,null)},p(e,[t]){2&t&&u!==(u=e[1]("main.title")+"")&&a.p(u),h===(h=f(e))&&p?p.p(e,t):(p.d(1),p=h(e),p&&(p.c(),p.m(s,null)))},i:e,o:e,d(e){e&&z(n),p.d()}}}function qr(e,t,n){let r,o,s;u(e,Ke,(e=>n(1,r=e))),u(e,it,(e=>n(2,o=e))),u(e,Je,(e=>n(3,s=e)));let{error:l=!1}=t;return e.$$set=e=>{"error"in e&&n(0,l=e.error)},[l,r,o,s]}const Jr=class extends $e{constructor(e){super(),xe(this,e,qr,Vr,a,{error:0},Ur)}};function Wr(e){x(e,"svelte-dlxpu",".wrapper.svelte-dlxpu{position:fixed;bottom:0.5rem;left:0.5rem;padding:0.5rem;border-radius:0.5rem;background-color:rgba(0, 0, 0, 0.4);backdrop-filter:blur(2px)}.spinner.svelte-dlxpu{border:0.2rem solid transparent;border-top-color:var(--theme-label);display:inline-block;box-sizing:border-box;border-radius:50%;width:1em;height:1em;animation:svelte-dlxpu-spin 1s cubic-bezier(0.5, 0.2, 0.5, 0.8) infinite}.text.svelte-dlxpu{color:var(--theme-text-dim);font-size:8px}@keyframes svelte-dlxpu-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}")}function Xr(e){let t;return{c(){t=T("span"),H(t,"class","spinner svelte-dlxpu")},m(e,n){S(e,t,n)},d(e){e&&z(t)}}}function Gr(e){let t,n,r,o,s,l=e[0]&&Xr();return{c(){t=T("div"),l&&l.c(),n=E(),r=T("span"),H(r,"class","text svelte-dlxpu"),H(t,"class","wrapper svelte-dlxpu")},m(o,a){S(o,t,a),l&&l.m(t,null),w(t,n),w(t,r),r.innerHTML=e[1],s=!0},p(e,[o]){e[0]?l||(l=Xr(),l.c(),l.m(t,n)):l&&(l.d(1),l=null),(!s||2&o)&&(r.innerHTML=e[1])},i(e){s||(K((()=>{o||(o=pe(t,ln,{y:200,duration:1e3},!0)),o.run(1)})),s=!0)},o(e){o||(o=pe(t,ln,{y:200,duration:1e3},!1)),o.run(0),s=!1},d(e){e&&z(t),l&&l.d(),e&&o&&o.end()}}}function Zr(e,t,n){let r,o;return u(e,dt,(e=>n(0,r=e))),u(e,it,(e=>n(1,o=e))),[r,o]}const Yr=class extends $e{constructor(e){super(),xe(this,e,Zr,Gr,a,{},Wr)}},{window:Qr}=ge;function Kr(e){x(e,"svelte-qpw49g",'@charset "UTF-8";::-webkit-scrollbar{width:0.6rem}::-webkit-scrollbar-thumb{border-radius:0.1rem;width:0.2rem;-webkit-box-shadow:inset 0 0 6px rgba(0, 0, 0, 0.3);background-color:var(--theme-text-dim);border-width:1rem 0.2rem;border-style:solid;border-color:transparent;background-clip:content-box}em{font-style:normal;font-weight:bold;color:var(--theme-link)}a{color:var(--theme-link);text-decoration:none}a:hover{text-decoration:underline dotted currentColor}button{border:none;justify-content:center;display:inline-flex;align-items:center;cursor:pointer;user-select:none;color:inherit;transition-duration:0.1s;filter:brightness(0.7)}button:hover{filter:brightness(1)}body{background-color:var(--theme-bg-main);color:var(--theme-text);margin:0;font-size:14px;min-height:100%;min-width:fit-content;font-family:"ヒラギノ角ゴ Pro W3", "メイリオ", Meiryo, "ＭＳ Ｐゴシック", "MS P Gothic", sans-serif}main.svelte-qpw49g{width:fit-content;margin:auto}')}function eo(t){let n,r;return n=new Jr({props:{error:!0}}),{c(){be(n.$$.fragment)},m(e,t){ye(n,e,t),r=!0},p:e,i(e){r||(ue(n.$$.fragment,e),r=!0)},o(e){fe(n.$$.fragment,e),r=!1},d(e){we(n,e)}}}function to(e){let t,n,r,o,s,l,a,i,c,d,u;t=new rn({}),r=new xt({}),l=new cr({});const f=[oo,ro,no],h=[];function p(e,t){return"best"===e[0]?0:"recent"===e[0]?1:"history"===e[0]?2:-1}~(i=p(e))&&(c=h[i]=f[i](e));let g=e[6]&&so();return{c(){be(t.$$.fragment),n=E(),be(r.$$.fragment),o=E(),s=T("main"),be(l.$$.fragment),a=E(),c&&c.c(),d=E(),g&&g.c(),H(s,"class","svelte-qpw49g")},m(e,c){ye(t,e,c),S(e,n,c),ye(r,e,c),S(e,o,c),S(e,s,c),ye(l,s,null),w(s,a),~i&&h[i].m(s,null),w(s,d),g&&g.m(s,null),u=!0},p(e,t){let n=i;i=p(e),i===n?~i&&h[i].p(e,t):(c&&(ce(),fe(h[n],1,1,(()=>{h[n]=null})),de()),~i?(c=h[i],c?c.p(e,t):(c=h[i]=f[i](e),c.c()),ue(c,1),c.m(s,d)):c=null),e[6]?g?64&t&&ue(g,1):(g=so(),g.c(),ue(g,1),g.m(s,null)):g&&(ce(),fe(g,1,1,(()=>{g=null})),de())},i(e){u||(ue(t.$$.fragment,e),ue(r.$$.fragment,e),ue(l.$$.fragment,e),ue(c),ue(g),u=!0)},o(e){fe(t.$$.fragment,e),fe(r.$$.fragment,e),fe(l.$$.fragment,e),fe(c),fe(g),u=!1},d(e){we(t,e),e&&z(n),we(r,e),e&&z(o),e&&z(s),we(l),~i&&h[i].d(),g&&g.d()}}}function no(e){let t,n;return t=new Fr({props:{playRecord:e[5]}}),{c(){be(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};32&n&&(r.playRecord=e[5]),t.$set(r)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){fe(t.$$.fragment,e),n=!1},d(e){we(t,e)}}}function ro(e){let t,n;return t=new Fr({props:{playRecord:e[4]}}),{c(){be(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};16&n&&(r.playRecord=e[4]),t.$set(r)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){fe(t.$$.fragment,e),n=!1},d(e){we(t,e)}}}function oo(e){let t,n;return t=new Fr({props:{playRecord:e[3]}}),{c(){be(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};8&n&&(r.playRecord=e[3]),t.$set(r)},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){fe(t.$$.fragment,e),n=!1},d(e){we(t,e)}}}function so(e){let t,n;return t=new Yr({}),{c(){be(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){fe(t.$$.fragment,e),n=!1},d(e){we(t,e)}}}function lo(t){let n,r;return n=new Jr({}),{c(){be(n.$$.fragment)},m(e,t){ye(n,e,t),r=!0},p:e,i(e){r||(ue(n.$$.fragment,e),r=!0)},o(e){fe(n.$$.fragment,e),r=!1},d(e){we(n,e)}}}function ao(e){let t,n;return t=new Qn({}),{c(){be(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},i(e){n||(ue(t.$$.fragment,e),n=!0)},o(e){fe(t.$$.fragment,e),n=!1},d(e){we(t,e)}}}function io(e){let t,n,r,o,l,a,i,c,d,u;document.title=r=e[2]("main.title");let f={ctx:e,current:null,token:null,hasCatch:!0,pending:lo,then:to,catch:eo,blocks:[,,,]};!function(e,t){const n=t.token={};function r(e,r,o,s){if(t.token!==n)return;t.resolved=s;let l=t.ctx;void 0!==o&&(l=l.slice(),l[o]=s);const a=e&&(t.current=e)(l);let i=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==r&&e&&(ce(),fe(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),de())})):t.block.d(1),a.c(),ue(a,1),a.m(t.mount(),t.anchor),i=!0),t.block=a,t.blocks&&(t.blocks[r]=a),i&&oe()}if(!(o=e)||"object"!=typeof o&&"function"!=typeof o||"function"!=typeof o.then){if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}else{const n=J();if(e.then((e=>{q(n),r(t.then,1,t.value,e),q(null)}),(e=>{if(q(n),r(t.catch,2,t.error,e),q(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}var o}(l=Promise.all([mt.init(),pt.init(),gt.init(),vt.init()]),f);let h=e[7]&&ao();return{c(){t=T("link"),o=E(),f.block.c(),a=E(),h&&h.c(),i=A(),H(t,"rel","stylesheet"),H(t,"href",n="../common/styles/theme-"+e[1]+".css")},m(n,r){w(document.head,t),S(n,o,r),f.block.m(n,f.anchor=r),f.mount=()=>a.parentNode,f.anchor=a,S(n,a,r),h&&h.m(n,r),S(n,i,r),c=!0,d||(u=[L(Qr,"hashchange",e[8]),L(Qr,"load",e[9],{once:!0})],d=!0)},p(o,[s]){e=o,(!c||2&s&&n!==(n="../common/styles/theme-"+e[1]+".css"))&&H(t,"href",n),(!c||4&s)&&r!==(r=e[2]("main.title"))&&(document.title=r),function(e,t,n){const r=t.slice(),{resolved:o}=e;e.current===e.then&&(r[e.value]=o),e.current===e.catch&&(r[e.error]=o),e.block.p(r,n)}(f,e,s),e[7]?h?128&s&&ue(h,1):(h=ao(),h.c(),ue(h,1),h.m(i.parentNode,i)):h&&(ce(),fe(h,1,1,(()=>{h=null})),de())},i(e){c||(ue(f.block),ue(h),c=!0)},o(e){for(let e=0;e<3;e+=1)fe(f.blocks[e]);fe(h),c=!1},d(e){z(t),e&&z(o),f.block.d(e),f.token=null,f=null,e&&z(a),h&&h.d(e),e&&z(i),d=!1,s(u)}}}function co(e,t,n){let r,o,s,l,a,i,c,d,f;return u(e,Oe,(e=>n(10,r=e))),u(e,lt,(e=>n(0,o=e))),u(e,Fe,(e=>n(1,s=e))),u(e,Ke,(e=>n(2,l=e))),u(e,vt,(e=>n(3,a=e))),u(e,pt,(e=>n(4,i=e))),u(e,gt,(e=>n(5,c=e))),u(e,ct,(e=>n(6,d=e))),u(e,at,(e=>n(7,f=e))),h(lt,o=window.location.hash.slice(1),o),[o,s,l,a,i,c,d,f,function(){h(lt,o=window.location.hash.slice(1),o)},async function(){He(window.opener,_e)("saveConfig",{lang:r})}]}new class extends $e{constructor(e){super(),xe(this,e,co,io,a,{},Kr)}}({target:document.body})})()})();