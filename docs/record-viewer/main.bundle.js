(()=>{var e={283:(e,t,n)=>{var r={"./en_US.json":466,"./zh_TW.json":549};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=283},57:(e,t,n)=>{var r={"./common/locale/en_US.json":466,"./common/locale/zh_TW.json":549,"./index-page/locale/en_US.json":115,"./index-page/locale/zh_TW.json":627,"./record-viewer/locale/en_US.json":903,"./record-viewer/locale/zh_TW.json":141};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id=57},466:e=>{"use strict";e.exports=JSON.parse('{"locale.name":"English (US)"}')},549:e=>{"use strict";e.exports=JSON.parse('{"locale.name":"繁體中文"}')},115:e=>{"use strict";e.exports=JSON.parse('{"main.title":"About CHUNITHM Tools","intro.title":"About CHUNITHM Tools","intro.about":"With the bookmarklet, you can look for a variety of play records on CHUNITHM, including your <em>best record</em>, <em>recent play history</em>, etc. Combining with the song constant data, you can even view details of your in-game <em>rating</em>.","intro.contact":"More functionalities are expected, and we will keep updating the bookmarklet tool for your best experience. If you have any idea, or if you see something needed improvements, feel free to DM the author <a href=\\"https://twitter.com/dogeon188\\">Dogeon</a>.","howto.title":"How To Use CHUNITHM Bookmarklet","howto.step.copyLink":"Copy the following link.","howto.step.copyLink.button":"Click me to COPY","howto.step.bookmarkAdd":"Add this page to your bookmarks, and rename it to <em>CHUNI TOOLS</em>.","howto.step.bookmarkEdit":"Open your bookmark list, found the added bookmark, then <em>Edit</em> the bookmark, clear the original link, paste the link you just copied, and finally click <em>Save</em>.","howto.step.gotoNet":"Navigate to <a href=\\"https://chunithm-net-eng.com/mobile/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\">CHUNITHM-NET</a>. If you haven\'t logged-in to CHUNITHM-NET before, you will have to first log-in to CHUNITHM-NET. <a href=\\"https://chunithm.fandom.com/zh/wiki/CHUNITHM-NET?variant=zh-tw#Aime_%E5%B8%B3%E8%99%9F%E7%B6%81%E5%AE%9A\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\">How to log-in to CHUNITHM-NET？ (Chinese)</a>","howto.step.run":"After you successfully logged-in, open your bookmark list <em>on the CHUNITHM-NET page</em>, found the <em>CHUNI TOOLS</em> bookmark you just added, then click it.","howto.step.done":"Now there should be a button at the top of the page, as shown in the picture below. <em>Click the button</em>, it will automatically navigate you to a new tab, where all the magic happens.","howto.step.done.imgAlt":"Just click the new button.","howto.afterward":"After you follow all the steps and successfully open the record viewer for the first time, you\'ll just have to repeat <em>step 4 to step 6</em>. If you face any problem when using the bookmarklet, just DM the author via Twitter or Discord.","footer.chooseLang":"Choose Language","footer.source":"Source code & this page is hosted on <a href=\\"https://github.com/Dogeon188/chuni-tools\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\">GitHub</a>"}')},627:e=>{"use strict";e.exports=JSON.parse('{"main.title":"關於 CHUNITHM 書籤小工具","intro.title":"關於 CHUNITHM 書籤小工具","intro.about":"透過這個書籤小工具，您可以查詢自己在中二節奏的各式遊玩記錄，包括歌曲的<em>最佳記錄彙整</em>、<em>最近遊玩的歌曲記錄</em>等，結合定數資料算出您在遊戲中的<em>評價（Rating）</em>。","intro.contact":"我們預計會在未來新增更多的功能，並且持續改進本工具，敬請期待！若是有任何改進的建議，或是什麼新的點子，也都歡迎私訊告訴本工具的作者 <a href=\\"https://twitter.com/dogeon188\\">Dogeon</a>，他會非常感激的。<del>如果能夠幫忙奉獻肝臟的話那就更好了</del>","howto.title":"如何使用 CHUNITHM 書籤小工具","howto.step.copyLink":"複製以下的連結：","howto.step.copyLink.button":"點我直接複製","howto.step.bookmarkAdd":"將本頁面新增至書籤，命名為<em>CHUNI TOOLS</em>。","howto.step.bookmarkEdit":"打開書籤列表，找到您剛剛新增的書籤，點選<em>編輯書籤</em>，將原本的連結清除，<em>貼上稍早複製的連結</em>，然後按下<em>儲存</em>。","howto.step.gotoNet":"前往<a href=\\"https://chunithm-net-eng.com/mobile/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\">CHUNITHM-NET</a>。如果您在此前沒有登入並使用過 CHUNITHM-NET，此時您需要先依照網頁的指示登入。<a href=\\"https://chunithm.fandom.com/zh/wiki/CHUNITHM-NET?variant=zh-tw#Aime_%E5%B8%B3%E8%99%9F%E7%B6%81%E5%AE%9A\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\">如何登入CHUNITHM-NET？</a>","howto.step.run":"確定成功登入之後，<em>在 CHUNITHM-NET 的分頁</em>打開書籤列表，找到您剛剛新增的<em>CHUNI TOOLS</em>書籤，並且按下它。","howto.step.done":"此時最上方應該會出現一個深色的按鈕（如下圖），勇敢的<em>按下去</em>，它就會在新分頁開啟查分器，接下來您就可以盡情使用本工具了。","howto.step.done.imgAlt":"會有按鈕在上面，按下去","howto.afterward":"照著上述的步驟操作完之後，將來再次使用就只需要操作<em>第4步至第6步</em>即可，不需要再複製那一長串的連結了。若是在操作的過程中遇到任何問題，也都隨時歡迎透過推特或Discord聯繫作者。","footer.chooseLang":"選擇語言","footer.source":"本網站透過GitHub Pages架設，原始碼可以在<a href=\\"https://github.com/Dogeon188/chuni-tools\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\">GitHub</a>找到。"}')},903:e=>{"use strict";e.exports=JSON.parse('{"main.title":"CHUNITHM Record Viewer","loading.constData":"Used song constant data: {{name}}","loading.error.serviceDown":"CHUNITHM-NET service is currently unavailable.<br/>Please come back later.","loading.error.rejected":"Oops! It seems that your CHUNITHM-NET just went dead.<br/>It\'s probably because you opened it somewhere else.<br/><em>Reload the page</em>, <em>re-login CHUNITHM-NET</em><br/>or <em>re-run the bookmarklet</em> might help...","loading.error.timeout":"Oh no! Looks like we\'ve lost connection with Houston.<br/>You probably have accidentally navigated the original CHUNITHM-NET page to somewhere else.<br/>Please <em>re-open CHUNITHM-NET</em> and <em>run the bookmarklet again</em>.<br/>Remember not to throw away the original page again!","loading.error.noopener":"Looks like you are at the wrong place!<br/>To use the record viewer, please properly<br/><em>open CHUNITHM-NET</em> and <em>run the bookmarklet</em>.<br/>Last but not least, <em>make sure you clicked the button</em>,<br/>rather than opening a new tab via mid-click, etc.<br/><br/>If you\'ve actually just <em>accidentally closed</em> the original CHUNITHM-NET page, rather than going the wrong way,<br/>please close this page, and then try it again.<br/><em>Don\'t close it</em> again this time!","loading.error.unknown":"Ughhh... We got some happy accident.<br/>Please <em>screenshot or copy the error message</em> to the author,<br/>and hopefully he will figure it out.","header.title.dl":"Save or share B40 as image","header.title.constData":"Change song constant data","header.title.settings":"Open settings","settings.main.title":"Settings","settings.main.reset":"Reset Settings","settings.filter.title":"Filter","settings.filter.const":"By Chart Constant","settings.filter.diff":"By Difficulty","settings.filter.diff.warn":"*should select at least one","settings.filter.diff.notify":"*Filtering difficulties might cause the \\"Best 30\\" data to be inaccurate.","settings.filter.genre":"By Genre","settings.filter.genre.all":"Toggle ALL","settings.data.title":"Game Data","settings.data.constData":"Chart Constant Data to Use","settings.data.constData.intl":"International Ver. (NEW+)","settings.data.constData.jp":"Japanese Ver. (SUN)","settings.data.overpower":"Show Over Power","settings.data.overpower.notify":"*It will also show unplayed song when toggled on.<br/>*Total over power might differ from the official one, if some of the songs are not unlocked yet.","settings.data.playcount":"Show Play Count","settings.ui.title":"User Interface","settings.ui.locale":"Language","settings.ui.theme":"Theme","player.generic.generatedAt":"Generated At","player.best.playCount":"Play Count","player.best.best30":"Best 30","player.best.maxPossible":"Max Possible","player.recent.best10":"Recent 10","player.recent.history10":"History 10","player.recent.history30":"History 30","record.head.playOrder":"Played Time","record.head.order":"#","record.head.title":"Title","record.head.const":"Const","record.head.overpower":"OP","record.head.overpowerPercent":"OP%","record.head.rank":"Rank","record.head.score":"Score","record.head.rating":"Rating","record.head.ajfc":"AJ","record.head.playcount":"Plays","record.fetch.fetching":"Fetching record for <span style=\\"color:var(--theme-song-{{diff}});\\">{{diffStr}}</span> difficulty...","record.fetch.diff.ult":"ULTIMA","record.fetch.diff.mas":"MASTER","record.fetch.diff.exp":"EXPERT","record.fetch.diff.adv":"ADVANCED","record.fetch.diff.bas":"BASIC","record.fetch.unknown":"Found unknown song(s):\\n\\n{{songs}}\\n\\nPlease contact the author at Twitter or Discord.","record.fetch.error":"<span style=\\"color:red;\\">Some error occured when fetching best record!<br/>You probably need to reload the page now.</span>","playcount.fetch.button":"Fetch","playcount.fetch.progress":"Fetching play count... ({{progress}}/{{all}})","playcount.fetch.error":"<span style=\\"color:red;\\">Some error occured when fetching play count!<br/>You probably need to reload the page now.</span>","share.error":"Something went wrong when converting your scores to PNG. Please ask the author to fix it."}')},141:e=>{"use strict";e.exports=JSON.parse('{"main.title":"CHUNITHM 查分器","loading.constData":"使用來自 {{name}} 的定數資料","loading.error.serviceDown":"CHUNITHM-NET 目前正在停服維修。<br/>請在其可以使用的時段執行本程式。","loading.error.rejected":"哇，看來你的CHUNITHM-NET死掉了，<br/>這可能是因為您在別處也開啟了CHUNITHM-NET。<br/>可以考慮 <em>重新整理</em>、<em>重新登入 CHUNITHM-NET</em><br/>或者是 <em>重新執行一次書籤小工具</em> 再試試。","loading.error.timeout":"糟了，我們和休士頓失去了聯繫！<br/>這可能是因為您將原本CHUNITHM-NET的分頁重新整理，或跳轉至其他頁面所導致的。<br/>請<em>重新開啟CHUNITHM-NET</em>並<em>重新執行本程式</em>。<br/>這次別把原本的分頁弄走了啊！","loading.error.noopener":"看來您走錯路了！<br/>要使用本查分器，請<em>開啟CHUNITHM-NET</em>並<em>執行書籤小工具</em>，<br/>然後<em>確實地點下按鈕</em>，而非使用滑鼠中鍵等方式另開新分頁。<br/><br/>若是您其實是不慎<em>關閉了原本CHUNITHM-NET的分頁</em>，<br/>請關閉此分頁後，再重新執行一次書籤小工具，並且<em>保持原本的分頁開啟</em>。","loading.error.unknown":"哇，看來我們這裡出了一點小意外，<br/>請<em>將以下的錯誤訊息截圖或複製</em>給本查分器的作者，<br/>希望他能夠幫到你。","header.title.dl":"將B40記錄儲存為照片","header.title.constData":"切換歌曲定數資料","header.title.settings":"設定","settings.main.title":"設定","settings.main.reset":"重置設定","settings.filter.title":"歌曲篩選","settings.filter.const":"依 譜面定數","settings.filter.diff":"依 譜面難度","settings.filter.diff.warn":"*至少選一個吧割","settings.filter.diff.notify":"*依照難度篩選，可能會使得B30的記錄變得不準確","settings.filter.genre":"依 歌曲類別","settings.filter.genre.all":"全部開啟/關閉","settings.data.title":"遊戲數據","settings.data.constData":"使用的定數資料","settings.data.constData.intl":"國際版 (NEW+)","settings.data.constData.jp":"日版 (SUN)","settings.data.overpower":"顯示OVER POWER","settings.data.overpower.notify":"*開啟時，未遊玩的歌曲也會一併顯示<br/>*若是有尚未解鎖的歌曲，OVER POWER的總和可能會與官方記錄有差別","settings.data.playcount":"顯示個別歌曲遊玩次數","settings.ui.title":"使用者介面","settings.ui.locale":"語言","settings.ui.theme":"佈景主題","player.generic.generatedAt":"生成日期","player.best.playCount":"遊玩道數","player.best.best30":"BEST 30","player.best.maxPossible":"不推分可達到","player.recent.best10":"RECENT 10","player.recent.history10":"遊玩記錄前10","player.recent.history30":"遊玩記錄前30","record.head.playOrder":"遊玩時間","record.head.order":"#","record.head.title":"曲名","record.head.const":"定數","record.head.overpower":"OP","record.head.overpowerPercent":"OP%","record.head.rank":"等級","record.head.score":"成績","record.head.rating":"評分","record.head.ajfc":"AJ","record.head.playcount":"次數","record.fetch.fetching":"正在載入 <span style=\\"color:var(--theme-song-{{diff}});\\">{{diffStr}}</span> 資料……","record.fetch.diff.ult":"黑譜 (ULTIMA)","record.fetch.diff.mas":"紫譜 (MASTER)","record.fetch.diff.exp":"紅譜 (EXPERT)","record.fetch.diff.adv":"黃譜 (ADVANCED)","record.fetch.diff.bas":"綠譜 (BASIC)","record.fetch.unknown":"以下是我們沒辦法找到定數資料的歌曲：\\n{{songs}}\\n請投過推特或Discord等方式聯繫本查分器的製作者。","record.fetch.error":"<span style=\\"color:red;\\">在取得歌曲遊玩記錄時出現問題，<br/>您可能需要重新整理頁面後再試一次。</span>","playcount.fetch.button":"取得","playcount.fetch.progress":"正在取得歌曲遊玩次數…… ({{progress}}/{{all}})","playcount.fetch.error":"<span style=\\"color:red;\\">在取得歌曲遊玩次數時出現問題，<br/>您可能需要重新整理頁面後再試一次。</span>","share.error":"在嘗試將您的成績轉換為圖檔時出現錯誤，請聯繫作者處理。"}')}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(){}const t=e=>e;function r(e){return e()}function o(){return Object.create(null)}function s(e){e.forEach(r)}function a(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e){return 0===Object.keys(e).length}function c(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function d(e){let t;return c(e,(e=>t=e))(),t}function u(e,t,n){e.$$.on_destroy.push(c(t,n))}function f(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function h(e,t,n){return e.set(n),t}const p="undefined"!=typeof window;let g=p?()=>window.performance.now():()=>Date.now(),m=p?e=>requestAnimationFrame(e):e;const v=new Set;function b(e){v.forEach((t=>{t.c(e)||(v.delete(t),t.f())})),0!==v.size&&m(b)}let w=!1;function y(e,t){e.appendChild(t)}function x(e,t,n){const r=k(e);if(!r.getElementById(t)){const e=N("style");e.id=t,e.textContent=n,S(r,e)}}function k(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function $(e){const t=N("style");return S(k(e),t),t.sheet}function S(e,t){return y(e.head||e,t),t.sheet}function T(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function H(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function N(e){return document.createElement(e)}function E(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function M(e){return document.createTextNode(e)}function z(){return M(" ")}function j(){return M("")}function A(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function L(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function U(e){return""===e?null:+e}function O(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function _(e,t){e.value=null==t?"":t}function P(e,t,n,r){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function D(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}e.selectedIndex=-1}function I(e,t,n){e.classList[n?"add":"remove"](t)}class R{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=E(t.nodeName):this.e=N(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)T(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(C)}}const F=new Map;let B,q=0;function V(e,t,n,r,o,s,a,i=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*s(e);c+=100*e+`%{${a(r,1-r)}}\n`}const d=c+`100% {${a(n,1-n)}}\n}`,u=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(d)}_${i}`,f=k(e),{stylesheet:h,rules:p}=F.get(f)||function(e,t){const n={stylesheet:$(t),rules:{}};return F.set(e,n),n}(f,e);p[u]||(p[u]=!0,h.insertRule(`@keyframes ${u} ${d}`,h.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${u} ${r}ms linear ${o}ms 1 both`,q+=1,u}function W(e){B=e}function J(){if(!B)throw new Error("Function called outside component initialization");return B}const X=[],G=[],Y=[],Z=[],Q=Promise.resolve();let K=!1;function ee(e){Y.push(e)}function te(e){Z.push(e)}const ne=new Set;let re,oe=0;function se(){if(0!==oe)return;const e=B;do{try{for(;oe<X.length;){const e=X[oe];oe++,W(e),ae(e.$$)}}catch(e){throw X.length=0,oe=0,e}for(W(null),X.length=0,oe=0;G.length;)G.pop()();for(let e=0;e<Y.length;e+=1){const t=Y[e];ne.has(t)||(ne.add(t),t())}Y.length=0}while(X.length);for(;Z.length;)Z.pop()();K=!1,ne.clear(),W(e)}function ae(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ee)}}function ie(e,t,n){e.dispatchEvent(function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,r,t),o}(`${t?"intro":"outro"}${n}`))}const le=new Set;let ce;function de(){ce={r:0,c:[],p:ce}}function ue(){ce.r||s(ce.c),ce=ce.p}function fe(e,t){e&&e.i&&(le.delete(e),e.i(t))}function he(e,t,n,r){if(e&&e.o){if(le.has(e))return;le.add(e),ce.c.push((()=>{le.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}const pe={duration:0};function ge(n,r,o,i){const l={direction:"both"};let c=r(n,o,l),d=i?0:1,u=null,f=null,h=null;function p(){h&&function(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=n.length-r.length;o&&(e.style.animation=r.join(", "),q-=o,q||m((()=>{q||(F.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&C(t)})),F.clear())})))}(n,h)}function w(e,t){const n=e.b-d;return t*=Math.abs(n),{a:d,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function y(r){const{delay:o=0,duration:a=300,easing:i=t,tick:l=e,css:y}=c||pe,x={start:g()+o,b:r};r||(x.group=ce,ce.r+=1),u||f?f=x:(y&&(p(),h=V(n,d,r,a,o,i,y)),r&&l(0,1),u=w(x,a),ee((()=>ie(n,r,"start"))),function(e){let t;0===v.size&&m(b),new Promise((n=>{v.add(t={c:e,f:n})}))}((e=>{if(f&&e>f.start&&(u=w(f,a),f=null,ie(n,u.b,"start"),y&&(p(),h=V(n,d,u.b,u.duration,0,i,c.css))),u)if(e>=u.end)l(d=u.b,1-d),ie(n,u.b,"end"),f||(u.b?p():--u.group.r||s(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;d=u.a+u.d*i(t/u.duration),l(d,1-d)}return!(!u&&!f)})))}return{run(e){a(c)?(re||(re=Promise.resolve(),re.then((()=>{re=null}))),re).then((()=>{c=c(l),y(e)})):y(e)},end(){p(),u=f=null}}}const me="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;let ve;function be(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function we(e){e&&e.c()}function ye(e,t,n,o){const{fragment:i,after_update:l}=e.$$;i&&i.m(t,n),o||ee((()=>{const t=e.$$.on_mount.map(r).filter(a);e.$$.on_destroy?e.$$.on_destroy.push(...t):s(t),e.$$.on_mount=[]})),l.forEach(ee)}function xe(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ke(t,n,r,a,i,l,c,d=[-1]){const u=B;W(t);const f=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:i,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:o(),dirty:d,skip_bound:!1,root:n.target||u.$$.root};c&&c(f.root);let h=!1;if(f.ctx=r?r(t,n.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&i(f.ctx[e],f.ctx[e]=o)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](o),h&&function(e,t){-1===e.$$.dirty[0]&&(X.push(e),K||(K=!0,Q.then(se)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],f.update(),h=!0,s(f.before_update),f.fragment=!!a&&a(f.ctx),n.target){if(n.hydrate){w=!0;const e=(p=n.target,Array.from(p.childNodes));f.fragment&&f.fragment.l(e),e.forEach(C)}else f.fragment&&f.fragment.c();n.intro&&fe(t.$$.fragment),ye(t,n.target,n.anchor,n.customElement),w=!1,se()}var p;W(u)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(ve=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(r).filter(a);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){xe(this,1),this.$destroy=e}$on(t,n){if(!a(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){this.$$set&&!l(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class $e{$destroy(){xe(this,1),this.$destroy=e}$on(t,n){if(!a(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){this.$$set&&!l(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Se(e,t){if(!e)throw new Error("Target window does not exist");return(n,r,o)=>{const s={action:n,payload:r};o&&(s.uuid=o),e.postMessage(s,t)}}const Te="https://chunithm-net-eng.com";var Ce;!function(e){e.basic="BAS",e.advanced="ADV",e.expert="EXP",e.master="MAS",e.ultima="ULT"}(Ce||(Ce={}));const He=Object.values(Ce);var Ne;!function(e){e["P & A"]="0",e.niconico="2",e["東方Project"]="3",e.ORIGINAL="5",e.VARIETY="6",e["イロドリ"]="7",e["ゲキマイ"]="9"}(Ne||(Ne={}));const Ee=Object.keys(Ne),Me=[];function ze(t,n=e){let r;const o=new Set;function s(e){if(i(t,e)&&(t=e,r)){const e=!Me.length;for(const e of o)e[1](),Me.push(e,t);if(e){for(let e=0;e<Me.length;e+=2)Me[e][0](Me[e+1]);Me.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(a,i=e){const l=[a,i];return o.add(l),1===o.size&&(r=n(s)||e),a(t),()=>{o.delete(l),0===o.size&&(r(),r=null)}}}}function je(t,n,r){const o=!Array.isArray(t),i=o?[t]:t,l=n.length<2;return{subscribe:ze(r,(t=>{let r=!1;const d=[];let u=0,f=e;const h=()=>{if(u)return;f();const r=n(o?d[0]:d,t);l?t(r):f=a(r)?r:e},p=i.map(((e,t)=>c(e,(e=>{d[t]=e,u&=~(1<<t),r&&h()}),(()=>{u|=1<<t}))));return r=!0,h(),function(){s(p),f()}})).subscribe}}var Ae;function Le(e,t,n,r=(()=>{})){let o=localStorage[e];void 0!==o&&n.includes(o)||(localStorage[e]=t,o=localStorage[e]);const{subscribe:s,set:a,update:i}=ze(o);return{subscribe:s,set(t){a(t),localStorage[e]=t,r(t)},update:i,reset(){this.set(t)},accepts:n}}function Ue(e,t,n,r,o=(()=>{})){let s=localStorage[e],a=parseFloat(s);(void 0===s||a>r||a<n)&&(localStorage[e]=t,s=localStorage[e],a=parseFloat(s));const{subscribe:i,set:l,update:c}=ze(a);return{subscribe:i,set(t){l(t),localStorage[e]=t,o(t)},update:c,reset(){this.set(t)}}}function Oe(e,t,n=(()=>{})){let r=localStorage[e];(void 0===r||"true"!==r&&"false"!==r)&&(localStorage[e]=t,r=localStorage[e]);let o=JSON.parse(r);const{subscribe:s,set:a,update:i}=ze(o);return{subscribe:s,set(t){a(t),localStorage[e]=t,n(t)},update:i,reset(){this.set(t)},toggle(){this.update((e=>!e))}}}function _e(e,t,n=(()=>{})){let r=localStorage[e];null==r&&(localStorage[e]=JSON.stringify(t),r=localStorage[e]);let o=JSON.parse(r),s=Object.keys(t);Object.keys(o).every((e=>s.includes(e)&&"boolean"==typeof o[e]))||(localStorage[e]=JSON.stringify(t),r=localStorage[e]),o=JSON.parse(r);const{subscribe:a,set:i,update:l}=ze(o);return{subscribe:a,set(t){i(t),localStorage[e]=JSON.stringify(t),n(t)},update:l,reset(){this.set(t)}}}!function(e){e.en_US="en_US",e.zh_TW="zh_TW"}(Ae||(Ae={}));const Pe=Le("theme","dark",["dark","purple"]),De=Le("language",function(){const e=new URLSearchParams(location.search);if(e.get("lang"))return e.get("lang").startsWith("zh")?Ae.zh_TW:Ae.en_US;return function(){switch(localStorage.language){case Ae.en_US:return Ae.en_US;case Ae.zh_TW:return Ae.zh_TW}return null}()||(navigator.language.startsWith("zh")?Ae.zh_TW:Ae.en_US)}(),Object.values(Ae));function Ie(e,t){return e.slice(0,t).reduce(((e,t)=>e+t),0)/t}function Re(e){return(e.slice(0,30).reduce(((e,t)=>e+t),0)+10*e[0])/40}const Fe={default:(e,t)=>t.rating-e.rating||t.const-e.const||e.score-t.score,playOrder:(e,t)=>t.timestamp-e.timestamp,title:(e,t)=>e.title<t.title?-1:e.title>t.title?1:He.indexOf(t.difficulty)-He.indexOf(e.difficulty),const:(e,t)=>t.const-e.const,op:(e,t)=>t.op-e.op,opp:(e,t)=>t.op/t.opmax-e.op/e.opmax,score:(e,t)=>t.score-e.score,rating:(e,t)=>e.order-t.order,aj:(e,t)=>{if(e.clear==t.clear)return e.order-t.order;const n=["","FC","AJ"];return n.indexOf(t.clear)-n.indexOf(e.clear)},playcount:(e,t)=>null==e.playCount?100:null==t.playCount?-100:e.playCount==t.playCount?e.order-t.order:t.playCount-e.playCount};async function Be(e,t=!1){const n=e,r=await d(vt),o=[];return n.map((e=>{if("WE"===e.difficulty)return e.const=-1,void(e.rating=0);let t=r[e.title];if(void 0===t&&(e.title=e.title.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'"),t=r[e.title]),void 0===t)return o.push(e),e.const=0,void(e.rating=0);e.const=t[e.difficulty],e.rating=function(e){if(e.score<0)return 0;let t=100*e.const;const n=[[101e4,t+215],[1009e3,t+215],[1007500,t+200],[1005e3,t+150],[1e6,t+100],[975e3,t],[925e3,t-300],[9e5,t-500],[8e5,(t-500)/2],[5e5,0],[0,0]];let r=1;n.some(((t,n)=>(r=n,e.score>t[0])));const o=n[r-1],s=n[r],a=s[1]+(o[1]-s[1])/(o[0]-s[0])*(e.score-s[0]);return Math.floor(Math.max(0,a))/100}(e),e.op=function(e){let t={AJ:1,FC:.5,"":0}[e.clear];return 101e4==e.score?5*(e.const+3):e.score>1007500?5*(e.const+2)+t+.0015*(e.score-1007500):5*e.rating+t}(e),e.opmax=5*(e.const+3),e.oppercent=100*e.op/e.opmax,e.rank=function(e){const t=[[101e4,"MAX"],[1009e3,"SSS+"],[1007500,"SSS"],[1005e3,"SS+"],[1e6,"SS"],[99e4,"S+"],[975e3,"S"],[95e4,"AAA"],[925e3,"AA"],[9e5,"A"],[8e5,"BBB"],[7e5,"BB"],[6e5,"B"],[5e5,"C"],[0,"D"]];let n=0;return t.some(((t,r)=>(n=r,e>=t[0]))),t[n][1]}(e.score),e.genre=t.genre})),t&&o.length&&alert(d(ct)("record.fetch.unknown",{songs:o.map((e=>`    ${e.title} ${e.difficulty}`)).join("\n")})),n.sort(Fe.default),n.map(((e,t)=>{e.order=t+1})),n}c(De,(()=>{try{Se(window.opener,Te)("saveConfig",{data:{lang:d(De)}})}catch(e){console.error(e)}}));const qe=Ue("filterConstMin",1,1,15.4),Ve=Ue("filterConstMax",15.4,1,15.4),We=_e("filterDiff",{BAS:!1,ADV:!1,EXP:!0,MAS:!0,ULT:!0},(()=>{kt.updateDiffFilter()}));let Je={};for(let e of Ee)Je[e]=!0;const Xe=_e("filterGenre",Je),Ge=Le("usedConstData","intl",["intl","jp"],(()=>{wt.updateConstData(),yt.updateConstData(),kt.updateConstData()})),Ye=Oe("showOverPower",!1),Ze=Oe("showPlaycount",!1),Qe=[Pe,De,Ve,qe,We,Xe,Ge,Ye,Ze],Ke={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let et;const tt=new Uint8Array(16);function nt(){if(!et&&(et="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!et))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return et(tt)}const rt=[];for(let e=0;e<256;++e)rt.push((e+256).toString(16).slice(1));const ot=function(e,t,n){if(Ke.randomUUID&&!t&&!e)return Ke.randomUUID();const r=(e=e||{}).random||(e.rng||nt)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(rt[e[t+0]]+rt[e[t+1]]+rt[e[t+2]]+rt[e[t+3]]+"-"+rt[e[t+4]]+rt[e[t+5]]+"-"+rt[e[t+6]]+rt[e[t+7]]+"-"+rt[e[t+8]]+rt[e[t+9]]+"-"+rt[e[t+10]]+rt[e[t+11]]+rt[e[t+12]]+rt[e[t+13]]+rt[e[t+14]]+rt[e[t+15]]).toLowerCase()}(r)};class st{constructor(e){this.resolve=()=>{},this.reject=()=>{},this.handled=!1,this.retryTime=0,this.uuid=ot(),this.payload=e;let t=this;this.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n}));try{const t=Se(window.opener,Te),n=()=>{this.handled||(this.retryTime<3?(this.retryTime+=1,t("request",e),this.timeout=setTimeout(n,2e3)):this.reject(new Error("Request timed out: 6000 ms")))};this.timeout=setTimeout(n,2e3),t("request",e,this.uuid)}catch(e){this.reject(e)}}}const at=new Map;async function it(e,t,n){const r=new st({target:e,data:{difficulty:t,idx:n}});return at.set(r.uuid,r),r.promise}function lt(e=!1){const{subscribe:t,set:n,update:r}=ze(e);return{subscribe:t,set:n,update:r,toggle(){r((e=>!e))}}}window.addEventListener("message",(function(e){const{action:t,payload:n,uuid:r}=e.data;"ping"===t&&(at.has(r)||console.error("Unexpected response: "+r),at.get(r).handled=!0,clearTimeout(at.get(r)?.timeout)),"respond"===t&&(at.has(r)||console.error("Unexpected response: "+r),n.error?(console.error("Error on handling request: "+n.target+"\n",n.error),at.get(r)?.reject(n.error)):at.get(r)?.resolve(n.data),at.delete(r))}),!1);const{t:ct,translationNames:dt}=function(e,t){const{translations:r,translationNames:o}=function(e){const t=new Map,r=new Map;for(let o of De.accepts){const s=Object.entries(n(283)(`./${o}.json`)),a=Object.entries(n(57)(`./${e}/locale/${o}.json`));t.set(o,new Map(s.concat(a))),r.set(o,t.get(o)?.get("locale.name")||"Undefined locale name")}return{translations:t,translationNames:r}}("record-viewer");return{t:je(t,(e=>(t,n={})=>function(e,t,n){if(!t)throw new Error("No key specified");let o=r.get(e)?.get(t);return void 0===o?(console.error(`No translation found for ${e}.${t}`),t):(Object.keys(n).map((e=>{const t=new RegExp(`{{${e}}}`,"g");o=o?.replace(t,n[e])})),o)}(e,t,n))),translationNames:o}}(0,De),ut=ze("best"),ft=lt(!1),ht=ze(""),pt=lt(!1),gt=lt(!1),mt={};for(let e of Ge.accepts)mt[e]=void 0;const vt=je(Ge,(async e=>(mt[e]||(mt[e]=await fetch(`../data/song-const/${e}.json`).then((async e=>await e.json()))),mt[e])));function bt(e){const{subscribe:t,set:n}=ze([]);let r=!1,o=[];return{set:n,subscribe:t,async init(){o=await it(e),n(await Be(o)),r=!0},async updateConstData(){r&&n(await Be(o))}}}const wt=bt("recentRecord"),yt=bt("playHistory"),xt=(()=>{const{subscribe:e,set:t}=ze({});return{set:t,subscribe:e,async init(){t(await it("playerStats"))}}})(),kt=(()=>{const{subscribe:e,set:t}=ze([]);let n,r=!1,o=[];return{set:t,subscribe:e,async init(){n=JSON.parse(JSON.stringify(d(We)));for(let e of He)n[e]&&(ht.set(d(ct)("record.fetch.fetching",{diff:e.toLowerCase(),diffStr:d(ct)("record.fetch.diff."+e.toLowerCase())})),Array.prototype.push.apply(o,await it("bestRecord",e)));t(await Be(o,!0)),r=!0},async updateConstData(){r&&t(await Be(o,!0))},async updateDiffFilter(){if(!r)return;gt.set(!0),pt.set(!0);let e=!1;try{for(let t of He)!n[t]&&d(We)[t]&&(n[t]=!0,ht.set(d(ct)("record.fetch.fetching",{diff:t.toLowerCase(),diffStr:d(ct)("record.fetch.diff."+t.toLowerCase())})),Array.prototype.push.apply(o,await it("bestRecord",t)),e=!0);e&&t(await Be(o,!0)),pt.set(!1),gt.set(!1)}catch{gt.set(!1),ht.set(d(ct)("record.fetch.error")),setTimeout((()=>{pt.set(!1)}),6e3)}}}})(),$t=(()=>{let e=0;return()=>(e+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${e}`)})();function St(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}function Tt(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Ct(e,t={}){return{width:t.width||function(e){const t=Tt(e,"border-left-width"),n=Tt(e,"border-right-width");return e.clientWidth+t+n}(e),height:t.height||function(e){const t=Tt(e,"border-top-width"),n=Tt(e,"border-bottom-width");return e.clientHeight+t+n}(e)}}const Ht=16384;function Nt(e){return new Promise(((t,n)=>{const r=new Image;r.decode=()=>t(r),r.onload=()=>t(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e}))}const Et=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||Et(n,t))};function Mt(e,t,n){const r=window.getComputedStyle(e,n),o=r.getPropertyValue("content");if(""===o||"none"===o)return;const s=$t();try{t.className=`${t.className} ${s}`}catch(e){return}const a=document.createElement("style");a.appendChild(function(e,t,n){const r=`.${e}:${t}`,o=n.cssText?function(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}(n):function(e){return St(e).map((t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?" !important":""};`)).join(" ")}(n);return document.createTextNode(`${r}{${o}}`)}(s,n,r)),t.appendChild(a)}const zt="application/font-woff",jt="image/jpeg",At={woff:zt,woff2:zt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:jt,jpeg:jt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Lt(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return At[t]||""}function Ut(e){return-1!==e.search(/^(data:)/)}function Ot(e,t){return`data:${t};base64,${e}`}async function _t(e,t,n){const r=await fetch(e,t);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const o=await r.blob();return new Promise(((e,t)=>{const s=new FileReader;s.onerror=t,s.onloadend=()=>{try{e(n({res:r,result:s.result}))}catch(e){t(e)}},s.readAsDataURL(o)}))}const Pt={};async function Dt(e,t,n){const r=function(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}(e,t,n.includeQueryParams);if(null!=Pt[r])return Pt[r];let o;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const r=await _t(e,n.fetchRequestInit,(({res:e,result:n})=>(t||(t=e.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(n))));o=Ot(r,t)}catch(t){o=n.imagePlaceholder||"";let r=`Failed to fetch resource: ${e}`;t&&(r="string"==typeof t?t:t.message),r&&console.warn(r)}return Pt[r]=o,o}async function It(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then((e=>async function(e,t){return Et(e,HTMLCanvasElement)?async function(e){const t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):Nt(t)}(e):Et(e,HTMLVideoElement)?async function(e,t){if(e.currentSrc){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==n||n.drawImage(e,0,0,t.width,t.height),Nt(t.toDataURL())}const n=e.poster,r=Lt(n);return Nt(await Dt(n,r,t))}(e,t):Et(e,HTMLIFrameElement)?async function(e){var t;try{if(null===(t=null==e?void 0:e.contentDocument)||void 0===t?void 0:t.body)return await It(e.contentDocument.body,{},!0)}catch(e){}return e.cloneNode(!1)}(e):e.cloneNode(!1)}(e,t))).then((n=>async function(e,t,n){var r,o;let s=[];var a;return s=null!=(a=e).tagName&&"SLOT"===a.tagName.toUpperCase()&&e.assignedNodes?St(e.assignedNodes()):Et(e,HTMLIFrameElement)&&(null===(r=e.contentDocument)||void 0===r?void 0:r.body)?St(e.contentDocument.body.childNodes):St((null!==(o=e.shadowRoot)&&void 0!==o?o:e).childNodes),0===s.length||Et(e,HTMLVideoElement)||await s.reduce(((e,r)=>e.then((()=>It(r,n))).then((e=>{e&&t.appendChild(e)}))),Promise.resolve()),t}(e,n,t))).then((t=>function(e,t){return Et(t,Element)&&(function(e,t){const n=t.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):St(r).forEach((o=>{let s=r.getPropertyValue(o);if("font-size"===o&&s.endsWith("px")){const e=Math.floor(parseFloat(s.substring(0,s.length-2)))-.1;s=`${e}px`}Et(e,HTMLIFrameElement)&&"display"===o&&"inline"===s&&(s="block"),"d"===o&&t.getAttribute("d")&&(s=`path(${t.getAttribute("d")})`),n.setProperty(o,s,r.getPropertyPriority(o))}))}(e,t),function(e,t){Mt(e,t,":before"),Mt(e,t,":after")}(e,t),function(e,t){Et(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Et(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(Et(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find((t=>e.value===t.getAttribute("value")));r&&r.setAttribute("selected","")}}(e,t)),t}(e,t))).then((e=>async function(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const r={};for(let o=0;o<n.length;o++){const s=n[o].getAttribute("xlink:href");if(s){const n=e.querySelector(s),o=document.querySelector(s);n||!o||r[s]||(r[s]=await It(o,t,!0))}}const o=Object.values(r);if(o.length){const t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const r=document.createElementNS(t,"defs");n.appendChild(r);for(let e=0;e<o.length;e++)r.appendChild(o[e]);e.appendChild(n)}return e}(e,t))):null}const Rt=/url\((['"]?)([^'"]+?)\1\)/g,Ft=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Bt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function qt(e){return-1!==e.search(Rt)}async function Vt(e,t,n){if(!qt(e))return e;const r=function(e,{preferredFontFormat:t}){return t?e.replace(Bt,(e=>{for(;;){const[n,,r]=Ft.exec(e)||[];if(!r)return"";if(r===t)return`src: ${n};`}})):e}(e,n),o=function(e){const t=[];return e.replace(Rt,((e,n,r)=>(t.push(r),e))),t.filter((e=>!Ut(e)))}(r);return o.reduce(((e,r)=>e.then((e=>async function(e,t,n,r,o){try{const s=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),t&&(r.href=t),o.href=e,o.href}(t,n):t,a=Lt(t);let i;return i=o?Ot(await o(s),a):await Dt(s,a,r),e.replace(function(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}(t),`$1${i}$3`)}catch(e){}return e}(e,r,t,n)))),Promise.resolve(r))}async function Wt(e,t,n){var r;const o=null===(r=t.style)||void 0===r?void 0:r.getPropertyValue(e);if(o){const r=await Vt(o,null,n);return t.style.setProperty(e,r,t.style.getPropertyPriority(e)),!0}return!1}async function Jt(e,t){Et(e,Element)&&(await async function(e,t){await Wt("background",e,t)||await Wt("background-image",e,t),await Wt("mask",e,t)||await Wt("mask-image",e,t)}(e,t),await async function(e,t){const n=Et(e,HTMLImageElement);if((!n||Ut(e.src))&&(!Et(e,SVGImageElement)||Ut(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,o=await Dt(r,Lt(r),t);await new Promise(((t,r)=>{e.onload=t,e.onerror=r;const s=e;s.decode&&(s.decode=t),"lazy"===s.loading&&(s.loading="eager"),n?(e.srcset="",e.src=o):e.href.baseVal=o}))}(e,t),await async function(e,t){const n=St(e.childNodes).map((e=>Jt(e,t)));await Promise.all(n).then((()=>e))}(e,t))}const Xt={};async function Gt(e){let t=Xt[e];if(null!=t)return t;const n=await fetch(e);return t={url:e,cssText:await n.text()},Xt[e]=t,t}async function Yt(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,o=(n.match(/url\([^)]+\)/g)||[]).map((async o=>{let s=o.replace(r,"$1");return s.startsWith("https://")||(s=new URL(s,e.url).href),_t(s,t.fetchRequestInit,(({result:e})=>(n=n.replace(o,`url(${e})`),[o,e])))}));return Promise.all(o).then((()=>n))}function Zt(e){if(null==e)return[];const t=[];let n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=r.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(r,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=o.exec(n);if(null===e){if(e=s.exec(n),null===e)break;o.lastIndex=s.lastIndex}else s.lastIndex=o.lastIndex;t.push(e[0])}return t}async function Qt(e,t){const n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await async function(e,t){const n=await async function(e,t){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=St(e.ownerDocument.styleSheets),r=await async function(e,t){const n=[],r=[];return e.forEach((n=>{if("cssRules"in n)try{St(n.cssRules||[]).forEach(((e,o)=>{if(e.type===CSSRule.IMPORT_RULE){let s=o+1;const a=Gt(e.href).then((e=>Yt(e,t))).then((e=>Zt(e).forEach((e=>{try{n.insertRule(e,e.startsWith("@import")?s+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})))).catch((e=>{console.error("Error loading remote css",e.toString())}));r.push(a)}}))}catch(o){const s=e.find((e=>null==e.href))||document.styleSheets[0];null!=n.href&&r.push(Gt(n.href).then((e=>Yt(e,t))).then((e=>Zt(e).forEach((e=>{s.insertRule(e,n.cssRules.length)})))).catch((e=>{console.error("Error loading remote stylesheet",e)}))),console.error("Error inlining remote css file",o)}})),Promise.all(r).then((()=>(e.forEach((e=>{if("cssRules"in e)try{St(e.cssRules||[]).forEach((e=>{n.push(e)}))}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}})),n)))}(n,t);return function(e){return e.filter((e=>e.type===CSSRule.FONT_FACE_RULE)).filter((e=>qt(e.style.getPropertyValue("src"))))}(r)}(e,t);return(await Promise.all(n.map((e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return Vt(e.cssText,n,t)})))).join("\n")}(e,t);if(n){const t=document.createElement("style"),r=document.createTextNode(n);t.appendChild(r),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function Kt(e,t={}){const{width:n,height:r}=Ct(e,t),o=await It(e,t,!0);return await Qt(o,t),await Jt(o,t),function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;null!=r&&Object.keys(r).forEach((e=>{n[e]=r[e]}))}(o,t),await async function(e,t,n){const r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return o.setAttribute("width",`${t}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),o.appendChild(s),s.appendChild(e),async function(e){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(e))).then(encodeURIComponent).then((e=>`data:image/svg+xml;charset=utf-8,${e}`))}(o)}(o,n,r)}async function en(e,t={}){const n=await async function(e,t={}){const{width:n,height:r}=Ct(e,t),o=await Kt(e,t),s=await Nt(o),a=document.createElement("canvas"),i=a.getContext("2d"),l=t.pixelRatio||function(){let e,t;try{t=process}catch(e){}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),c=t.canvasWidth||n,d=t.canvasHeight||r;return a.width=c*l,a.height=d*l,t.skipAutoScale||function(e){(e.width>Ht||e.height>Ht)&&(e.width>Ht&&e.height>Ht?e.width>e.height?(e.height*=Ht/e.width,e.width=Ht):(e.width*=Ht/e.height,e.height=Ht):e.width>Ht?(e.height*=Ht/e.width,e.width=Ht):(e.width*=Ht/e.height,e.height=Ht))}(a),a.style.width=`${c}`,a.style.height=`${d}`,t.backgroundColor&&(i.fillStyle=t.backgroundColor,i.fillRect(0,0,a.width,a.height)),i.drawImage(s,0,0,a.width,a.height),a}(e,t),r=await function(e,t={}){return e.toBlob?new Promise((n=>{e.toBlob(n,t.type?t.type:"image/png",t.quality?t.quality:1)})):new Promise((n=>{const r=window.atob(e.toDataURL(t.type?t.type:void 0,t.quality?t.quality:void 0).split(",")[1]),o=r.length,s=new Uint8Array(o);for(let e=0;e<o;e+=1)s[e]=r.charCodeAt(e);n(new Blob([s],{type:t.type?t.type:"image/png"}))}))}(n);return r}const tn="chunithm_b40.png";async function nn(){const e=document.querySelector("main");let t=e?.cloneNode(!0);t.style.width="max-content",t.style.margin="initial",t.querySelectorAll("tbody tr:not(.best40)").forEach((e=>{e.remove()})),t.querySelectorAll(".pc-hidden span").forEach((e=>{e.remove()})),t.querySelectorAll(".wrapper").forEach((e=>e.style.overflow="hidden")),e?.parentElement?.appendChild(t),en(t,{backgroundColor:window.getComputedStyle(document.body).backgroundColor}).then((async e=>{if(t.remove(),null==e)return alert(d(ct)("share.error"));if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const t=new File([e],tn,{type:e.type});navigator?.canShare({files:[t]})&&navigator.share({files:[t]}).catch(console.log)}else{const t=document.createElement("a");t.href=window.URL.createObjectURL(e),t.download=tn,t.click()}}))}function rn(e){x(e,"svelte-iy49t2",".wrapper.svelte-iy49t2{display:flex;-ms-flex-direction:row;flex-direction:row;justify-content:space-between;align-items:center;gap:1em;position:fixed;right:1rem;top:0.6rem}button.svelte-iy49t2{width:2rem;height:2rem;background:var(--theme-border);opacity:0.8;border-radius:40%;font-weight:bold}svg.svelte-iy49t2{overflow:visible}")}function on(t){let n,r,o,a,i,l,c,d,u,f,h,p,g,m=Ge.accepts.indexOf("jp")>-1,v=m&&function(e){let t,n,r,o,s,a=e[1].slice(0,2).toUpperCase()+"";return{c(){t=N("button"),n=M(a),L(t,"type","button"),L(t,"title",r=e[0]("header.title.constData")),L(t,"class","svelte-iy49t2")},m(r,a){T(r,t,a),y(t,n),o||(s=A(t,"click",e[2]),o=!0)},p(e,o){2&o&&a!==(a=e[1].slice(0,2).toUpperCase()+"")&&O(n,a),1&o&&r!==(r=e[0]("header.title.constData"))&&L(t,"title",r)},d(e){e&&C(t),o=!1,s()}}}(t);return{c(){n=N("div"),r=N("button"),o=E("svg"),a=E("path"),l=z(),v&&v.c(),c=z(),d=N("button"),u=E("svg"),f=E("path"),L(a,"d","M7 2H11V8H15L9 14 3 8H7V2ZM3 14H15V16H3V14Z"),L(a,"fill","var(--theme-text)"),L(o,"width","18"),L(o,"height","18"),L(o,"class","svelte-iy49t2"),L(r,"type","button"),L(r,"title",i=t[0]("header.title.dl")),L(r,"class","svelte-iy49t2"),L(f,"d","M2 4H16V6H2V4ZM2 8H16V10H2V8ZM2 12H16V14H2V12Z"),L(f,"fill","var(--theme-text)"),L(u,"width","18"),L(u,"height","18"),L(u,"class","svelte-iy49t2"),L(d,"type","button"),L(d,"title",h=t[0]("header.title.settings")),L(d,"class","svelte-iy49t2"),L(n,"class","wrapper svelte-iy49t2")},m(e,t){T(e,n,t),y(n,r),y(r,o),y(o,a),y(n,l),v&&v.m(n,null),y(n,c),y(n,d),y(d,u),y(u,f),p||(g=[A(r,"click",nn),A(d,"click",ft.toggle)],p=!0)},p(e,[t]){1&t&&i!==(i=e[0]("header.title.dl"))&&L(r,"title",i),m&&v.p(e,t),1&t&&h!==(h=e[0]("header.title.settings"))&&L(d,"title",h)},i:e,o:e,d(e){e&&C(n),v&&v.d(),p=!1,s(g)}}}function sn(e,t,n){let r,o;return u(e,ct,(e=>n(0,r=e))),u(e,Ge,(e=>n(1,o=e))),[r,o,()=>{h(Ge,o=Ge.accepts[(Ge.accepts.indexOf(o)+1)%Ge.accepts.length],o)}]}const an=class extends $e{constructor(e){super(),ke(this,e,sn,on,i,{},rn)}};function ln(e){const t=e-1;return t*t*t+1}function cn(e,{delay:n=0,duration:r=400,easing:o=t}={}){const s=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:o,css:e=>"opacity: "+e*s}}function dn(e,{delay:t=0,duration:n=400,easing:r=ln,x:o=0,y:s=0,opacity:a=0}={}){const i=getComputedStyle(e),l=+i.opacity,c="none"===i.transform?"":i.transform,d=l*(1-a);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*o}px, ${(1-e)*s}px);\n\t\t\topacity: ${l-d*t}`}}function un(e){x(e,"svelte-y51pcd","label.svelte-y51pcd{display:flex;-ms-flex-direction:column;flex-direction:column;padding:0.5rem;gap:0.5rem}select.svelte-y51pcd{width:100%;height:3rem;padding-left:1rem;padding-right:2.5rem;font-size:1em;font-weight:bold;background:var(--theme-bg-main);border:var(--theme-border) 2px solid;border-radius:1rem;color:inherit;cursor:pointer;appearance:none;background-image:linear-gradient(45deg, transparent 50%, currentColor 0), linear-gradient(135deg, currentColor 50%, transparent 0);background-position:calc(100% - 20px) calc(1px + 50%), calc(100% - 16.02px) calc(1px + 50%);background-size:4px 4px, 4px 4px;background-repeat:no-repeat}")}function fn(e){let t,n,r,o,s,a,i;const l=e[3].default,c=function(e,t,n,r){if(e){const r=f(e,t,n,null);return e[0](r)}}(l,e,e[2]);return{c(){t=N("label"),n=N("span"),r=z(),o=N("select"),c&&c.c(),L(o,"class","svelte-y51pcd"),void 0===e[0]&&ee((()=>e[4].call(o))),L(t,"class","svelte-y51pcd")},m(l,d){T(l,t,d),y(t,n),n.innerHTML=e[1],y(t,r),y(t,o),c&&c.m(o,null),D(o,e[0]),s=!0,a||(i=A(o,"change",e[4]),a=!0)},p(e,[t]){(!s||2&t)&&(n.innerHTML=e[1]),c&&c.p&&(!s||4&t)&&function(e,t,n,r,o,s){if(o){const a=f(t,n,r,s);e.p(a,o)}}(c,l,e,e[2],s?function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(l,e[2],t,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[2]),null),1&t&&D(o,e[0])},i(e){s||(fe(c,e),s=!0)},o(e){he(c,e),s=!1},d(e){e&&C(t),c&&c.d(e),a=!1,i()}}}function hn(e,t,n){let{$$slots:r={},$$scope:o}=t,{value:s}=t,{label:a}=t;return e.$$set=e=>{"value"in e&&n(0,s=e.value),"label"in e&&n(1,a=e.label),"$$scope"in e&&n(2,o=e.$$scope)},[s,a,o,r,function(){s=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(0,s)}]}const pn=class extends $e{constructor(e){super(),ke(this,e,hn,fn,i,{value:0,label:1},un)}};function gn(e){x(e,"svelte-1ig9ch5",'label.svelte-1ig9ch5.svelte-1ig9ch5{display:flex;-ms-flex-direction:column;flex-direction:column;padding:0.5rem;gap:0.2rem}.wrapper.svelte-1ig9ch5.svelte-1ig9ch5{position:relative;width:4.5rem;height:2rem;display:inline-block}input.svelte-1ig9ch5.svelte-1ig9ch5{width:0;height:0;opacity:0;position:absolute}input:focus-visible+.wrapper.svelte-1ig9ch5 .slider.svelte-1ig9ch5{outline:var(--theme-border) auto 1px}input:checked+.wrapper.svelte-1ig9ch5 .slider.svelte-1ig9ch5{background-color:var(--theme-control)}input:checked+.wrapper.svelte-1ig9ch5 .slider.svelte-1ig9ch5:before{transform:translateX(2.5rem)}input:checked+.wrapper.svelte-1ig9ch5 .slider.svelte-1ig9ch5:after{content:"ON";left:0.6rem;right:initial}.slider.svelte-1ig9ch5.svelte-1ig9ch5{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--theme-bg-sub);transition:0.2s;border-radius:0.8rem}.slider.svelte-1ig9ch5.svelte-1ig9ch5:after{color:var(--theme-text-control);position:absolute;content:"OFF";display:flex;align-items:center;height:100%;right:0.6rem;font-weight:bold}.slider.svelte-1ig9ch5.svelte-1ig9ch5:before{position:absolute;content:"";height:1.6rem;width:1.6rem;left:0.2rem;bottom:0.2rem;background-color:var(--theme-text-control);transition:0.2s;border-radius:40%}')}function mn(t){let n,r,o,s,a,i,l,c;return{c(){n=N("label"),r=N("span"),o=z(),s=N("input"),a=z(),i=N("div"),i.innerHTML='<span class="slider svelte-1ig9ch5"></span>',L(s,"type","checkbox"),L(s,"class","svelte-1ig9ch5"),L(i,"class","wrapper svelte-1ig9ch5"),L(n,"class","svelte-1ig9ch5")},m(e,d){T(e,n,d),y(n,r),r.innerHTML=t[1],y(n,o),y(n,s),s.checked=t[0],y(n,a),y(n,i),l||(c=A(s,"change",t[2]),l=!0)},p(e,[t]){2&t&&(r.innerHTML=e[1]),1&t&&(s.checked=e[0])},i:e,o:e,d(e){e&&C(n),l=!1,c()}}}function vn(e,t,n){let{checked:r=!1}=t,{label:o}=t;return e.$$set=e=>{"checked"in e&&n(0,r=e.checked),"label"in e&&n(1,o=e.label)},[r,o,function(){r=this.checked,n(0,r)}]}const bn=class extends $e{constructor(e){super(),ke(this,e,vn,mn,i,{checked:0,label:1},gn)}};function wn(e){x(e,"svelte-1aafgfe",".wrapper.svelte-1aafgfe.svelte-1aafgfe{display:flex;-ms-flex-direction:column;flex-direction:column;padding:0.5rem;gap:0.5rem}.indicators.svelte-1aafgfe.svelte-1aafgfe{height:0.8rem;position:relative}.indicators.svelte-1aafgfe div.svelte-1aafgfe{background-color:var(--theme-bg-sub);height:1.6rem;width:1.6rem;border-radius:40%;display:flex;justify-content:center;align-items:center;position:absolute;border:var(--theme-border) 0.2rem solid}.indicators.svelte-1aafgfe div.low.svelte-1aafgfe{border-bottom-right-radius:0;transform:translateX(-0.4rem)}.indicators.svelte-1aafgfe div.high.svelte-1aafgfe{border-bottom-left-radius:0;transform:translateX(1.6rem)}.slider.svelte-1aafgfe.svelte-1aafgfe{display:flex;-ms-flex-direction:column;flex-direction:column;justify-content:center;width:100%;height:3.5rem;position:relative}.slider-bg.svelte-1aafgfe.svelte-1aafgfe{height:0.4rem;width:calc(100% - 2.6rem);margin-left:1.4rem;background-color:var(--theme-border);position:absolute;border-radius:0.2rem}input[type=number].svelte-1aafgfe.svelte-1aafgfe{background-color:transparent;border:none;color:inherit;font-family:inherit;max-width:150%;text-align:center;-moz-appearance:textfield;appearance:textfield}input.svelte-1aafgfe.svelte-1aafgfe::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=range].svelte-1aafgfe.svelte-1aafgfe{-webkit-appearance:none;appearance:none;height:0;width:calc(100% - 1.5rem);position:absolute;border-radius:0.2rem;pointer-events:none}input[type=range].low.svelte-1aafgfe.svelte-1aafgfe::-webkit-slider-thumb{border-radius:50% 0 0 50%}input[type=range].low.svelte-1aafgfe.svelte-1aafgfe::-moz-range-thumb{border-radius:50% 0 0 50%}input[type=range].high.svelte-1aafgfe.svelte-1aafgfe{margin-left:1.6rem}input[type=range].svelte-1aafgfe.svelte-1aafgfe::-webkit-slider-thumb{z-index:1;-webkit-appearance:none;pointer-events:all;width:1.5rem;height:2rem;background-color:var(--theme-text-dim);border-radius:0 50% 50% 0;cursor:pointer;transition:0.2s}input[type=range].svelte-1aafgfe.svelte-1aafgfe::-webkit-slider-thumb:hover{background-color:var(--theme-text)}input[type=range].svelte-1aafgfe.svelte-1aafgfe::-webkit-slider-thumb:active{-webkit-box-shadow:0 0 0.5rem var(--theme-text-dim);box-shadow:0 0 0.5rem var(--theme-text-dim)}input[type=range].svelte-1aafgfe.svelte-1aafgfe::-moz-range-thumb{z-index:1;-webkit-appearance:none;pointer-events:all;width:1.5rem;height:2rem;background-color:var(--theme-text-dim);border-radius:0 50% 50% 0;cursor:pointer;transition:0.2s}input[type=range].svelte-1aafgfe.svelte-1aafgfe::-moz-range-thumb:hover{background-color:var(--theme-text)}input[type=range].svelte-1aafgfe.svelte-1aafgfe::-moz-range-thumb:active{-webkit-box-shadow:0 0 0.5rem var(--theme-text-dim);box-shadow:0 0 0.5rem var(--theme-text-dim)}input[type=range].svelte-1aafgfe.svelte-1aafgfe:focus-visible{outline:none}input[type=range].svelte-1aafgfe.svelte-1aafgfe:focus-visible::-webkit-slider-thumb{outline:var(--theme-border) auto 1px}input[type=range].svelte-1aafgfe.svelte-1aafgfe:focus-visible::-moz-range-thumb{outline:var(--theme-border) auto 1px}")}function yn(t){let n,r,o,a,i,l,c,d,u,f,h,p,g,m,v,b,w,x;return{c(){n=N("div"),r=N("span"),o=z(),a=N("div"),i=N("div"),l=N("input"),c=z(),d=N("div"),u=N("input"),f=z(),h=N("div"),p=N("div"),g=z(),m=N("input"),v=z(),b=N("input"),l.value=t[6],L(l,"type","number"),L(l,"min",t[3]),L(l,"max",t[4]),L(l,"step",t[5]),L(l,"inputmode","decimal"),L(l,"class","svelte-1aafgfe"),L(i,"class","low svelte-1aafgfe"),P(i,"left","calc((100% - 3rem) * "+t[9]+" / 100)"),u.value=t[7],L(u,"type","number"),L(u,"min",t[3]),L(u,"max",t[4]),L(u,"step",t[5]),L(u,"inputmode","decimal"),L(u,"class","svelte-1aafgfe"),L(d,"class","high svelte-1aafgfe"),P(d,"left","calc((100% - 3rem) * "+t[8]+" / 100)"),L(a,"class","indicators svelte-1aafgfe"),L(p,"class","slider-bg svelte-1aafgfe"),P(p,"background","linear-gradient( to right, var(--theme-border) 0%, var(--theme-border) "+(t[9]-1)+"%, var(--theme-control) "+(t[9]-1)+"%, var(--theme-control) "+(t[8]+1)+"%, var(--theme-border) "+(t[8]+1)+"%, var(--theme-border) 100% )"),L(m,"class","low svelte-1aafgfe"),L(m,"type","range"),L(m,"min",t[3]),L(m,"max",t[4]),L(m,"step",t[5]),L(b,"class","high svelte-1aafgfe"),L(b,"type","range"),L(b,"min",t[3]),L(b,"max",t[4]),L(b,"step",t[5]),L(h,"class","slider svelte-1aafgfe"),L(n,"class","wrapper svelte-1aafgfe")},m(e,s){T(e,n,s),y(n,r),r.innerHTML=t[2],y(n,o),y(n,a),y(a,i),y(i,l),y(a,c),y(a,d),y(d,u),y(n,f),y(n,h),y(h,p),y(h,g),y(h,m),_(m,t[6]),y(h,v),y(h,b),_(b,t[7]),w||(x=[A(l,"change",t[10]),A(u,"change",t[11]),A(m,"change",t[12]),A(m,"input",t[12]),A(m,"change",t[13]),A(m,"input",t[14]),A(b,"change",t[15]),A(b,"input",t[15]),A(b,"change",t[16]),A(b,"input",t[17])],w=!0)},p(e,[t]){4&t&&(r.innerHTML=e[2]),64&t&&l.value!==e[6]&&(l.value=e[6]),8&t&&L(l,"min",e[3]),16&t&&L(l,"max",e[4]),32&t&&L(l,"step",e[5]),512&t&&P(i,"left","calc((100% - 3rem) * "+e[9]+" / 100)"),128&t&&u.value!==e[7]&&(u.value=e[7]),8&t&&L(u,"min",e[3]),16&t&&L(u,"max",e[4]),32&t&&L(u,"step",e[5]),256&t&&P(d,"left","calc((100% - 3rem) * "+e[8]+" / 100)"),768&t&&P(p,"background","linear-gradient( to right, var(--theme-border) 0%, var(--theme-border) "+(e[9]-1)+"%, var(--theme-control) "+(e[9]-1)+"%, var(--theme-control) "+(e[8]+1)+"%, var(--theme-border) "+(e[8]+1)+"%, var(--theme-border) 100% )"),8&t&&L(m,"min",e[3]),16&t&&L(m,"max",e[4]),32&t&&L(m,"step",e[5]),64&t&&_(m,e[6]),8&t&&L(b,"min",e[3]),16&t&&L(b,"max",e[4]),32&t&&L(b,"step",e[5]),128&t&&_(b,e[7])},i:e,o:e,d(e){e&&C(n),w=!1,s(x)}}}function xn(e,t,n){let r,o,{label:s}=t,{min:a}=t,{max:i}=t,{step:l}=t,{low:c}=t,{high:d}=t,u=i-a,f=c,h=d;return e.$$set=e=>{"label"in e&&n(2,s=e.label),"min"in e&&n(3,a=e.min),"max"in e&&n(4,i=e.max),"step"in e&&n(5,l=e.step),"low"in e&&n(0,c=e.low),"high"in e&&n(1,d=e.high)},e.$$.update=()=>{72&e.$$.dirty&&n(9,r=(f-a)/u*100),136&e.$$.dirty&&n(8,o=(h-a)/u*100)},[c,d,s,a,i,l,f,h,o,r,e=>{n(6,f=parseFloat(e.currentTarget.value)||f),n(6,f=Math.min(i,Math.max(a,f))),f>h&&n(7,h=f),e.currentTarget.value=f.toString(),n(0,c=f),n(1,d=h)},e=>{n(7,h=parseFloat(e.currentTarget.value)||h),n(7,h=Math.min(i,Math.max(a,h))),h<f&&n(6,f=h),e.currentTarget.value=h.toString(),n(0,c=f),n(1,d=h)},function(){f=U(this.value),n(6,f)},()=>{n(0,c=f),n(1,d=h)},()=>{f>h&&n(7,h=f)},function(){h=U(this.value),n(7,h)},()=>{n(0,c=f),n(1,d=h)},()=>{h<f&&n(6,f=h)}]}const kn=class extends $e{constructor(e){super(),ke(this,e,xn,yn,i,{label:2,min:3,max:4,step:5,low:0,high:1},wn)}};function $n(e){x(e,"svelte-1wifujl",".wrapper.svelte-1wifujl{display:flex;-ms-flex-direction:column;flex-direction:column;padding:0.5em;gap:1rem}.btns.svelte-1wifujl{display:flex;-ms-flex-direction:row;flex-direction:row;gap:0.5em}button.svelte-1wifujl{width:100%;padding:0.5em;border-radius:0.5em;background-color:var(--theme-bg-sub);border:3px solid var(--theme-control);filter:brightness(0.5)}button.svelte-1wifujl:hover{filter:brightness(0.8)}button.activated.svelte-1wifujl{filter:brightness(1)}button[data-diff=ULT].svelte-1wifujl{color:var(--theme-song-ult)}button[data-diff=MAS].svelte-1wifujl{color:var(--theme-song-mas)}button[data-diff=EXP].svelte-1wifujl{color:var(--theme-song-exp)}button[data-diff=ADV].svelte-1wifujl{color:var(--theme-song-adv)}button[data-diff=BAS].svelte-1wifujl{color:var(--theme-song-bas)}")}function Sn(e,t,n){const r=e.slice();return r[3]=t[n],r}function Tn(e){let t,n=e[0]("settings.filter.diff.warn")+"";return{c(){t=N("span"),P(t,"color","var(--theme-text-dim)")},m(e,r){T(e,t,r),t.innerHTML=n},p(e,r){1&r&&n!==(n=e[0]("settings.filter.diff.warn")+"")&&(t.innerHTML=n)},d(e){e&&C(t)}}}function Cn(e){let t,n,r,o,s,a=e[3]+"";function i(){return e[2](e[3])}return{c(){t=N("button"),n=M(a),L(t,"type","button"),L(t,"data-diff",r=e[3]),L(t,"class","svelte-1wifujl"),I(t,"activated",e[1][e[3]])},m(e,r){T(e,t,r),y(t,n),o||(s=A(t,"click",i),o=!0)},p(n,r){e=n,2&r&&I(t,"activated",e[1][e[3]])},d(e){e&&C(t),o=!1,s()}}}function Hn(t){let n,r,o,s,a,i,l,c,d=t[0]("settings.filter.diff")+"",u=Object.values(t[1]).every(Nn),f=t[0]("settings.filter.diff.notify")+"",h=u&&Tn(t),p=He,g=[];for(let e=0;e<p.length;e+=1)g[e]=Cn(Sn(t,p,e));return{c(){n=N("div"),r=N("span"),o=new R(!1),s=z(),h&&h.c(),a=z(),i=N("div");for(let e=0;e<g.length;e+=1)g[e].c();l=z(),c=N("span"),o.a=s,L(i,"class","btns svelte-1wifujl"),P(c,"color","var(--theme-text-dim)"),L(n,"class","wrapper svelte-1wifujl")},m(e,t){T(e,n,t),y(n,r),o.m(d,r),y(r,s),h&&h.m(r,null),y(n,a),y(n,i);for(let e=0;e<g.length;e+=1)g[e].m(i,null);y(n,l),y(n,c),c.innerHTML=f},p(e,[t]){if(1&t&&d!==(d=e[0]("settings.filter.diff")+"")&&o.p(d),2&t&&(u=Object.values(e[1]).every(Nn)),u?h?h.p(e,t):(h=Tn(e),h.c(),h.m(r,null)):h&&(h.d(1),h=null),2&t){let n;for(p=He,n=0;n<p.length;n+=1){const r=Sn(e,p,n);g[n]?g[n].p(r,t):(g[n]=Cn(r),g[n].c(),g[n].m(i,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=p.length}1&t&&f!==(f=e[0]("settings.filter.diff.notify")+"")&&(c.innerHTML=f)},i:e,o:e,d(e){e&&C(n),h&&h.d(),H(g,e)}}}const Nn=e=>0==e;function En(e,t,n){let r,o;return u(e,ct,(e=>n(0,r=e))),u(e,We,(e=>n(1,o=e))),[r,o,e=>{h(We,o[e]=!o[e],o)}]}const Mn=class extends $e{constructor(e){super(),ke(this,e,En,Hn,i,{},$n)}};function zn(e){x(e,"svelte-by0uiq",'.wrapper.svelte-by0uiq{display:flex;-ms-flex-direction:column;flex-direction:column;padding:0.5rem;gap:1rem}.btns.svelte-by0uiq{display:-ms-grid;display:grid;grid-template-areas:"... ... ...";gap:0.5rem;flex-wrap:wrap}button.svelte-by0uiq{width:100%;padding:0.5rem;border-radius:0.5rem;background-color:var(--theme-bg-sub);border:3px solid var(--theme-control);color:var(--theme-text-control);filter:brightness(0.5)}button.svelte-by0uiq:hover{filter:brightness(0.8)}button.activated.svelte-by0uiq{filter:brightness(1)}.btn-all.svelte-by0uiq{grid-column:2/4;border-color:var(--theme-control-altr)}')}function jn(e,t,n){const r=e.slice();return r[5]=t[n],r}function An(e){let t,n,r,o,s=e[5]+"";function a(){return e[3](e[5])}return{c(){t=N("button"),n=M(s),L(t,"type","button"),L(t,"class","svelte-by0uiq"),I(t,"activated",e[1][e[5]])},m(e,s){T(e,t,s),y(t,n),r||(o=A(t,"click",a),r=!0)},p(n,r){e=n,2&r&&I(t,"activated",e[1][e[5]])},d(e){e&&C(t),r=!1,o()}}}function Ln(t){let n,r,o,s,a,i,l,c,d,u=t[2]("settings.filter.genre")+"",f=t[2]("settings.filter.genre.all")+"",h=Ee,p=[];for(let e=0;e<h.length;e+=1)p[e]=An(jn(t,h,e));return{c(){n=N("div"),r=N("span"),o=z(),s=N("div");for(let e=0;e<p.length;e+=1)p[e].c();a=z(),i=N("button"),l=M(f),L(i,"type","button"),L(i,"class","btn-all svelte-by0uiq"),I(i,"activated",t[0]),L(s,"class","btns svelte-by0uiq"),L(n,"class","wrapper svelte-by0uiq")},m(e,f){T(e,n,f),y(n,r),r.innerHTML=u,y(n,o),y(n,s);for(let e=0;e<p.length;e+=1)p[e].m(s,null);y(s,a),y(s,i),y(i,l),c||(d=A(i,"click",t[4]),c=!0)},p(e,[t]){if(4&t&&u!==(u=e[2]("settings.filter.genre")+"")&&(r.innerHTML=u),3&t){let n;for(h=Ee,n=0;n<h.length;n+=1){const r=jn(e,h,n);p[n]?p[n].p(r,t):(p[n]=An(r),p[n].c(),p[n].m(s,a))}for(;n<p.length;n+=1)p[n].d(1);p.length=h.length}4&t&&f!==(f=e[2]("settings.filter.genre.all")+"")&&O(l,f),1&t&&I(i,"activated",e[0])},i:e,o:e,d(e){e&&C(n),H(p,e),c=!1,d()}}}function Un(e,t,n){let r,o;u(e,Xe,(e=>n(1,r=e))),u(e,ct,(e=>n(2,o=e)));let s=Ee.every((e=>r[e]));return[s,r,o,e=>{h(Xe,r[e]=!r[e],r),n(0,s=Ee.every((e=>r[e])))},()=>{n(0,s=!s);for(let e of Ee)h(Xe,r[e]=s,r)}]}const On=class extends $e{constructor(e){super(),ke(this,e,Un,Ln,i,{},zn)}};function _n(e){x(e,"svelte-s9a9l6",".wrapper.svelte-s9a9l6{padding:0.5rem;display:flex;gap:0.5rem;align-items:center}input[type=number].svelte-s9a9l6{background-color:var(--theme-bg-sub);color:var(--theme-text-control);border:none;border-radius:0.2rem;width:4rem;padding:0.5rem;-moz-appearance:textfield;appearance:textfield;flex-grow:1}input[type=number].svelte-s9a9l6::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.btn.svelte-s9a9l6{width:-moz-fit-content;width:fit-content;padding:0.5rem 1.5rem;border-radius:0.8rem;background-color:var(--theme-control);color:var(--theme-text-control)}.btn.disabled.svelte-s9a9l6{background-color:var(--theme-border);cursor:no-drop}")}function Pn(t){let n,r,o,a,i,l,c,d,u,f,h=t[3]("playcount.fetch.button")+"";return{c(){n=N("div"),r=N("button"),o=z(),a=N("input"),i=z(),l=N("span"),l.textContent="～",c=z(),d=N("input"),L(r,"type","button"),L(r,"class","btn svelte-s9a9l6"),I(r,"disabled",t[2]||Dn(t[0],t[1])),L(a,"type","number"),L(a,"min","1"),L(a,"placeholder","from"),L(a,"inputmode","numeric"),L(a,"class","svelte-s9a9l6"),L(d,"type","number"),L(d,"min","1"),L(d,"placeholder","to"),L(d,"inputmode","numeric"),L(d,"class","svelte-s9a9l6"),L(n,"class","wrapper svelte-s9a9l6")},m(e,s){T(e,n,s),y(n,r),r.innerHTML=h,y(n,o),y(n,a),_(a,t[0]),y(n,i),y(n,l),y(n,c),y(n,d),_(d,t[1]),u||(f=[A(r,"click",t[5]),A(a,"input",t[6]),A(d,"input",t[7])],u=!0)},p(e,[t]){8&t&&h!==(h=e[3]("playcount.fetch.button")+"")&&(r.innerHTML=h),7&t&&I(r,"disabled",e[2]||Dn(e[0],e[1])),1&t&&U(a.value)!==e[0]&&_(a,e[0]),2&t&&U(d.value)!==e[1]&&_(d,e[1])},i:e,o:e,d(e){e&&C(n),u=!1,s(f)}}}function Dn(e,t){return isNaN(e)||isNaN(t)||null==e||null==t||t<e}function In(e,t,n){let r,o,s,a,i,l;u(e,pt,(e=>n(2,r=e))),u(e,ct,(e=>n(3,o=e))),u(e,ht,(e=>n(8,s=e))),u(e,gt,(e=>n(9,a=e))),u(e,kt,(e=>n(10,i=e))),u(e,ft,(e=>n(11,l=e)));let c=1,d=40;async function f(e,t){if(!r&&!Dn(e,t)){h(gt,a=!0,a),h(pt,r=!0,r),h(ft,l=!1,l);try{const n=i.slice(e-1,t).length;for(const[r,s]of i.slice(e-1,t).entries())ht.set(o("playcount.fetch.progress",{progress:r,all:n})),null==s.playCount&&(s.playCount=await it("songPlayCount",s.difficulty,s.idx),kt.set(i));h(pt,r=!1,r),h(gt,a=!1,a)}catch{h(gt,a=!1,a),h(ht,s=o("playcount.fetch.error"),s),setTimeout((()=>{h(pt,r=!1,r)}),6e3)}}}return[c,d,r,o,f,()=>f(c,d),function(){c=U(this.value),n(0,c)},function(){d=U(this.value),n(1,d)}]}const Rn=class extends $e{constructor(e){super(),ke(this,e,In,Pn,i,{},_n)}};function Fn(e){x(e,"svelte-zk37hs",".wrapper.svelte-zk37hs{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;align-items:center}.modal-bg.svelte-zk37hs{position:fixed;background:rgba(0, 0, 0, 0.4);top:0;left:0;width:100%;height:100%}.modal.svelte-zk37hs{background:var(--theme-bg-main);width:70%;max-width:32rem;max-height:80%;overflow-y:auto;margin:auto;padding:2em;position:relative;box-shadow:2rem 2rem 10px rgba(0, 0, 0, 0.5333333333);border-radius:1rem;text-align:left}.close-btn.svelte-zk37hs{position:absolute;top:0.5rem;right:0.5rem;width:2rem;height:2rem;background-color:var(--theme-border);color:var(--theme-text);border-radius:40%}.reset-btn.svelte-zk37hs{display:block;margin-left:auto;background-color:var(--theme-reset);width:-moz-fit-content;width:fit-content;padding:0.5rem 1.5rem;border-radius:0.8rem;font-weight:bold;color:var(--theme-text)}h4.svelte-zk37hs{margin:0.5rem 0;color:var(--theme-text-dim)}hr.svelte-zk37hs{border:none;border-top:var(--theme-border) 0.1rem solid;margin:2rem auto}")}function Bn(e,t,n){const r=e.slice();return r[16]=t[n],r}function qn(e,t,n){const r=e.slice();return r[19]=t[n],r}function Vn(e,t,n){const r=e.slice();return r[22]=t[n],r}function Wn(e){let t,n,r,o=e[0]("settings.data.constData."+e[22])+"";return{c(){t=N("option"),n=M(o),t.__value=r=e[22],t.value=t.__value},m(e,r){T(e,t,r),y(t,n)},p(e,t){1&t&&o!==(o=e[0]("settings.data.constData."+e[22])+"")&&O(n,o)},d(e){e&&C(t)}}}function Jn(e){let t,n=Ge.accepts,r=[];for(let t=0;t<n.length;t+=1)r[t]=Wn(Vn(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=j()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);T(e,t,n)},p(e,o){if(1&o){let s;for(n=Ge.accepts,s=0;s<n.length;s+=1){const a=Vn(e,n,s);r[s]?r[s].p(a,o):(r[s]=Wn(a),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){H(r,e),e&&C(t)}}}function Xn(e){let t,n;return t=new Rn({}),{c(){we(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Gn(t){let n,r,o,s=dt.get(t[19])+"";return{c(){n=N("option"),r=M(s),n.__value=o=t[19],n.value=n.__value},m(e,t){T(e,n,t),y(n,r)},p:e,d(e){e&&C(n)}}}function Yn(e){let t,n=De.accepts,r=[];for(let t=0;t<n.length;t+=1)r[t]=Gn(qn(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=j()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);T(e,t,n)},p(e,o){if(0&o){let s;for(n=De.accepts,s=0;s<n.length;s+=1){const a=qn(e,n,s);r[s]?r[s].p(a,o):(r[s]=Gn(a),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){H(r,e),e&&C(t)}}}function Zn(t){let n,r,o,s=t[16].charAt(0).toUpperCase()+t[16].slice(1)+"";return{c(){n=N("option"),r=M(s),n.__value=o=t[16],n.value=n.__value},m(e,t){T(e,n,t),y(n,r)},p:e,d(e){e&&C(n)}}}function Qn(e){let t,n=Pe.accepts,r=[];for(let t=0;t<n.length;t+=1)r[t]=Zn(Bn(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=j()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);T(e,t,n)},p(e,o){if(0&o){let s;for(n=Pe.accepts,s=0;s<n.length;s+=1){const a=Bn(e,n,s);r[s]?r[s].p(a,o):(r[s]=Zn(a),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){H(r,e),e&&C(t)}}}function Kn(e){let t,n,r,o,a,i,l,c,d,u,f,h,p,g,m,v,b,w,x,k,$,S,H,E,M,j,U,O,_,D,I,R,F,B,q,V,W,J,X,Y,Z,Q,K,ne,re,oe,se,ae,ie,le,ce,pe=e[0]("settings.main.title")+"",me=e[0]("settings.filter.title")+"",ve=e[0]("settings.data.title")+"",ke=e[0]("settings.data.overpower.notify")+"",$e=e[0]("settings.ui.title")+"",Se=e[0]("settings.main.reset")+"";function Te(t){e[8](t)}function Ce(t){e[9](t)}let He={label:e[0]("settings.filter.const"),max:15.4,min:1,step:.1};function Ne(t){e[10](t)}void 0!==e[1]&&(He.high=e[1]),void 0!==e[2]&&(He.low=e[2]),f=new kn({props:He}),G.push((()=>be(f,"high",Te))),G.push((()=>be(f,"low",Ce))),m=new Mn({}),b=new On({});let Ee={label:e[0]("settings.data.constData"),$$slots:{default:[Jn]},$$scope:{ctx:e}};function Me(t){e[11](t)}void 0!==e[3]&&(Ee.value=e[3]),H=new pn({props:Ee}),G.push((()=>be(H,"value",Ne)));let ze={label:e[0]("settings.data.overpower")};function je(t){e[12](t)}void 0!==e[4]&&(ze.checked=e[4]),j=new bn({props:ze}),G.push((()=>be(j,"checked",Me)));let Ae={label:e[0]("settings.data.playcount")};void 0!==e[5]&&(Ae.checked=e[5]),I=new bn({props:Ae}),G.push((()=>be(I,"checked",je)));let Le=e[5]&&Xn();function Ue(t){e[13](t)}let Oe={label:e[0]("settings.ui.locale"),$$slots:{default:[Yn]},$$scope:{ctx:e}};function _e(t){e[14](t)}void 0!==e[6]&&(Oe.value=e[6]),X=new pn({props:Oe}),G.push((()=>be(X,"value",Ue)));let Pe={label:e[0]("settings.ui.theme"),$$slots:{default:[Qn]},$$scope:{ctx:e}};return void 0!==e[7]&&(Pe.value=e[7]),Q=new pn({props:Pe}),G.push((()=>be(Q,"value",_e))),{c(){t=N("div"),n=N("div"),r=z(),o=N("div"),a=N("button"),a.textContent="✕",i=z(),l=N("h3"),c=z(),d=N("h4"),u=z(),we(f.$$.fragment),g=z(),we(m.$$.fragment),v=z(),we(b.$$.fragment),w=z(),x=N("hr"),k=z(),$=N("h4"),S=z(),we(H.$$.fragment),M=z(),we(j.$$.fragment),O=z(),_=N("div"),D=z(),we(I.$$.fragment),F=z(),Le&&Le.c(),B=z(),q=N("hr"),V=z(),W=N("h4"),J=z(),we(X.$$.fragment),Z=z(),we(Q.$$.fragment),ne=z(),re=N("hr"),oe=z(),se=N("button"),L(n,"class","modal-bg svelte-zk37hs"),L(a,"type","button"),L(a,"class","close-btn svelte-zk37hs"),P(l,"margin","0"),L(d,"class","svelte-zk37hs"),L(x,"class","svelte-zk37hs"),L($,"class","svelte-zk37hs"),P(_,"color","var(--theme-text-dim)"),P(_,"margin",".5em auto"),L(q,"class","svelte-zk37hs"),L(W,"class","svelte-zk37hs"),L(re,"class","svelte-zk37hs"),L(se,"type","button"),L(se,"class","btn reset-btn svelte-zk37hs"),L(o,"class","modal svelte-zk37hs"),L(t,"class","wrapper svelte-zk37hs")},m(s,h){T(s,t,h),y(t,n),y(t,r),y(t,o),y(o,a),y(o,i),y(o,l),l.innerHTML=pe,y(o,c),y(o,d),d.innerHTML=me,y(o,u),ye(f,o,null),y(o,g),ye(m,o,null),y(o,v),ye(b,o,null),y(o,w),y(o,x),y(o,k),y(o,$),$.innerHTML=ve,y(o,S),ye(H,o,null),y(o,M),ye(j,o,null),y(o,O),y(o,_),_.innerHTML=ke,y(o,D),ye(I,o,null),y(o,F),Le&&Le.m(o,null),y(o,B),y(o,q),y(o,V),y(o,W),W.innerHTML=$e,y(o,J),ye(X,o,null),y(o,Z),ye(Q,o,null),y(o,ne),y(o,re),y(o,oe),y(o,se),se.innerHTML=Se,ie=!0,le||(ce=[A(n,"click",ft.toggle),A(a,"click",ft.toggle),A(se,"click",e[15])],le=!0)},p(e,[t]){(!ie||1&t)&&pe!==(pe=e[0]("settings.main.title")+"")&&(l.innerHTML=pe),(!ie||1&t)&&me!==(me=e[0]("settings.filter.title")+"")&&(d.innerHTML=me);const n={};1&t&&(n.label=e[0]("settings.filter.const")),!h&&2&t&&(h=!0,n.high=e[1],te((()=>h=!1))),!p&&4&t&&(p=!0,n.low=e[2],te((()=>p=!1))),f.$set(n),(!ie||1&t)&&ve!==(ve=e[0]("settings.data.title")+"")&&($.innerHTML=ve);const r={};1&t&&(r.label=e[0]("settings.data.constData")),33554433&t&&(r.$$scope={dirty:t,ctx:e}),!E&&8&t&&(E=!0,r.value=e[3],te((()=>E=!1))),H.$set(r);const s={};1&t&&(s.label=e[0]("settings.data.overpower")),!U&&16&t&&(U=!0,s.checked=e[4],te((()=>U=!1))),j.$set(s),(!ie||1&t)&&ke!==(ke=e[0]("settings.data.overpower.notify")+"")&&(_.innerHTML=ke);const a={};1&t&&(a.label=e[0]("settings.data.playcount")),!R&&32&t&&(R=!0,a.checked=e[5],te((()=>R=!1))),I.$set(a),e[5]?Le?32&t&&fe(Le,1):(Le=Xn(),Le.c(),fe(Le,1),Le.m(o,B)):Le&&(de(),he(Le,1,1,(()=>{Le=null})),ue()),(!ie||1&t)&&$e!==($e=e[0]("settings.ui.title")+"")&&(W.innerHTML=$e);const i={};1&t&&(i.label=e[0]("settings.ui.locale")),33554432&t&&(i.$$scope={dirty:t,ctx:e}),!Y&&64&t&&(Y=!0,i.value=e[6],te((()=>Y=!1))),X.$set(i);const c={};1&t&&(c.label=e[0]("settings.ui.theme")),33554432&t&&(c.$$scope={dirty:t,ctx:e}),!K&&128&t&&(K=!0,c.value=e[7],te((()=>K=!1))),Q.$set(c),(!ie||1&t)&&Se!==(Se=e[0]("settings.main.reset")+"")&&(se.innerHTML=Se)},i(e){ie||(fe(f.$$.fragment,e),fe(m.$$.fragment,e),fe(b.$$.fragment,e),fe(H.$$.fragment,e),fe(j.$$.fragment,e),fe(I.$$.fragment,e),fe(Le),fe(X.$$.fragment,e),fe(Q.$$.fragment,e),ee((()=>{ae||(ae=ge(t,cn,{duration:100},!0)),ae.run(1)})),ie=!0)},o(e){he(f.$$.fragment,e),he(m.$$.fragment,e),he(b.$$.fragment,e),he(H.$$.fragment,e),he(j.$$.fragment,e),he(I.$$.fragment,e),he(Le),he(X.$$.fragment,e),he(Q.$$.fragment,e),ae||(ae=ge(t,cn,{duration:100},!1)),ae.run(0),ie=!1},d(e){e&&C(t),xe(f),xe(m),xe(b),xe(H),xe(j),xe(I),Le&&Le.d(),xe(X),xe(Q),e&&ae&&ae.end(),le=!1,s(ce)}}}function er(e,t,n){let r,o,s,a,i,l,c,d;return u(e,ct,(e=>n(0,r=e))),u(e,Ve,(e=>n(1,o=e))),u(e,qe,(e=>n(2,s=e))),u(e,Ge,(e=>n(3,a=e))),u(e,Ye,(e=>n(4,i=e))),u(e,Ze,(e=>n(5,l=e))),u(e,De,(e=>n(6,c=e))),u(e,Pe,(e=>n(7,d=e))),[r,o,s,a,i,l,c,d,function(e){o=e,Ve.set(o)},function(e){s=e,qe.set(s)},function(e){a=e,Ge.set(a)},function(e){i=e,Ye.set(i)},function(e){l=e,Ze.set(l)},function(e){c=e,De.set(c)},function(e){d=e,Pe.set(d)},()=>{localStorage.clear();for(const e of Qe)e.reset()}]}const tr=class extends $e{constructor(e){super(),ke(this,e,er,Kn,i,{},Fn)}};function nr(e){x(e,"svelte-11shtsn","span.svelte-11shtsn{line-height:1em;margin:0.4em 0}.title.svelte-11shtsn{color:var(--theme-label);text-align:right;white-space:nowrap}.content.svelte-11shtsn{white-space:nowrap}")}function rr(t){let n,r,o,s,a;return{c(){n=N("span"),r=M(t[0]),o=z(),s=N("span"),a=M(t[1]),L(n,"class","title svelte-11shtsn"),L(s,"class","content svelte-11shtsn")},m(e,t){T(e,n,t),y(n,r),T(e,o,t),T(e,s,t),y(s,a)},p(e,[t]){1&t&&O(r,e[0]),2&t&&O(a,e[1])},i:e,o:e,d(e){e&&C(n),e&&C(o),e&&C(s)}}}function or(e,t,n){let{title:r}=t,{content:o}=t;return e.$$set=e=>{"title"in e&&n(0,r=e.title),"content"in e&&n(1,o=e.content)},[r,o]}const sr=class extends $e{constructor(e){super(),ke(this,e,or,rr,i,{title:0,content:1},nr)}};function ar(e){return(Math.floor(100*e)/100).toFixed(2)}function ir(e){x(e,"svelte-nt4zki",'.wrapper.svelte-nt4zki.svelte-nt4zki{border:var(--theme-border) 3px solid;border-radius:0.5rem;background-color:var(--theme-bg-sub);box-sizing:border-box;width:100%;max-width:600px;padding:0.5rem;margin:0.5rem;display:-ms-grid;display:grid;align-items:center;justify-items:center;overflow-x:scroll}.wrapper.svelte-nt4zki.svelte-nt4zki::-webkit-scrollbar{display:none}.stats-name.svelte-nt4zki.svelte-nt4zki{grid-column:1;width:auto;white-space:nowrap}.stats-rating.svelte-nt4zki.svelte-nt4zki{grid-column:2;display:flex;-ms-flex-direction:column;flex-direction:column;gap:0.5rem}.stats-rating.svelte-nt4zki h2.svelte-nt4zki{margin:auto}.stats-rating.svelte-nt4zki span.svelte-nt4zki{color:var(--theme-text-dim)}.stats-honor.svelte-nt4zki.svelte-nt4zki{grid-area:2/1/3/3;color:var(--theme-honor-normal);font-weight:bold;background:var(--theme-bg-main);border-radius:3px;padding:5px 2rem;margin:0 20px;width:-webkit-fill-available;text-align:center}.stats-honor[data-honor=normal].svelte-nt4zki.svelte-nt4zki{color:var(--theme-honor-normal)}.stats-honor[data-honor=bronze].svelte-nt4zki.svelte-nt4zki{color:var(--theme-honor-bronze)}.stats-honor[data-honor=silver].svelte-nt4zki.svelte-nt4zki{color:var(--theme-honor-silver)}.stats-honor[data-honor=gold].svelte-nt4zki.svelte-nt4zki{color:var(--theme-honor-gold)}.stats-honor[data-honor=platina].svelte-nt4zki.svelte-nt4zki{color:var(--theme-honor-platina)}.stats-honor[data-honor=rainbow].svelte-nt4zki.svelte-nt4zki{color:var(--theme-honor-rainbow)}.stats-items.svelte-nt4zki.svelte-nt4zki{width:-moz-fit-content;width:fit-content;display:-ms-grid;display:grid;grid-template-areas:"... ...";grid-area:1/3/3/4;gap:5px;padding:5px}@media only screen and (max-width: 544px){.stats-name.svelte-nt4zki.svelte-nt4zki{margin:auto}.stats-rating.svelte-nt4zki.svelte-nt4zki{grid-column:1}.stats-items.svelte-nt4zki.svelte-nt4zki{grid-area:1/2/3/3;max-width:-moz-fit-content;max-width:fit-content}.stats-honor.svelte-nt4zki.svelte-nt4zki{grid-area:3/1/4/3}}')}function lr(e){let t,n,r,o,s,a;return t=new sr({props:{title:e[4]("player.recent.best10"),content:Ie(e[1],10).toFixed(4)}}),r=new sr({props:{title:e[4]("player.recent.history10"),content:Ie(e[0],10).toFixed(4)}}),s=new sr({props:{title:e[4]("player.recent.history30"),content:Ie(e[0],30).toFixed(4)}}),{c(){we(t.$$.fragment),n=z(),we(r.$$.fragment),o=z(),we(s.$$.fragment)},m(e,i){ye(t,e,i),T(e,n,i),ye(r,e,i),T(e,o,i),ye(s,e,i),a=!0},p(e,n){const o={};16&n&&(o.title=e[4]("player.recent.best10")),2&n&&(o.content=Ie(e[1],10).toFixed(4)),t.$set(o);const a={};16&n&&(a.title=e[4]("player.recent.history10")),1&n&&(a.content=Ie(e[0],10).toFixed(4)),r.$set(a);const i={};16&n&&(i.title=e[4]("player.recent.history30")),1&n&&(i.content=Ie(e[0],30).toFixed(4)),s.$set(i)},i(e){a||(fe(t.$$.fragment,e),fe(r.$$.fragment,e),fe(s.$$.fragment,e),a=!0)},o(e){he(t.$$.fragment,e),he(r.$$.fragment,e),he(s.$$.fragment,e),a=!1},d(e){xe(t,e),e&&C(n),xe(r,e),e&&C(o),xe(s,e)}}}function cr(e){let t,n,r,o,s,a;return t=new sr({props:{title:e[4]("player.best.best30"),content:Ie(e[2],30).toFixed(4)}}),r=new sr({props:{title:e[4]("player.best.maxPossible"),content:ar(Re(e[2]))}}),s=new sr({props:{title:e[4]("player.best.playCount"),content:e[3].playCount}}),{c(){we(t.$$.fragment),n=z(),we(r.$$.fragment),o=z(),we(s.$$.fragment)},m(e,i){ye(t,e,i),T(e,n,i),ye(r,e,i),T(e,o,i),ye(s,e,i),a=!0},p(e,n){const o={};16&n&&(o.title=e[4]("player.best.best30")),4&n&&(o.content=Ie(e[2],30).toFixed(4)),t.$set(o);const a={};16&n&&(a.title=e[4]("player.best.maxPossible")),4&n&&(a.content=ar(Re(e[2]))),r.$set(a);const i={};16&n&&(i.title=e[4]("player.best.playCount")),8&n&&(i.content=e[3].playCount),s.$set(i)},i(e){a||(fe(t.$$.fragment,e),fe(r.$$.fragment,e),fe(s.$$.fragment,e),a=!0)},o(e){he(t.$$.fragment,e),he(r.$$.fragment,e),he(s.$$.fragment,e),a=!1},d(e){xe(t,e),e&&C(n),xe(r,e),e&&C(o),xe(s,e)}}}function dr(e){let t,n,r,o,s,a,i,l,c,d,u,f,h,p,g,m,v,b,w,x,k,$,S,H=e[3].name+"",E=e[3].rating+"",j=e[3].ratingMax+"",A=e[3].honor.text+"";w=new sr({props:{title:e[4]("player.generic.generatedAt"),content:(new Date).toLocaleDateString()}});const U=[cr,lr],_=[];function P(e,t){return"best"===e[5]?0:"recent"===e[5]||"history"===e[5]?1:-1}return~(k=P(e))&&($=_[k]=U[k](e)),{c(){t=N("div"),n=N("h2"),r=M(H),o=z(),s=N("div"),a=N("h2"),i=M(E),l=z(),c=N("span"),d=M("MAX "),u=M(j),f=z(),h=N("div"),p=N("span"),g=M(A),v=z(),b=N("div"),we(w.$$.fragment),x=z(),$&&$.c(),L(n,"class","stats-name svelte-nt4zki"),L(a,"class","svelte-nt4zki"),L(c,"class","svelte-nt4zki"),L(s,"class","stats-rating svelte-nt4zki"),L(h,"class","stats-honor svelte-nt4zki"),L(h,"data-honor",m=e[3].honor.color),I(h,"marquee",!0),L(b,"class","stats-items svelte-nt4zki"),L(t,"class","wrapper svelte-nt4zki")},m(e,m){T(e,t,m),y(t,n),y(n,r),y(t,o),y(t,s),y(s,a),y(a,i),y(s,l),y(s,c),y(c,d),y(c,u),y(t,f),y(t,h),y(h,p),y(p,g),y(t,v),y(t,b),ye(w,b,null),y(b,x),~k&&_[k].m(b,null),S=!0},p(e,[t]){(!S||8&t)&&H!==(H=e[3].name+"")&&O(r,H),(!S||8&t)&&E!==(E=e[3].rating+"")&&O(i,E),(!S||8&t)&&j!==(j=e[3].ratingMax+"")&&O(u,j),(!S||8&t)&&A!==(A=e[3].honor.text+"")&&O(g,A),(!S||8&t&&m!==(m=e[3].honor.color))&&L(h,"data-honor",m);const n={};16&t&&(n.title=e[4]("player.generic.generatedAt")),w.$set(n);let o=k;k=P(e),k===o?~k&&_[k].p(e,t):($&&(de(),he(_[o],1,1,(()=>{_[o]=null})),ue()),~k?($=_[k],$?$.p(e,t):($=_[k]=U[k](e),$.c()),fe($,1),$.m(b,null)):$=null)},i(e){S||(fe(w.$$.fragment,e),fe($),S=!0)},o(e){he(w.$$.fragment,e),he($),S=!1},d(e){e&&C(t),xe(w),~k&&_[k].d()}}}function ur(e,t,n){let r,o,s,a,i,l,c,d,f;return u(e,yt,(e=>n(6,a=e))),u(e,wt,(e=>n(7,i=e))),u(e,kt,(e=>n(8,l=e))),u(e,xt,(e=>n(3,c=e))),u(e,ct,(e=>n(4,d=e))),u(e,ut,(e=>n(5,f=e))),e.$$.update=()=>{256&e.$$.dirty&&n(2,r=l.slice(0,30).map((e=>e.rating))),128&e.$$.dirty&&n(1,o=i.map((e=>e.rating))),64&e.$$.dirty&&n(0,s=a.map((e=>e.rating)))},[s,o,r,c,d,f,a,i,l]}const fr=class extends $e{constructor(e){super(),ke(this,e,ur,dr,i,{},ir)}};function hr(e){x(e,"svelte-xd1wg8",'tr.best30.svelte-xd1wg8 td.song-order.svelte-xd1wg8{color:var(--theme-rank-b30)}tr.best40.svelte-xd1wg8 td.song-order.svelte-xd1wg8{font-weight:bold}tr.svelte-xd1wg8:not(.best40) td.song-order.svelte-xd1wg8{color:var(--theme-text-dim)}tr.ajc.svelte-xd1wg8 td[data-rank].svelte-xd1wg8,tr.ajc.svelte-xd1wg8 td.song-score.svelte-xd1wg8,tr.ajc.svelte-xd1wg8 td[data-clear].svelte-xd1wg8{color:var(--theme-clear_aj);text-shadow:0 0 10px var(--theme-clear-aj)}td.svelte-xd1wg8.svelte-xd1wg8{padding:0.5rem;border-top:var(--theme-border) 1.5px solid;text-align:center}td[data-diff].svelte-xd1wg8.svelte-xd1wg8{font-weight:bold;text-align:left;max-width:300px}td[data-diff][data-diff=WE].svelte-xd1wg8.svelte-xd1wg8{color:var(--theme-song-we)}td[data-diff][data-diff=ULT].svelte-xd1wg8.svelte-xd1wg8{color:var(--theme-song-ult)}td[data-diff][data-diff=MAS].svelte-xd1wg8.svelte-xd1wg8{color:var(--theme-song-mas)}td[data-diff][data-diff=EXP].svelte-xd1wg8.svelte-xd1wg8{color:var(--theme-song-exp)}td[data-diff][data-diff=ADV].svelte-xd1wg8.svelte-xd1wg8{color:var(--theme-song-adv)}td[data-diff][data-diff=BAS].svelte-xd1wg8.svelte-xd1wg8{color:var(--theme-song-bas)}td[data-rank].svelte-xd1wg8.svelte-xd1wg8{white-space:nowrap}td[data-rank][data-rank=MAX].svelte-xd1wg8.svelte-xd1wg8{color:var(--theme-clear_aj);text-shadow:0 0 10px var(--theme-clear_aj)}td[data-rank][data-rank="SSS+"].svelte-xd1wg8.svelte-xd1wg8{color:#ffcc11}td[data-rank][data-rank=SSS].svelte-xd1wg8.svelte-xd1wg8{color:#ffd744}td[data-rank][data-rank="SS+"].svelte-xd1wg8.svelte-xd1wg8{color:#ffe277}td[data-rank][data-rank=SS].svelte-xd1wg8.svelte-xd1wg8{color:#ffedaa}td[data-rank][data-rank="S+"].svelte-xd1wg8.svelte-xd1wg8{color:#ffd744}td[data-rank][data-rank=S].svelte-xd1wg8.svelte-xd1wg8{color:#ffe277}td[data-rank][data-rank=AAA].svelte-xd1wg8.svelte-xd1wg8{color:#cceeff}td[data-rank][data-rank=AA].svelte-xd1wg8.svelte-xd1wg8{color:#a6e1ff}td[data-rank][data-rank=A].svelte-xd1wg8.svelte-xd1wg8{color:#80d5ff}td[data-rank][data-rank=BBB].svelte-xd1wg8.svelte-xd1wg8{color:#59c8ff}td[data-rank][data-rank=BB].svelte-xd1wg8.svelte-xd1wg8{color:#33bbff}td[data-rank][data-rank=B].svelte-xd1wg8.svelte-xd1wg8{color:#0daeff}td[data-rank][data-rank=MAX].svelte-xd1wg8.svelte-xd1wg8{font-weight:bold}td[data-rank][data-rank="SSS+"].svelte-xd1wg8.svelte-xd1wg8{font-weight:bold}td[data-rank][data-rank=SSS].svelte-xd1wg8.svelte-xd1wg8{font-weight:bold}td[data-rank][data-rank="SS+"].svelte-xd1wg8.svelte-xd1wg8{font-weight:bold}td[data-rank][data-rank=SS].svelte-xd1wg8.svelte-xd1wg8{font-weight:bold}td[data-rank][data-rank=C].svelte-xd1wg8.svelte-xd1wg8{color:#888}td[data-rank][data-rank=D].svelte-xd1wg8.svelte-xd1wg8{color:#666}td[data-clear].svelte-xd1wg8.svelte-xd1wg8{font-weight:bold}td[data-clear][data-clear=FC].svelte-xd1wg8.svelte-xd1wg8{color:var(--theme-clear-fc)}td[data-clear][data-clear=AJ].svelte-xd1wg8.svelte-xd1wg8{color:var(--theme-clear-aj)}td.song-op.svelte-xd1wg8.svelte-xd1wg8{white-space:nowrap}.opmx.svelte-xd1wg8.svelte-xd1wg8{color:var(--theme-text-dim);font-size:0.8em}.pc-hidden.svelte-xd1wg8.svelte-xd1wg8{cursor:pointer}.pc-hidden.svelte-xd1wg8 span.svelte-xd1wg8{border-radius:0.2em;background-color:var(--theme-bg-sub);color:var(--theme-bg-sub)}')}function pr(e){let t,n,r,o,s,a,i=e[0].rank+"",l=e[0].score+"";return{c(){t=N("td"),n=M(i),o=z(),s=N("td"),a=M(l),L(t,"data-rank",r=e[0].rank),L(t,"class","svelte-xd1wg8"),L(s,"class","song-score svelte-xd1wg8")},m(e,r){T(e,t,r),y(t,n),T(e,o,r),T(e,s,r),y(s,a)},p(e,o){1&o&&i!==(i=e[0].rank+"")&&O(n,i),1&o&&r!==(r=e[0].rank)&&L(t,"data-rank",r),1&o&&l!==(l=e[0].score+"")&&O(a,l)},d(e){e&&C(t),e&&C(o),e&&C(s)}}}function gr(e){let t,n,r,o,s,a,i,l,c,d=e[0].op.toFixed(2)+"",u=e[0].opmax.toFixed(1)+"",f=e[0].oppercent.toPrecision(5)+"";return{c(){t=N("td"),n=M(d),r=N("span"),o=M("／"),s=M(u),a=z(),i=N("td"),l=M(f),c=N("span"),c.textContent="%",L(r,"class","opmx svelte-xd1wg8"),L(t,"class","song-op svelte-xd1wg8"),L(c,"class","opmx svelte-xd1wg8"),L(i,"class","svelte-xd1wg8")},m(e,d){T(e,t,d),y(t,n),y(t,r),y(r,o),y(r,s),T(e,a,d),T(e,i,d),y(i,l),y(i,c)},p(e,t){1&t&&d!==(d=e[0].op.toFixed(2)+"")&&O(n,d),1&t&&u!==(u=e[0].opmax.toFixed(1)+"")&&O(s,u),1&t&&f!==(f=e[0].oppercent.toPrecision(5)+"")&&O(l,f)},d(e){e&&C(t),e&&C(a),e&&C(i)}}}function mr(e){let t,n,r,o=e[0].clear+"";return{c(){t=N("td"),n=M(o),L(t,"data-clear",r=e[0].clear),L(t,"class","svelte-xd1wg8")},m(e,r){T(e,t,r),y(t,n)},p(e,s){1&s&&o!==(o=e[0].clear+"")&&O(n,o),1&s&&r!==(r=e[0].clear)&&L(t,"data-clear",r)},d(e){e&&C(t)}}}function vr(e){let t;function n(e,t){return void 0===e[0].playCount?wr:br}let r=n(e),o=r(e);return{c(){o.c(),t=j()},m(e,n){o.m(e,n),T(e,t,n)},p(e,s){r===(r=n(e))&&o?o.p(e,s):(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&C(t)}}}function br(e){let t,n,r=(e[0].playCount??"?")+"";return{c(){t=N("td"),n=M(r),L(t,"class","svelte-xd1wg8")},m(e,r){T(e,t,r),y(t,n)},p(e,t){1&t&&r!==(r=(e[0].playCount??"?")+"")&&O(n,r)},d(e){e&&C(t)}}}function wr(t){let n,r,o;return{c(){n=N("td"),n.innerHTML='<span class="svelte-xd1wg8">  </span>',L(n,"class","pc-hidden svelte-xd1wg8")},m(e,s){T(e,n,s),r||(o=A(n,"click",t[5]),r=!0)},p:e,d(e){e&&C(n),r=!1,o()}}}function yr(t){let n,r,o,s,a,i,l,c,d,u,f,h,p,g,m,v,b,w=t[0].order+"",x=t[0].title+"",k=(-1==t[0].const?"-":t[0].const?.toFixed(1)??"??.?")+"",$=(-1==t[0].const?"-":null==t[0].rating?"??.??":t[0].rating.toFixed(2))+"";function S(e,t){return e[2]?gr:pr}let H=S(t),E=H(t),j=("history"===t[1]||"best"===t[1])&&mr(t),A=t[3]&&"best"===t[1]&&vr(t);return{c(){n=N("tr"),r=N("td"),o=M(w),s=z(),a=N("td"),i=M(x),d=z(),u=N("td"),f=M(k),h=z(),E.c(),p=z(),g=N("td"),m=M($),v=z(),j&&j.c(),b=z(),A&&A.c(),L(r,"class","song-order svelte-xd1wg8"),L(a,"data-diff",l=t[0].difficulty),L(a,"colspan",c="history"===t[1]?2:1),L(a,"class","svelte-xd1wg8"),L(u,"class","svelte-xd1wg8"),L(g,"class","svelte-xd1wg8"),L(n,"class","svelte-xd1wg8"),I(n,"best30",t[0].order<=("recent"===t[1]||"history"===t[1]?10:30)),I(n,"best40",t[0].order<=("recent"===t[1]?10:"history"===t[1]?30:40)),I(n,"ajc",101e4==t[0].score)},m(e,t){T(e,n,t),y(n,r),y(r,o),y(n,s),y(n,a),y(a,i),y(n,d),y(n,u),y(u,f),y(n,h),E.m(n,null),y(n,p),y(n,g),y(g,m),y(n,v),j&&j.m(n,null),y(n,b),A&&A.m(n,null)},p(e,[t]){1&t&&w!==(w=e[0].order+"")&&O(o,w),1&t&&x!==(x=e[0].title+"")&&O(i,x),1&t&&l!==(l=e[0].difficulty)&&L(a,"data-diff",l),2&t&&c!==(c="history"===e[1]?2:1)&&L(a,"colspan",c),1&t&&k!==(k=(-1==e[0].const?"-":e[0].const?.toFixed(1)??"??.?")+"")&&O(f,k),H===(H=S(e))&&E?E.p(e,t):(E.d(1),E=H(e),E&&(E.c(),E.m(n,p))),1&t&&$!==($=(-1==e[0].const?"-":null==e[0].rating?"??.??":e[0].rating.toFixed(2))+"")&&O(m,$),"history"===e[1]||"best"===e[1]?j?j.p(e,t):(j=mr(e),j.c(),j.m(n,b)):j&&(j.d(1),j=null),e[3]&&"best"===e[1]?A?A.p(e,t):(A=vr(e),A.c(),A.m(n,null)):A&&(A.d(1),A=null),3&t&&I(n,"best30",e[0].order<=("recent"===e[1]||"history"===e[1]?10:30)),3&t&&I(n,"best40",e[0].order<=("recent"===e[1]?10:"history"===e[1]?30:40)),1&t&&I(n,"ajc",101e4==e[0].score)},i:e,o:e,d(e){e&&C(n),E.d(),j&&j.d(),A&&A.d()}}}function xr(e,t,n){let r,o,s,a;u(e,ut,(e=>n(1,r=e))),u(e,Ye,(e=>n(2,o=e))),u(e,Ze,(e=>n(3,s=e))),u(e,pt,(e=>n(4,a=e)));let{song:i}=t;return e.$$set=e=>{"song"in e&&n(0,i=e.song)},[i,r,o,s,a,()=>{a||it("songPlayCount",i.difficulty,i.idx).then((e=>{n(0,i.playCount=e,i)})).catch((()=>{n(0,i.playCount=null,i)}))}]}const kr=class extends $e{constructor(e){super(),ke(this,e,xr,yr,i,{song:0},hr)}};function $r(e){x(e,"svelte-3p6ktg",'@charset "UTF-8";.wrapper.svelte-3p6ktg.svelte-3p6ktg{width:100%;overflow-x:scroll}table.svelte-3p6ktg.svelte-3p6ktg{border-spacing:0;width:100%;padding-bottom:0.5rem;max-width:max-content;margin:auto}th.svelte-3p6ktg.svelte-3p6ktg{padding:0.5rem;color:var(--theme-text-dim);cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}th.svelte-3p6ktg.svelte-3p6ktg:not(.cur-sort):hover{color:inherit;filter:brightness(0.9)}th.cur-sort.svelte-3p6ktg.svelte-3p6ktg{filter:brightness(1);color:inherit}th.cur-sort.svelte-3p6ktg.svelte-3p6ktg::before{color:var(--theme-text-dim);content:"▼ "}.reversed.svelte-3p6ktg th.cur-sort.svelte-3p6ktg::before{content:"▲ "}')}function Sr(e,t,n){const r=e.slice();return r[12]=t[n],r}function Tr(e,t,n){const r=e.slice();return r[15]=t[n],r}function Cr(e){let t,n,r,o,a,i=e[5]("record.head."+e[15].display)+"";function l(){return e[10](e[15])}function c(...t){return e[11](e[15],...t)}return{c(){t=N("th"),n=new R(!1),r=z(),n.a=r,L(t,"tabindex","0"),L(t,"class","svelte-3p6ktg"),I(t,"cur-sort",!e[15].notcur&&e[15].sort==e[1])},m(e,s){T(e,t,s),n.m(i,t),y(t,r),o||(a=[A(t,"click",l),A(t,"keypress",c)],o=!0)},p(r,o){e=r,40&o&&i!==(i=e[5]("record.head."+e[15].display)+"")&&n.p(i),10&o&&I(t,"cur-sort",!e[15].notcur&&e[15].sort==e[1])},d(e){e&&C(t),o=!1,s(a)}}}function Hr(e){let t,n=(e[15].condition??!0)&&Cr(e);return{c(){n&&n.c(),t=j()},m(e,r){n&&n.m(e,r),T(e,t,r)},p(e,r){e[15].condition??1?n?n.p(e,r):(n=Cr(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&C(t)}}}function Nr(e){let t,n;return t=new kr({props:{song:e[12]}}),{c(){we(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};16&n&&(r.song=e[12]),t.$set(r)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Er(e){let t,n,r,o,s,a,i,l,c=e[3],d=[];for(let t=0;t<c.length;t+=1)d[t]=Hr(Tr(e,c,t));let u=e[4],f=[];for(let t=0;t<u.length;t+=1)f[t]=Nr(Sr(e,u,t));const h=e=>he(f[e],1,1,(()=>{f[e]=null}));return{c(){t=N("div"),n=N("table"),r=N("thead"),o=N("tr");for(let e=0;e<d.length;e+=1)d[e].c();s=z(),a=N("tbody");for(let e=0;e<f.length;e+=1)f[e].c();L(o,"class","svelte-3p6ktg"),I(o,"reversed",e[2]),L(n,"class","svelte-3p6ktg"),L(t,"class","wrapper svelte-3p6ktg"),t.hidden=i=!e[0]},m(e,i){T(e,t,i),y(t,n),y(n,r),y(r,o);for(let e=0;e<d.length;e+=1)d[e].m(o,null);y(n,s),y(n,a);for(let e=0;e<f.length;e+=1)f[e].m(a,null);l=!0},p(e,[n]){if(46&n){let t;for(c=e[3],t=0;t<c.length;t+=1){const r=Tr(e,c,t);d[t]?d[t].p(r,n):(d[t]=Hr(r),d[t].c(),d[t].m(o,null))}for(;t<d.length;t+=1)d[t].d(1);d.length=c.length}if((!l||4&n)&&I(o,"reversed",e[2]),16&n){let t;for(u=e[4],t=0;t<u.length;t+=1){const r=Sr(e,u,t);f[t]?(f[t].p(r,n),fe(f[t],1)):(f[t]=Nr(r),f[t].c(),fe(f[t],1),f[t].m(a,null))}for(de(),t=u.length;t<f.length;t+=1)h(t);ue()}(!l||1&n&&i!==(i=!e[0]))&&(t.hidden=i)},i(e){if(!l){for(let e=0;e<u.length;e+=1)fe(f[e]);l=!0}},o(e){f=f.filter(Boolean);for(let e=0;e<f.length;e+=1)he(f[e]);l=!1},d(e){e&&C(t),H(d,e),H(f,e)}}}function Mr(e,t,n){let r,o,s,a,i,l;u(e,ut,(e=>n(7,s=e))),u(e,Ze,(e=>n(8,a=e))),u(e,Ye,(e=>n(9,i=e))),u(e,ct,(e=>n(5,l=e)));let{playRecord:c}=t,{shown:d=!1}=t,f="rating",h=!1;return e.$$set=e=>{"playRecord"in e&&n(6,c=e.playRecord),"shown"in e&&n(0,d=e.shown)},e.$$.update=()=>{70&e.$$.dirty&&n(4,r=c.sort(h?(e,t)=>-Fe[f](e,t):Fe[f])),896&e.$$.dirty&&n(3,o=[{display:"order",sort:"rating",notcur:!0},{display:"playOrder",sort:"playOrder",condition:"history"===s},{display:"title",sort:"title"},{display:"const",sort:"const"},{display:"overpower",sort:"op",condition:i},{display:"overpowerPercent",sort:"opp",condition:i},{display:"rank",sort:"score",condition:!i,notcur:!0},{display:"score",sort:"score",condition:!i},{display:"rating",sort:"rating"},{display:"ajfc",sort:"aj",condition:"history"===s||"best"===s},{display:"playcount",sort:"playcount",condition:a&&"best"===s}])},[d,f,h,o,r,l,c,s,a,i,e=>{f===e.sort?n(2,h=!h):(n(1,f=e.sort),n(2,h=!1))},(e,t)=>{"Enter"!==t.code&&"Space"!==t.code||(f===e.sort?n(2,h=!h):(n(1,f=e.sort),n(2,h=!1)))}]}const zr=class extends $e{constructor(e){super(),ke(this,e,Mr,Er,i,{playRecord:6,shown:0},$r)}};function jr(e){x(e,"svelte-75klku",".modal-wrapper.svelte-75klku{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center}.modal-bg.svelte-75klku{position:fixed;background:rgba(0, 0, 0, 0.4);top:0;left:0;width:100vw;height:100vh}.modal.svelte-75klku{background:var(--theme-bg-main);width:70%;max-width:32rem;margin:auto;padding:2rem;position:relative;box-shadow:2rem 2rem 10px rgba(0, 0, 0, 0.5333333333);border-radius:1rem;text-align:center}.app-version.svelte-75klku{color:var(--theme-text-dim);font-weight:normal;font-size:small}.spinner.svelte-75klku{margin:2rem auto;border:0.5rem solid var(--theme-bg-sub);border-top-color:var(--theme-label);border-radius:50%;width:4rem;height:4rem;animation:svelte-75klku-spin 1s cubic-bezier(0.5, 0.2, 0.5, 0.8) infinite}.error.svelte-75klku{margin:4rem auto;height:4rem;line-height:4rem;font-size:5em;color:var(--theme-label)}.error-text.svelte-75klku{color:#ff0000;white-space:pre-line;font-size:0.8em;text-align:left;background-color:var(--theme-bg-sub);border-radius:0.5em;max-height:15em;overflow-y:scroll;padding:1em}.dim.svelte-75klku{color:var(--theme-text-dim)}@keyframes svelte-75klku-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}")}function Ar(e){let t,n,r,o,s,a=Ge.accepts.indexOf("jp")>-1,i=a&&function(e){let t,n=e[1]("loading.constData",{name:e[1]("settings.data.constData."+e[3])})+"";return{c(){t=N("p"),L(t,"class","dim svelte-75klku")},m(e,r){T(e,t,r),t.innerHTML=n},p(e,r){10&r&&n!==(n=e[1]("loading.constData",{name:e[1]("settings.data.constData."+e[3])})+"")&&(t.innerHTML=n)},d(e){e&&C(t)}}}(e);return{c(){t=N("div"),n=z(),r=N("p"),o=z(),i&&i.c(),s=j(),L(t,"class","spinner svelte-75klku")},m(a,l){T(a,t,l),T(a,n,l),T(a,r,l),r.innerHTML=e[2],T(a,o,l),i&&i.m(a,l),T(a,s,l)},p(e,t){4&t&&(r.innerHTML=e[2]),a&&i.p(e,t)},d(e){e&&C(t),e&&C(n),e&&C(r),e&&C(o),i&&i.d(e),e&&C(s)}}}function Lr(e){let t,n,r,o,s,a,i;function l(e,t){return 1&t&&(r=null),1&t&&(o=null),1&t&&(s=null),1&t&&(a=null),null==r&&(r=!(-1==e[0].message.indexOf("Service temporarily unavailable"))),r?Dr:(null==o&&(o=!(-1==e[0].message.indexOf("Request failed: rejected by server")&&-1==e[0].message.indexOf("Failed to fetch"))),o?Pr:(null==s&&(s=!(-1===e[0].message.indexOf("Request timed out"))),s?_r:(null==a&&(a=!(-1===e[0].message.indexOf("Target window does not exist"))),a?Or:Ur)))}let c=l(e,-1),d=c(e);return{c(){t=N("div"),t.textContent=":(",n=z(),d.c(),i=j(),L(t,"class","error svelte-75klku")},m(e,r){T(e,t,r),T(e,n,r),d.m(e,r),T(e,i,r)},p(e,t){c===(c=l(e,t))&&d?d.p(e,t):(d.d(1),d=c(e),d&&(d.c(),d.m(i.parentNode,i)))},d(e){e&&C(t),e&&C(n),d.d(e),e&&C(i)}}}function Ur(e){let t,n,r,o,s=e[1]("loading.error.unknown")+"",a=e[0].stack+"";return{c(){t=N("p"),n=z(),r=N("pre"),o=M(a),L(r,"class","error-text svelte-75klku")},m(e,a){T(e,t,a),t.innerHTML=s,T(e,n,a),T(e,r,a),y(r,o)},p(e,n){2&n&&s!==(s=e[1]("loading.error.unknown")+"")&&(t.innerHTML=s),1&n&&a!==(a=e[0].stack+"")&&O(o,a)},d(e){e&&C(t),e&&C(n),e&&C(r)}}}function Or(e){let t,n=e[1]("loading.error.noopener")+"";return{c(){t=N("p")},m(e,r){T(e,t,r),t.innerHTML=n},p(e,r){2&r&&n!==(n=e[1]("loading.error.noopener")+"")&&(t.innerHTML=n)},d(e){e&&C(t)}}}function _r(e){let t,n=e[1]("loading.error.timeout")+"";return{c(){t=N("p")},m(e,r){T(e,t,r),t.innerHTML=n},p(e,r){2&r&&n!==(n=e[1]("loading.error.timeout")+"")&&(t.innerHTML=n)},d(e){e&&C(t)}}}function Pr(e){let t,n=e[1]("loading.error.rejected")+"";return{c(){t=N("p")},m(e,r){T(e,t,r),t.innerHTML=n},p(e,r){2&r&&n!==(n=e[1]("loading.error.rejected")+"")&&(t.innerHTML=n)},d(e){e&&C(t)}}}function Dr(e){let t,n=e[1]("loading.error.serviceDown")+"";return{c(){t=N("p")},m(e,r){T(e,t,r),t.innerHTML=n},p(e,r){2&r&&n!==(n=e[1]("loading.error.serviceDown")+"")&&(t.innerHTML=n)},d(e){e&&C(t)}}}function Ir(t){let n,r,o,s,a,i,l,c,d,u=t[1]("main.title")+"";function f(e,t){return e[0]?Lr:Ar}let h=f(t),p=h(t);return{c(){n=N("div"),r=N("div"),o=z(),s=N("div"),a=N("h3"),i=new R(!1),l=z(),c=N("span"),c.textContent="@1.0.6",d=z(),p.c(),L(r,"class","modal-bg svelte-75klku"),i.a=l,L(c,"class","app-version svelte-75klku"),L(s,"class","modal svelte-75klku"),L(n,"class","modal-wrapper svelte-75klku")},m(e,t){T(e,n,t),y(n,r),y(n,o),y(n,s),y(s,a),i.m(u,a),y(a,l),y(a,c),y(s,d),p.m(s,null)},p(e,[t]){2&t&&u!==(u=e[1]("main.title")+"")&&i.p(u),h===(h=f(e))&&p?p.p(e,t):(p.d(1),p=h(e),p&&(p.c(),p.m(s,null)))},i:e,o:e,d(e){e&&C(n),p.d()}}}function Rr(e,t,n){let r,o,s;u(e,ct,(e=>n(1,r=e))),u(e,ht,(e=>n(2,o=e))),u(e,Ge,(e=>n(3,s=e)));let{error:a}=t;return e.$$set=e=>{"error"in e&&n(0,a=e.error)},[a,r,o,s]}const Fr=class extends $e{constructor(e){super(),ke(this,e,Rr,Ir,i,{error:0},jr)}};function Br(e){x(e,"svelte-1jd1sr0",".wrapper.svelte-1jd1sr0{position:fixed;bottom:0.5rem;left:0.5rem;padding:0.5rem;border-radius:0.5rem;background-color:rgba(0, 0, 0, 0.5333333333);backdrop-filter:blur(2px)}.spinner.svelte-1jd1sr0{border:0.2rem solid var(--theme-bg-sub);border-top-color:var(--theme-label);display:inline-block;box-sizing:border-box;border-radius:50%;width:1em;height:1em;animation:svelte-1jd1sr0-spin 1s cubic-bezier(0.5, 0.2, 0.5, 0.8) infinite}.text.svelte-1jd1sr0{color:var(--theme-text-dim);font-size:0.8em}@keyframes svelte-1jd1sr0-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}")}function qr(e){let t;return{c(){t=N("span"),L(t,"class","spinner svelte-1jd1sr0")},m(e,n){T(e,t,n)},d(e){e&&C(t)}}}function Vr(e){let t,n,r,o,s,a=e[0]&&qr();return{c(){t=N("div"),a&&a.c(),n=z(),r=N("span"),L(r,"class","text svelte-1jd1sr0"),L(t,"class","wrapper svelte-1jd1sr0")},m(o,i){T(o,t,i),a&&a.m(t,null),y(t,n),y(t,r),r.innerHTML=e[1],s=!0},p(e,[o]){e[0]?a||(a=qr(),a.c(),a.m(t,n)):a&&(a.d(1),a=null),(!s||2&o)&&(r.innerHTML=e[1])},i(e){s||(ee((()=>{o||(o=ge(t,dn,{y:200,duration:1e3},!0)),o.run(1)})),s=!0)},o(e){o||(o=ge(t,dn,{y:200,duration:1e3},!1)),o.run(0),s=!1},d(e){e&&C(t),a&&a.d(),e&&o&&o.end()}}}function Wr(e,t,n){let r,o;return u(e,gt,(e=>n(0,r=e))),u(e,ht,(e=>n(1,o=e))),[r,o]}const Jr=class extends $e{constructor(e){super(),ke(this,e,Wr,Vr,i,{},Br)}};function Xr(e){x(e,"svelte-ufw7k","header.svelte-ufw7k.svelte-ufw7k{display:flex;gap:0.5rem;padding:0 1rem}a.svelte-ufw7k.svelte-ufw7k{padding:1rem 3%;cursor:pointer}a.svelte-ufw7k.svelte-ufw7k:hover{text-decoration-color:var(--theme-text-dim)}a.svelte-ufw7k h3.svelte-ufw7k{margin:0;color:var(--theme-text-dim)}a.svelte-ufw7k h3.selected.svelte-ufw7k{color:var(--theme-text)}")}function Gr(t){let n,r,o,s,a,i,l,c,d;return{c(){n=N("header"),r=N("a"),o=N("h3"),o.textContent="BEST",s=z(),a=N("a"),i=N("h3"),i.textContent="RECENT",l=z(),c=N("a"),d=N("h3"),d.textContent="HISTORY",L(o,"class","svelte-ufw7k"),I(o,"selected","best"==t[0]),L(r,"href","#best"),L(r,"class","svelte-ufw7k"),L(i,"class","svelte-ufw7k"),I(i,"selected","recent"==t[0]),L(a,"href","#recent"),L(a,"class","svelte-ufw7k"),L(d,"class","svelte-ufw7k"),I(d,"selected","history"==t[0]),L(c,"href","#history"),L(c,"class","svelte-ufw7k"),L(n,"class","svelte-ufw7k")},m(e,t){T(e,n,t),y(n,r),y(r,o),y(n,s),y(n,a),y(a,i),y(n,l),y(n,c),y(c,d)},p(e,[t]){1&t&&I(o,"selected","best"==e[0]),1&t&&I(i,"selected","recent"==e[0]),1&t&&I(d,"selected","history"==e[0])},i:e,o:e,d(e){e&&C(n)}}}function Yr(e,t,n){let r;return u(e,ut,(e=>n(0,r=e))),[r]}const Zr=class extends $e{constructor(e){super(),ke(this,e,Yr,Gr,i,{},Xr)}};function Qr(e){x(e,"svelte-1cp0kbr",".wrapper.svelte-1cp0kbr.svelte-1cp0kbr{border:var(--theme-border) 3px solid;border-radius:0.5rem;background-color:var(--theme-bg-sub);box-sizing:border-box;width:100%;max-width:600px;padding:0.5rem;margin:0.5rem;display:flex;justify-content:space-evenly;text-align:center;gap:0.8em;overflow-x:scroll}.wrapper.svelte-1cp0kbr.svelte-1cp0kbr::-webkit-scrollbar{display:none}.item.svelte-1cp0kbr.svelte-1cp0kbr{display:flex;-ms-flex-direction:column;flex-direction:column}.item.svelte-1cp0kbr div.svelte-1cp0kbr:nth-child(1){color:var(--theme-label)}.item.svelte-1cp0kbr div.svelte-1cp0kbr:nth-child(2){font-size:1.2em;font-weight:bold}.item.fc.svelte-1cp0kbr div.svelte-1cp0kbr:nth-child(1){color:var(--theme-clear-fc)}.item.aj.svelte-1cp0kbr div.svelte-1cp0kbr:nth-child(1){color:var(--theme-clear-aj)}.item.mx.svelte-1cp0kbr:not(.zero) div.svelte-1cp0kbr:nth-child(2),.item.full.svelte-1cp0kbr div.svelte-1cp0kbr:nth-child(2){color:var(--theme-clear-aj);text-shadow:0 0 10px var(--theme-clear-aj)}.item.zero.svelte-1cp0kbr div.svelte-1cp0kbr:nth-child(2){color:var(--theme-text-dim)}.total.svelte-1cp0kbr.svelte-1cp0kbr{color:var(--theme-text-dim);font-size:0.8rem;display:flex;align-items:end}")}function Kr(e,t,n){const r=e.slice();return r[4]=t[n],r}function eo(e){let t,n,r,o,s,a,i=(e[0][e[4]]??0)+"";return{c(){t=N("div"),n=N("div"),r=M(e[4]),o=z(),s=N("div"),a=M(i),L(n,"class","svelte-1cp0kbr"),L(s,"class","svelte-1cp0kbr"),L(t,"class","item svelte-1cp0kbr"),I(t,"zero",!(e[0][e[4]]>0)),I(t,"full",e[0][e[4]]==e[3])},m(e,i){T(e,t,i),y(t,n),y(n,r),y(t,o),y(t,s),y(s,a)},p(e,n){1&n&&i!==(i=(e[0][e[4]]??0)+"")&&O(a,i),1&n&&I(t,"zero",!(e[0][e[4]]>0)),9&n&&I(t,"full",e[0][e[4]]==e[3])},d(e){e&&C(t)}}}function to(e){let t,n,r,o,s,a=(e[0].MAX??0)+"";return{c(){t=N("div"),n=N("div"),n.textContent="MAX",r=z(),o=N("div"),s=M(a),L(n,"class","svelte-1cp0kbr"),L(o,"class","svelte-1cp0kbr"),L(t,"class","item mx svelte-1cp0kbr")},m(e,a){T(e,t,a),y(t,n),y(t,r),y(t,o),y(o,s)},p(e,t){1&t&&a!==(a=(e[0].MAX??0)+"")&&O(s,a)},d(e){e&&C(t)}}}function no(t){let n,r,o,s,a,i,l,c,d,u,f,h,p,g,m,v,b,w,x=["S","S+","SS","SS+","SSS","SSS+"],k=[];for(let e=0;e<6;e+=1)k[e]=eo(Kr(t,x,e));let $=t[0].MAX>0&&to(t);return{c(){n=N("div");for(let e=0;e<6;e+=1)k[e].c();r=z(),$&&$.c(),o=z(),s=N("div"),a=N("div"),a.textContent="FC",i=z(),l=N("div"),c=M(t[1]),d=z(),u=N("div"),f=N("div"),f.textContent="AJ",h=z(),p=N("div"),g=M(t[2]),m=z(),v=N("div"),b=M("/"),w=M(t[3]),L(a,"class","svelte-1cp0kbr"),L(l,"class","svelte-1cp0kbr"),L(s,"class","item fc svelte-1cp0kbr"),I(s,"zero",0==t[1]),L(f,"class","svelte-1cp0kbr"),L(p,"class","svelte-1cp0kbr"),L(u,"class","item aj svelte-1cp0kbr"),I(u,"zero",0==t[2]),L(v,"class","total svelte-1cp0kbr"),L(n,"class","wrapper svelte-1cp0kbr")},m(e,t){T(e,n,t);for(let e=0;e<6;e+=1)k[e].m(n,null);y(n,r),$&&$.m(n,null),y(n,o),y(n,s),y(s,a),y(s,i),y(s,l),y(l,c),y(n,d),y(n,u),y(u,f),y(u,h),y(u,p),y(p,g),y(n,m),y(n,v),y(v,b),y(v,w)},p(e,[t]){if(9&t){let o;for(x=["S","S+","SS","SS+","SSS","SSS+"],o=0;o<6;o+=1){const s=Kr(e,x,o);k[o]?k[o].p(s,t):(k[o]=eo(s),k[o].c(),k[o].m(n,r))}for(;o<6;o+=1)k[o].d(1)}e[0].MAX>0?$?$.p(e,t):($=to(e),$.c(),$.m(n,o)):$&&($.d(1),$=null),2&t&&O(c,e[1]),2&t&&I(s,"zero",0==e[1]),4&t&&O(g,e[2]),4&t&&I(u,"zero",0==e[2]),8&t&&O(w,e[3])},i:e,o:e,d(e){e&&C(n),H(k,e),$&&$.d()}}}function ro(e,t,n){let{rankCounts:r}=t,{fcCount:o}=t,{ajCount:s}=t,{total:a}=t;return e.$$set=e=>{"rankCounts"in e&&n(0,r=e.rankCounts),"fcCount"in e&&n(1,o=e.fcCount),"ajCount"in e&&n(2,s=e.ajCount),"total"in e&&n(3,a=e.total)},[r,o,s,a]}const oo=class extends $e{constructor(e){super(),ke(this,e,ro,no,i,{rankCounts:0,fcCount:1,ajCount:2,total:3},Qr)}};function so(e){x(e,"svelte-1lbyloi",".wrapper.svelte-1lbyloi.svelte-1lbyloi{border:var(--theme-border) 3px solid;border-radius:0.5rem;background-color:var(--theme-bg-sub);box-sizing:border-box;width:100%;max-width:600px;padding:0.5rem 2rem;margin:0.5rem;display:flex;justify-content:space-evenly;align-items:center;text-align:center;gap:1rem;overflow-x:scroll}.wrapper.svelte-1lbyloi.svelte-1lbyloi::-webkit-scrollbar{display:none}.wrapper.aj.svelte-1lbyloi .progress.svelte-1lbyloi,.wrapper.aj.svelte-1lbyloi .op-total.svelte-1lbyloi{color:var(--theme-clear-aj);text-shadow:0 0 10px var(--theme-clear-aj)}.op-total.svelte-1lbyloi.svelte-1lbyloi{font-size:1.5em;font-weight:bold}.op-max.svelte-1lbyloi.svelte-1lbyloi{font-size:0.8em;color:var(--theme-text-dim)}.progress.svelte-1lbyloi.svelte-1lbyloi{width:100%;border-radius:1em;background-color:var(--theme-bg-main)}.progress.svelte-1lbyloi div.svelte-1lbyloi{border-radius:1em;background-color:var(--theme-control);font-weight:bold}")}function ao(t){let n,r,o,s,a,i,l,c,d,u,f,h,p,g=t[1].toFixed(2)+"",m=t[0].toFixed(1)+"",v=t[2].toFixed(3)+"";return{c(){n=N("div"),r=N("div"),o=N("div"),s=M(g),a=z(),i=N("div"),l=M("／"),c=M(m),d=z(),u=N("div"),f=N("div"),h=M(v),p=M("%"),L(o,"class","op-total svelte-1lbyloi"),L(i,"class","op-max svelte-1lbyloi"),P(f,"width",(isNaN(t[2])?0:t[2])+"%"),L(f,"class","svelte-1lbyloi"),L(u,"class","progress svelte-1lbyloi"),L(n,"class","wrapper svelte-1lbyloi"),I(n,"aj",t[1].toFixed(2)===t[0].toFixed(2))},m(e,t){T(e,n,t),y(n,r),y(r,o),y(o,s),y(r,a),y(r,i),y(i,l),y(i,c),y(n,d),y(n,u),y(u,f),y(f,h),y(f,p)},p(e,[t]){2&t&&g!==(g=e[1].toFixed(2)+"")&&O(s,g),1&t&&m!==(m=e[0].toFixed(1)+"")&&O(c,m),4&t&&v!==(v=e[2].toFixed(3)+"")&&O(h,v),4&t&&P(f,"width",(isNaN(e[2])?0:e[2])+"%"),3&t&&I(n,"aj",e[1].toFixed(2)===e[0].toFixed(2))},i:e,o:e,d(e){e&&C(n)}}}function io(e,t,n){let r,o,s,{records:a}=t;return e.$$set=e=>{"records"in e&&n(3,a=e.records)},e.$$.update=()=>{8&e.$$.dirty&&n(1,r=a.reduce(((e,t)=>e+t.op),0)),8&e.$$.dirty&&n(0,o=a.reduce(((e,t)=>e+t.opmax),0)),3&e.$$.dirty&&n(2,s=r/o*100)},[o,r,s,a]}const lo=class extends $e{constructor(e){super(),ke(this,e,io,ao,i,{records:3},so)}},{window:co}=me;function uo(e){x(e,"svelte-1s4msav","main.svelte-1s4msav{width:100%;display:flex;-ms-flex-direction:column;flex-direction:column;align-items:center}")}function fo(t){let n,r;return n=new Fr({props:{error:t[20]}}),{c(){we(n.$$.fragment)},m(e,t){ye(n,e,t),r=!0},p:e,i(e){r||(fe(n.$$.fragment,e),r=!0)},o(e){he(n.$$.fragment,e),r=!1},d(e){xe(n,e)}}}function ho(e){let t,n,r,o,s,a,i,l,c,d,u,f,h,p,g;t=new Zr({}),r=new an({}),a=new fr({});let m="best"===e[5]&&po(e);c=new zr({props:{playRecord:e[0],shown:"best"===e[5]}}),u=new zr({props:{playRecord:e[8],shown:"recent"===e[5]}}),h=new zr({props:{playRecord:e[9],shown:"history"===e[5]}});let v=e[10]&&vo();return{c(){we(t.$$.fragment),n=z(),we(r.$$.fragment),o=z(),s=N("main"),we(a.$$.fragment),i=z(),m&&m.c(),l=z(),we(c.$$.fragment),d=z(),we(u.$$.fragment),f=z(),we(h.$$.fragment),p=z(),v&&v.c(),L(s,"class","svelte-1s4msav")},m(e,b){ye(t,e,b),T(e,n,b),ye(r,e,b),T(e,o,b),T(e,s,b),ye(a,s,null),y(s,i),m&&m.m(s,null),y(s,l),ye(c,s,null),y(s,d),ye(u,s,null),y(s,f),ye(h,s,null),y(s,p),v&&v.m(s,null),g=!0},p(e,t){"best"===e[5]?m?(m.p(e,t),32&t&&fe(m,1)):(m=po(e),m.c(),fe(m,1),m.m(s,l)):m&&(de(),he(m,1,1,(()=>{m=null})),ue());const n={};1&t&&(n.playRecord=e[0]),32&t&&(n.shown="best"===e[5]),c.$set(n);const r={};256&t&&(r.playRecord=e[8]),32&t&&(r.shown="recent"===e[5]),u.$set(r);const o={};512&t&&(o.playRecord=e[9]),32&t&&(o.shown="history"===e[5]),h.$set(o),e[10]?v?1024&t&&fe(v,1):(v=vo(),v.c(),fe(v,1),v.m(s,null)):v&&(de(),he(v,1,1,(()=>{v=null})),ue())},i(e){g||(fe(t.$$.fragment,e),fe(r.$$.fragment,e),fe(a.$$.fragment,e),fe(m),fe(c.$$.fragment,e),fe(u.$$.fragment,e),fe(h.$$.fragment,e),fe(v),g=!0)},o(e){he(t.$$.fragment,e),he(r.$$.fragment,e),he(a.$$.fragment,e),he(m),he(c.$$.fragment,e),he(u.$$.fragment,e),he(h.$$.fragment,e),he(v),g=!1},d(e){xe(t,e),e&&C(n),xe(r,e),e&&C(o),e&&C(s),xe(a),m&&m.d(),xe(c),xe(u),xe(h),v&&v.d()}}}function po(e){let t,n,r,o;const s=[mo,go],a=[];function i(e,t){return e[2]?0:1}return t=i(e),n=a[t]=s[t](e),{c(){n.c(),r=j()},m(e,n){a[t].m(e,n),T(e,r,n),o=!0},p(e,o){let l=t;t=i(e),t===l?a[t].p(e,o):(de(),he(a[l],1,1,(()=>{a[l]=null})),ue(),n=a[t],n?n.p(e,o):(n=a[t]=s[t](e),n.c()),fe(n,1),n.m(r.parentNode,r))},i(e){o||(fe(n),o=!0)},o(e){he(n),o=!1},d(e){a[t].d(e),e&&C(r)}}}function go(e){let t,n;return t=new oo({props:{ajCount:e[1],fcCount:e[3],rankCounts:e[4],total:e[0].length}}),{c(){we(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.ajCount=e[1]),8&n&&(r.fcCount=e[3]),16&n&&(r.rankCounts=e[4]),1&n&&(r.total=e[0].length),t.$set(r)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function mo(e){let t,n;return t=new lo({props:{records:e[0]}}),{c(){we(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.records=e[0]),t.$set(r)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function vo(e){let t,n;return t=new Jr({}),{c(){we(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function bo(t){let n,r;return n=new Fr({}),{c(){we(n.$$.fragment)},m(e,t){ye(n,e,t),r=!0},p:e,i(e){r||(fe(n.$$.fragment,e),r=!0)},o(e){he(n.$$.fragment,e),r=!1},d(e){xe(n,e)}}}function wo(e){let t,n;return t=new tr({}),{c(){we(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){he(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function yo(e){let t,n,r,o,s,a,i,l,c,d,u;document.title=o=e[7]("main.title");let f={ctx:e,current:null,token:null,hasCatch:!0,pending:bo,then:ho,catch:fo,error:20,blocks:[,,,]};!function(e,t){const n=t.token={};function r(e,r,o,s){if(t.token!==n)return;t.resolved=s;let a=t.ctx;void 0!==o&&(a=a.slice(),a[o]=s);const i=e&&(t.current=e)(a);let l=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==r&&e&&(de(),he(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),ue())})):t.block.d(1),i.c(),fe(i,1),i.m(t.mount(),t.anchor),l=!0),t.block=i,t.blocks&&(t.blocks[r]=i),l&&se()}if(!(o=e)||"object"!=typeof o&&"function"!=typeof o||"function"!=typeof o.then){if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}else{const n=J();if(e.then((e=>{W(n),r(t.then,1,t.value,e),W(null)}),(e=>{if(W(n),r(t.catch,2,t.error,e),W(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}var o}(a=Promise.all([xt.init(),wt.init(),yt.init(),kt.init(),e[13]()]),f);let h=e[11]&&wo();return{c(){t=N("link"),n=N("link"),s=z(),f.block.c(),i=z(),h&&h.c(),l=j(),L(t,"rel","stylesheet"),L(t,"href","../common/styles/common.css"),L(n,"rel","stylesheet"),L(n,"href",r="../common/styles/theme-"+e[6]+".css")},m(r,o){y(document.head,t),y(document.head,n),T(r,s,o),f.block.m(r,f.anchor=o),f.mount=()=>i.parentNode,f.anchor=i,T(r,i,o),h&&h.m(r,o),T(r,l,o),c=!0,d||(u=A(co,"hashchange",e[12]),d=!0)},p(t,[s]){e=t,(!c||64&s&&r!==(r="../common/styles/theme-"+e[6]+".css"))&&L(n,"href",r),(!c||128&s)&&o!==(o=e[7]("main.title"))&&(document.title=o),function(e,t,n){const r=t.slice(),{resolved:o}=e;e.current===e.then&&(r[e.value]=o),e.current===e.catch&&(r[e.error]=o),e.block.p(r,n)}(f,e,s),e[11]?h?2048&s&&fe(h,1):(h=wo(),h.c(),fe(h,1),h.m(l.parentNode,l)):h&&(de(),he(h,1,1,(()=>{h=null})),ue())},i(e){c||(fe(f.block),fe(h),c=!0)},o(e){for(let e=0;e<3;e+=1)he(f.blocks[e]);he(h),c=!1},d(e){C(t),C(n),e&&C(s),f.block.d(e),f.token=null,f=null,e&&C(i),h&&h.d(e),e&&C(l),d=!1,u()}}}function xo(e,t,n){let r,o,s,a,i,l,c,d,f,p,g,m,v,b,w,y,x,k;return u(e,qe,(e=>n(14,i=e))),u(e,Ve,(e=>n(15,l=e))),u(e,Xe,(e=>n(16,c=e))),u(e,We,(e=>n(17,d=e))),u(e,Ye,(e=>n(2,f=e))),u(e,kt,(e=>n(18,p=e))),u(e,De,(e=>n(19,g=e))),u(e,ut,(e=>n(5,m=e))),u(e,Pe,(e=>n(6,v=e))),u(e,ct,(e=>n(7,b=e))),u(e,wt,(e=>n(8,w=e))),u(e,yt,(e=>n(9,y=e))),u(e,pt,(e=>n(10,x=e))),u(e,ft,(e=>n(11,k=e))),h(ut,m=window.location.hash.slice(1),m),e.$$.update=()=>{507908&e.$$.dirty&&n(0,r=p.filter((e=>(f||e.score>=0)&&d[e.difficulty]&&c[Ee.find((t=>Ne[t]==e.genre))]&&l>=e.const&&e.const>=i))),1&e.$$.dirty&&n(4,o=(()=>{let e={};["MAX","SSS+","SSS","SS+","SS","S+","S"].forEach((t=>e[t]=0)),["AAA","AA","A","BBB","BB","B","C","D"].forEach((t=>e[t]=0));for(const t of r)e[t.rank]++;return Object.keys(e).reduce(((t,n)=>(e[n]+=e[t],n))),e})()),1&e.$$.dirty&&n(1,s=r.filter((e=>"AJ"==e.clear)).length),3&e.$$.dirty&&n(3,a=s+r.filter((e=>"FC"==e.clear)).length)},[r,s,f,a,o,m,v,b,w,y,x,k,function(){h(ut,m=window.location.hash.slice(1),m)},async function(){Se(window.opener,Te)("saveConfig",{data:{lang:g}})},i,l,c,d,p]}new class extends $e{constructor(e){super(),ke(this,e,xo,yo,i,{},uo)}}({target:document.body})})()})();